import{a as We}from"./chunk-47G4JF4V.js";import{a as $e,b as Be,c as Ue,d as He,e as je,f as Ge}from"./chunk-U4RXTWQI.js";import{a as B,b as U}from"./chunk-CTPZG76Y.js";import{a as Se,b as Oe}from"./chunk-LZAUEQAN.js";import{b as Ee,c as ke}from"./chunk-FYGEUYEJ.js";import{b as H,g as Ie}from"./chunk-5R2X6POM.js";import"./chunk-XXMBZZ37.js";import{a as ce}from"./chunk-NHWKIFHZ.js";import{c as Fe,d as Ve,g as Ae,h as Re,i as ze,j as Le}from"./chunk-GCQ2WIT6.js";import{a as Te,b as Ne}from"./chunk-XNM27DCK.js";import"./chunk-PPZFH2ZV.js";import{a as L,b as $}from"./chunk-2MAXEO6Q.js";import{a as De,b as ye}from"./chunk-Q5HFPYVW.js";import"./chunk-46UKYMVD.js";import"./chunk-OL6EOTCO.js";import"./chunk-6BTVTWSQ.js";import{c as ue,d as A,f as fe,g as ve,j as _e,k as Ce,l as be,p as he,q as xe,r as Pe,v as R,w as z}from"./chunk-Z4BNMZT3.js";import"./chunk-47X5BFEM.js";import{c as pe,d as ge}from"./chunk-JUILAC2W.js";import{a as Me,b as we}from"./chunk-SPDGIFFF.js";import"./chunk-TOC7PNXQ.js";import"./chunk-JNP63KUK.js";import{Ia as q,Ma as O,c as ae,gb as E,hb as k,i as re,j as le,l as V,m as se,n as de,x as me}from"./chunk-WQRABBEY.js";import{$b as N,Ab as d,Ac as oe,Cc as T,Dc as S,Hb as P,Mb as p,Ob as v,Pa as l,U as C,Yb as ee,Z as u,_ as f,bb as M,bc as r,cc as g,dc as y,hb as w,ja as _,jc as I,kc as x,lc as te,ma as Y,rb as b,sb as h,sc as D,tc as F,ub as K,uc as J,vb as Z,vc as ie,wb as Q,xb as m,yb as i,yc as ne,zb as n}from"./chunk-XTNRL3Y3.js";var et=()=>({width:"700px",maxWidth:"95vw"}),tt=()=>["0"];function it(a,t){if(a&1&&(i(0,"div",6)(1,"label",7),r(2,"Fecha de Creaci\xF3n"),n(),i(3,"div",8),r(4),D(5,"date"),n()()),a&2){let e=v(2);l(4),y(" ",J(5,1,e.domain().createdAt.toDate(),"dd/MM/yyyy HH:mm")," ")}}function nt(a,t){if(a&1&&(i(0,"li",22),d(1,"i",23),i(2,"code"),r(3),n()()),a&2){let e=t.$implicit;l(3),g(e)}}function ot(a,t){if(a&1&&(i(0,"ul",13),Z(1,nt,4,1,"li",22,K),n()),a&2){let e=v(2);l(),Q(e.domain().nameservers)}}function at(a,t){a&1&&(i(0,"p",14),r(1,"No hay nameservers configurados"),n())}function rt(a,t){if(a&1){let e=P();i(0,"p-button",24),p("onClick",function(){u(e);let s=v(2);return f(s.onClose())}),n()}}function lt(a,t){if(a&1&&(i(0,"div",1)(1,"div",2)(2,"div",3),d(3,"app-expiration-semaphore",4),i(4,"h2"),r(5),n()()(),d(6,"p-divider"),i(7,"div",5)(8,"div",6)(9,"label",7),r(10,"Fecha de Vencimiento"),n(),i(11,"div",8)(12,"strong"),r(13),D(14,"date"),n()()(),b(15,it,6,4,"div",6),i(16,"div",6)(17,"label",7),r(18,"Domain Lock"),n(),i(19,"div",8),d(20,"p-tag",9),n()(),i(21,"div",6)(22,"label",7),r(23,"Privacidad WHOIS"),n(),i(24,"div",8),d(25,"p-tag",9),n()()(),d(26,"p-divider"),i(27,"div",10)(28,"h3",11),d(29,"i",12),r(30," Nameservers "),n(),b(31,ot,3,0,"ul",13)(32,at,2,0,"p",14),n(),d(33,"p-divider"),i(34,"div",15)(35,"p-accordion",16)(36,"p-accordionpanel",17)(37,"p-accordionheader")(38,"div",18),d(39,"i",19),i(40,"span"),r(41,"Datos Raw (JSON)"),n()()(),i(42,"p-accordioncontent")(43,"pre",20),r(44),D(45,"json"),n()()()()()(),w(46,rt,1,0,"ng-template",21)),a&2){let e=v();l(3),m("expiresAt",e.domain().expiresAt),l(2),g(e.domain().domainName),l(8),g(J(14,11,e.domain().expiresAt.toDate(),"dd/MM/yyyy HH:mm")),l(2),h(e.domain().createdAt?15:-1),l(5),m("value",e.domain().domainLock?"Activado":"Desactivado")("severity",e.getTagSeverity(e.domain().domainLock||!1)),l(5),m("value",e.domain().privacyProtection?"Activada":"Desactivada")("severity",e.getTagSeverity(e.domain().privacyProtection||!1)),l(6),h(e.domain().nameservers&&e.domain().nameservers.length>0?31:32),l(4),m("value",x(16,tt)),l(9),g(F(45,14,e.domain()))}}var j=class a{domain=S.required();visible=S.required();visibleChange=T();showRawData=_(!1);onClose(){this.visibleChange.emit(!1)}toggleRawData(){this.showRawData.update(t=>!t)}getTagSeverity(t){return t?"success":"secondary"}formatNameservers(t){return!t||t.length===0?"N/A":t.join(`
`)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=M({type:a,selectors:[["app-domain-details-dialog"]],inputs:{domain:[1,"domain"],visible:[1,"visible"]},outputs:{visibleChange:"visibleChange"},decls:2,vars:8,consts:[[1,"domain-details-dialog",3,"visibleChange","header","visible","modal","dismissableMask"],[1,"dialog-content"],[1,"domain-header"],[1,"domain-title"],[3,"expiresAt"],[1,"details-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[3,"value","severity"],[1,"nameservers-section"],[1,"section-title"],[1,"pi","pi-server"],[1,"nameservers-list"],[1,"no-data"],[1,"raw-data-section"],[3,"value"],["value","0"],[1,"accordion-header"],[1,"pi","pi-code"],[1,"raw-data-content"],["pTemplate","footer"],[1,"nameserver-item"],[1,"pi","pi-angle-right"],["label","Cerrar","icon","pi pi-times","severity","secondary",3,"onClick"]],template:function(e,o){e&1&&(i(0,"p-dialog",0),p("visibleChange",function(){return o.onClose()}),b(1,lt,47,17),n()),e&2&&(N(x(7,et)),m("header","Detalles del Dominio")("visible",o.visible())("modal",!0)("dismissableMask",!0),l(),h(o.domain()?1:-1))},dependencies:[U,B,O,k,E,$,L,Be,$e,Ge,Ue,He,je,We,re,le],styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.domain-header[_ngcontent-%COMP%]   .domain-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.domain-header[_ngcontent-%COMP%]   .domain-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--primary-color);font-weight:700}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}@media(max-width:576px){.details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase;letter-spacing:.5px}.detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-color)}.nameservers-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0 0 1rem;font-size:1.1rem;font-weight:600;color:var(--text-color)}.nameservers-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.nameservers-section[_ngcontent-%COMP%]   .nameservers-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.5rem}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:#f9fafb;border-radius:6px;border:1px solid #e5e7eb}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);font-size:.85rem}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem;color:#374151}.nameservers-section[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-style:italic;margin:0}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-header .accordion-header{display:flex;align-items:center;gap:.5rem;font-weight:600}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-header .accordion-header i{color:var(--primary-color)}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-content{padding:0}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0;padding:1.5rem;margin:0;border-radius:6px;font-family:Courier New,monospace;font-size:.85rem;line-height:1.6;overflow-x:auto;max-height:400px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0f172a;border-radius:4px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#475569;border-radius:4px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64748b}  .domain-details-dialog .p-dialog-header{background:linear-gradient(135deg,#475569,#334155);color:#fff;border-top-left-radius:8px;border-top-right-radius:8px}  .domain-details-dialog .p-dialog-header .p-dialog-title{font-weight:700}  .domain-details-dialog .p-dialog-header .p-dialog-header-icon{color:#fff}  .domain-details-dialog .p-dialog-header .p-dialog-header-icon:hover{background-color:#ffffff1a}  .domain-details-dialog .p-divider{margin:1rem 0}"],changeDetection:0})};function st(a){let t=a,e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length,s=parseInt(a.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===1?1:s===0&&e!==0&&e%1e6===0&&o===0||!(s>=0&&s<=5)?4:5}var Ke=["es",[["a.\u202Fm.","p.\u202Fm."],void 0,["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[void 0,"EGP"],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",st];var mt=()=>({width:"600px"}),ct=a=>[a,"COP","symbol","1.0-0","es"];function pt(a,t){a&1&&(i(0,"small",5),r(1,"Ingresa un email v\xE1lido"),n())}function gt(a,t){if(a&1){let e=P();i(0,"p-button",13),p("onClick",function(){u(e);let s=v();return f(s.onClose())}),n(),i(1,"p-button",14),p("onClick",function(){u(e);let s=v();return f(s.onSave())}),n()}if(a&2){let e=v();m("disabled",e.isSaving()),l(),m("loading",e.isSaving())("disabled",e.editForm.invalid)}}de(Ke);var G=class a{fb=C(he);domainService=C(H);domain=S.required();visible=S.required();visibleChange=T();domainUpdated=T();isSaving=_(!1);totalPrice=_(0);editForm=this.fb.group({contactEmail:["",[A.email]],hostingRenewalPrice:[0,[A.min(0)]],domainRenewalPrice:[0,[A.min(0)]]});constructor(){Y(()=>{let t=this.domain();if(t){let e=t.hostingRenewalPrice||0,o=t.domainRenewalPrice||0;e===0&&o===0&&t.renewalPrice&&(o=t.renewalPrice),this.editForm.patchValue({contactEmail:t.contactEmail||"",hostingRenewalPrice:e,domainRenewalPrice:o}),this.updateTotalPrice()}}),this.editForm.valueChanges.subscribe(()=>{this.updateTotalPrice()})}updateTotalPrice(){let t=this.editForm.value.hostingRenewalPrice||0,e=this.editForm.value.domainRenewalPrice||0;this.totalPrice.set(t+e)}async onSave(){let t=this.domain();if(!(!t||this.editForm.invalid)){this.isSaving.set(!0);try{let e={contactEmail:this.editForm.value.contactEmail||void 0,hostingRenewalPrice:this.editForm.value.hostingRenewalPrice||0,domainRenewalPrice:this.editForm.value.domainRenewalPrice||0,renewalPrice:0};await this.domainService.updateDomain(t.id,e),this.domainUpdated.emit(),this.onClose()}catch(e){console.error("Error updating domain:",e)}finally{this.isSaving.set(!1)}}}onClose(){this.editForm.reset(),this.visibleChange.emit(!1)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=M({type:a,selectors:[["app-domain-edit-dialog"]],inputs:{domain:[1,"domain"],visible:[1,"visible"]},outputs:{visibleChange:"visibleChange",domainUpdated:"domainUpdated"},features:[I([{provide:ne,useValue:"es"}])],decls:22,vars:21,consts:[[3,"visibleChange","header","visible","modal","draggable","resizable"],[3,"ngSubmit","formGroup"],[1,"field"],["for","contactEmail"],["pInputText","","id","contactEmail","formControlName","contactEmail","type","email","placeholder","cliente@ejemplo.com",1,"w-full"],[1,"p-error"],["for","hostingPrice"],["inputId","hostingPrice","formControlName","hostingRenewalPrice","mode","currency","currency","COP","locale","es",1,"w-full",3,"min"],["for","domainPrice"],["inputId","domainPrice","formControlName","domainRenewalPrice","mode","currency","currency","COP","locale","es",1,"w-full",3,"min"],[1,"total-price"],[1,"price"],["pTemplate","footer"],["label","Cancelar","icon","pi pi-times","severity","secondary",3,"onClick","disabled"],["label","Guardar","icon","pi pi-check",3,"onClick","loading","disabled"]],template:function(e,o){if(e&1&&(i(0,"p-dialog",0),p("visibleChange",function(c){return o.visibleChange.emit(c)}),i(1,"form",1),p("ngSubmit",function(){return o.onSave()}),i(2,"div",2)(3,"label",3),r(4,"Email de Contacto"),n(),d(5,"input",4),b(6,pt,2,0,"small",5),n(),i(7,"div",2)(8,"label",6),r(9,"Precio Renovaci\xF3n Hosting (COP)"),n(),d(10,"p-inputNumber",7),n(),i(11,"div",2)(12,"label",8),r(13,"Precio Renovaci\xF3n Dominio (COP)"),n(),d(14,"p-inputNumber",9),n(),i(15,"div",10)(16,"strong"),r(17,"Total Renovaci\xF3n:"),n(),i(18,"span",11),r(19),D(20,"currency"),n()()(),w(21,gt,2,3,"ng-template",12),n()),e&2){let s,c;N(x(18,mt)),m("header","Editar Dominio - "+(((s=o.domain())==null?null:s.domainName)||""))("visible",o.visible())("modal",!0)("draggable",!1)("resizable",!1),l(),m("formGroup",o.editForm),l(5),h((c=o.editForm.get("contactEmail"))!=null&&c.invalid&&((c=o.editForm.get("contactEmail"))!=null&&c.touched)?6:-1),l(4),m("min",0),l(4),m("min",0),l(5),g(ie(20,12,te(19,ct,o.totalPrice())))}},dependencies:[Pe,_e,ue,fe,ve,be,Ce,U,B,O,k,E,z,R,Ve,Fe,V],styles:[".field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:var(--text-color)}.field[_ngcontent-%COMP%]   small.p-error[_ngcontent-%COMP%]{display:block;margin-top:.25rem;color:var(--red-500)}.total-price[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--surface-100);border-radius:var(--border-radius);margin-top:1rem}.total-price[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-color)}.total-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:var(--primary-color)}"],changeDetection:0})};var ut=()=>[10,25,50],ft=()=>["domainName","registrar","provider"],vt=()=>({"min-width":"50rem"});function _t(a,t){a&1&&(i(0,"div",7),d(1,"p-skeleton",16),i(2,"div",17),d(3,"p-skeleton",18),n()())}function Ct(a,t){if(a&1&&(i(0,"div",8)(1,"p-card")(2,"div",19)(3,"div",20),d(4,"i",21),n(),i(5,"div",22)(6,"div",23),r(7,"Total Dominios"),n(),i(8,"div",24),r(9),n(),i(10,"div",25),r(11,"Registrados"),n()()()(),i(12,"p-card")(13,"div",19)(14,"div",26),d(15,"i",27),n(),i(16,"div",22)(17,"div",23),r(18,"Saludables"),n(),i(19,"div",24),r(20),n(),i(21,"div",25),r(22,"Sin alertas"),n()()()(),i(23,"p-card")(24,"div",19)(25,"div",28),d(26,"i",29),n(),i(27,"div",22)(28,"div",23),r(29,"Atenci\xF3n Requerida"),n(),i(30,"div",24),r(31),n(),i(32,"div",30)(33,"span",31),r(34),n(),i(35,"span",32),r(36),n()()()()(),i(37,"p-card")(38,"div",19)(39,"div",33),d(40,"i",34),n(),i(41,"div",22)(42,"div",23),r(43,"Valor de Renovaci\xF3n"),n(),i(44,"div",24),r(45),D(46,"currency"),n(),i(47,"div",25),r(48,"Proyectado"),n()()()()()),a&2){let e=t;l(9),g(e.total),l(11),g(e.active),l(11),g(e.critical+e.warning+e.expired),l(3),y("",e.expired," vencidos"),l(2),y("",e.critical+e.warning," pr\xF3ximos"),l(9),g(F(46,6,e.totalValue))}}function bt(a,t){if(a&1){let e=P();i(0,"div",35)(1,"div",36),d(2,"i",37),i(3,"input",38),p("input",function(s){u(e),v();let c=ee(14);return f(c.filterGlobal(s.target.value,"contains"))}),n()()()}}function ht(a,t){a&1&&(i(0,"tr")(1,"th",39),r(2," Dominio "),d(3,"p-sortIcon",40),n(),i(4,"th",41),r(5," Vencimiento "),d(6,"p-sortIcon",42),n(),i(7,"th",43),r(8,"Estado"),n(),i(9,"th",44),r(10,"Auto-Renew"),n(),i(11,"th",44),r(12,"Privacy"),n(),i(13,"th",44),r(14,"Acciones"),n()())}function xt(a,t){if(a&1){let e=P();i(0,"tr")(1,"td")(2,"div",45),r(3),n(),i(4,"div",46),r(5),n()(),i(6,"td")(7,"div",47)(8,"span",48),r(9),n(),i(10,"small",49),r(11),n()()(),i(12,"td",50),d(13,"p-tag",51),n(),i(14,"td",50),d(15,"i",52),n(),i(16,"td",50),d(17,"i",52),n(),i(18,"td",50)(19,"div",53)(20,"p-button",54),p("onClick",function(){let s=u(e).$implicit,c=v();return f(c.onEditDomain(s))}),n(),i(21,"p-button",55),p("onClick",function(){let s=u(e).$implicit,c=v();return f(c.onDomainClicked(s))}),n()()()()}if(a&2){let e=t.$implicit,o=v();l(3),g(e.domainName),l(2),y(" ",e.registrar||"Desconocido"," "),l(4),g(o.formatDate(e.expiresAt)),l(2),g(o.getStatusLabel(e.expiresAt)),l(2),m("value",o.getStatusLabel(e.expiresAt).split("(")[0])("severity",o.getSeverity(e.expiresAt))("icon",o.getStatusIcon(e.expiresAt)),l(2),m("ngClass",e.autoRenew?"fa-check text-green-500":"fa-times text-red-400"),l(2),m("ngClass",e.privacyProtection?"fa-shield-alt text-green-500":"fa-lock-open text-orange-400"),l(3),m("rounded",!0)("text",!0),l(),m("rounded",!0)("text",!0)}}function Pt(a,t){a&1&&(i(0,"tr")(1,"td",56)(2,"div",57),d(3,"i",3),i(4,"p"),r(5,"No se encontraron dominios"),n()()()())}var X=class a{domainService=C(H);workspaceContext=C(ce);exportService=C(Ie);route=C(me);messageService=C(q);domains=_([]);isLoading=this.domainService.isLoading;error=this.domainService.error;stats=_(null);selectedDomain=_(null);showDetailsDialog=_(!1);showEditDialog=_(!1);workspaceName=oe(()=>this.workspaceContext.getCurrentWorkspace()?.name||"Workspace");ngOnInit(){this.route.paramMap.subscribe(()=>{this.loadData()})}async loadData(){try{let t=this.route.snapshot.paramMap.get("workspaceId");if(!t)throw new Error("No se encontr\xF3 el ID del workspace");let[e,o]=await Promise.all([this.domainService.getAllDomains(t),this.domainService.getDomainStatistics(t)]);this.domains.set(e),this.stats.set(o),e.length===0&&this.messageService.add({severity:"info",summary:"Sin dominios",detail:"No se encontraron dominios para este workspace.",life:5e3})}catch(t){console.error("[DomainsPage] Error loading data:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Error al cargar los datos de dominios"})}}getSeverity(t){switch(this.domainService.getExpirationStatus(t)){case"ok":return"success";case"warning":return"warn";case"critical":case"expired":return"danger";default:return"info"}}getStatusLabel(t){let e=this.domainService.getExpirationStatus(t),o=this.domainService.getDaysUntilExpiration(t);return e==="expired"?`Vencido (${Math.abs(o||0)}d)`:o!==null?`${o} d\xEDas`:"Desconocido"}getStatusIcon(t){switch(this.domainService.getExpirationStatus(t)){case"ok":return"fa fa-check-circle";case"warning":return"fa fa-exclamation-triangle";case"critical":return"fa fa-exclamation-circle";case"expired":return"fa fa-times-circle";default:return"fa fa-question-circle"}}onDomainClicked(t){this.selectedDomain.set(t),this.showDetailsDialog.set(!0)}onDialogVisibilityChange(t){this.showDetailsDialog.set(t),t||this.selectedDomain.set(null)}onEditDomain(t){this.selectedDomain.set(t),this.showEditDialog.set(!0)}onEditDialogVisibilityChange(t){this.showEditDialog.set(t),t||this.selectedDomain.set(null)}exportToCSV(){let t=this.domains();if(t.length===0)return;let e=t.map(s=>({Dominio:s.domainName,Workspace:this.workspaceName(),"Fecha de Vencimiento":this.formatDate(s.expiresAt),Estado:this.domainService.getExpirationStatus(s.expiresAt)})),o=`dominios-${this.workspaceName().replace(/\s+/g,"-").toLowerCase()}-${new Date().toISOString().split("T")[0]}.csv`;this.exportService.exportToCSV(e,o),this.messageService.add({severity:"success",summary:"Exportado",detail:`Datos exportados a ${o}`,life:3e3})}formatDate(t){return t?t instanceof Date?t.toLocaleDateString():typeof t=="object"&&"toDate"in t?t.toDate().toLocaleDateString():String(t):""}onDomainUpdated(){this.messageService.add({severity:"success",summary:"Dominio actualizado",detail:"Los cambios se guardaron correctamente"}),this.loadData()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=M({type:a,selectors:[["app-domains"]],features:[I([q])],decls:21,vars:23,consts:[["dt",""],[1,"p-toolbar-group-start"],[1,"app-page-title"],[1,"fa","fa-globe"],[1,"p-toolbar-group-end"],["label","Actualizar","icon","fa fa-refresh","severity","secondary","size","small","pTooltip","Actualizar datos","tooltipPosition","bottom",3,"onClick","outlined","loading"],["label","Exportar","icon","fa fa-download","severity","secondary","size","small",1,"ml-2",3,"onClick","outlined","disabled"],[1,"loading-container"],[1,"summary-cards"],[1,"p-datatable-sm",3,"value","loading","paginator","rows","rowsPerPageOptions","globalFilterFields","tableStyle","rowHover"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visibleChange","domain","visible"],[3,"visibleChange","domainUpdated","domain","visible"],["height","150px","width","100%"],[1,"mt-4"],["height","400px","width","100%"],[1,"stat-card"],[1,"stat-icon","total"],[1,"fa","fa-hashtag"],[1,"stat-content"],[1,"stat-label"],[1,"stat-value"],[1,"stat-subtitle"],[1,"stat-icon","success"],[1,"fa","fa-check-circle"],[1,"stat-icon","warning"],[1,"fa","fa-exclamation-triangle"],[1,"stat-breakdown"],[1,"danger"],[1,"warning"],[1,"stat-icon","value"],[1,"fa","fa-dollar-sign"],[1,"filter-toolbar"],[1,"search-wrapper"],[1,"fa","fa-search","search-icon"],["pInputText","","type","text","placeholder","Buscar dominio...",1,"glass-input","with-icon",3,"input"],["pSortableColumn","domainName",2,"min-width","200px"],["field","domainName"],["pSortableColumn","expiresAt",2,"width","180px"],["field","expiresAt"],[2,"width","120px","text-align","center"],[2,"width","100px","text-align","center"],[1,"font-bold","text-lg","text-truncate"],[1,"text-sm","text-muted","text-truncate"],[1,"d-flex","flex-column"],[1,"font-medium"],[1,"text-muted","block","mt-1"],[2,"text-align","center"],[3,"value","severity","icon"],[1,"fa",3,"ngClass"],[1,"flex","justify-content-center","gap-2"],["icon","fa fa-edit","severity","secondary","pTooltip","Editar",3,"onClick","rounded","text"],["icon","fa fa-external-link","severity","info","pTooltip","Ver Detalles",3,"onClick","rounded","text"],["colspan","6",2,"text-align","center","padding","3rem"],[1,"empty-state"]],template:function(e,o){if(e&1){let s=P();i(0,"div"),d(1,"p-toast"),i(2,"p-toolbar")(3,"div",1)(4,"h2",2),d(5,"i",3),r(6),n()(),i(7,"div",4)(8,"p-button",5),p("onClick",function(){return u(s),f(o.loadData())}),n(),i(9,"p-button",6),p("onClick",function(){return u(s),f(o.exportToCSV())}),n()()(),b(10,_t,4,0,"div",7),b(11,Ct,49,8,"div",8),i(12,"p-card")(13,"p-table",9,0),w(15,bt,4,0,"ng-template",10)(16,ht,15,0,"ng-template",11)(17,xt,22,13,"ng-template",12)(18,Pt,6,0,"ng-template",13),n()(),i(19,"app-domain-details-dialog",14),p("visibleChange",function(W){return u(s),f(o.onDialogVisibilityChange(W))}),n(),i(20,"app-domain-edit-dialog",15),p("visibleChange",function(W){return u(s),f(o.onEditDialogVisibilityChange(W))})("domainUpdated",function(){return u(s),f(o.onDomainUpdated())}),n()()}if(e&2){let s;m("@fadeIn",void 0),l(6),y(" Dominios - ",o.workspaceName()," "),l(2),m("outlined",!0)("loading",o.isLoading()),l(),m("outlined",!0)("disabled",o.domains().length===0),l(),h(o.isLoading()&&!o.stats()?10:-1),l(),h((s=o.stats())?11:-1,s),l(2),m("value",o.domains())("loading",o.isLoading())("paginator",!0)("rows",10)("rowsPerPageOptions",x(20,ut))("globalFilterFields",x(21,ft))("tableStyle",x(22,vt))("rowHover",!0),l(6),m("domain",o.selectedDomain())("visible",o.showDetailsDialog()),l(),m("domain",o.selectedDomain())("visible",o.showEditDialog())}},dependencies:[se,ae,xe,we,Me,O,ke,Ee,k,E,Ne,Te,Le,Ae,Re,ze,$,L,z,R,Oe,Se,ge,pe,j,G,V],styles:[".loading-container[_ngcontent-%COMP%]{margin:2rem 0}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin:1.5rem 0}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.25rem}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.total[_ngcontent-%COMP%]{background:#3b82f626;color:#3b82f6;border:1px solid rgba(59,130,246,.2)}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.success[_ngcontent-%COMP%]{background:#10b98126;color:#10b981;border:1px solid rgba(16,185,129,.2)}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.warning[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b;border:1px solid rgba(245,158,11,.2)}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.value[_ngcontent-%COMP%]{background:#8b5cf626;color:#8b5cf6;border:1px solid rgba(139,92,246,.2)}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{flex:1;min-width:0}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-color-secondary);margin-bottom:.15rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--text-color);line-height:1.2}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-color-secondary);margin-top:.15rem}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-breakdown[_ngcontent-%COMP%]{display:flex;gap:.5rem;font-size:.75rem}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-breakdown[_ngcontent-%COMP%]   .danger[_ngcontent-%COMP%]{color:var(--red-600);font-weight:600}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-breakdown[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:var(--yellow-600);font-weight:600}.filter-toolbar[_ngcontent-%COMP%]{padding:.5rem 0}.filter-toolbar[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.filter-toolbar[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;color:var(--primary-color);pointer-events:none;z-index:1}.filter-toolbar[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .glass-input[_ngcontent-%COMP%]{padding-left:2.5rem;border-radius:12px;border:1px solid rgba(0,0,0,.08);background:#fff9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);transition:all .2s;min-width:300px}.filter-toolbar[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .glass-input[_ngcontent-%COMP%]:focus{background:#fff;border-color:var(--primary-color);box-shadow:0 0 0 1px var(--primary-color-alpha, rgba(var(--primary-rgb), .2))}.filter-toolbar[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .glass-input.p-inputtext[_ngcontent-%COMP%]{padding-left:2.5rem}.text-muted[_ngcontent-%COMP%]{color:var(--text-color-secondary)}.text-green-500[_ngcontent-%COMP%]{color:var(--green-500)}.text-red-400[_ngcontent-%COMP%]{color:var(--red-400)}.text-orange-400[_ngcontent-%COMP%]{color:var(--orange-400)}.text-lg[_ngcontent-%COMP%]{font-size:1.1rem}.empty-state[_ngcontent-%COMP%]{padding:3rem;text-align:center}.empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-color-secondary);margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-size:1rem}"],data:{animation:[De,ye]},changeDetection:0})};export{X as default};
