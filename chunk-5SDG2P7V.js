import{Fa as n,Ga as a,Ha as u,Xa as o}from"./chunk-GG2P7VG4.js";import{O as s,ia as e}from"./chunk-ZVXIGZDY.js";var l=class i{auth=o.getAuth();currentUser=e(null);isLoading=e(!0);isAuthenticated=e(!1);authInitialized;authInitializedResolver;constructor(){this.authInitialized=new Promise(t=>{this.authInitializedResolver=t}),this.initAuthListener()}initAuthListener(){a(this.auth,t=>{this.currentUser.set(t),this.isAuthenticated.set(!!t),this.isLoading.set(!1),this.authInitializedResolver&&(this.authInitializedResolver(),this.authInitializedResolver=void 0)})}async signIn(t,r){try{return this.isLoading.set(!0),await n(this.auth,t,r)}finally{this.isLoading.set(!1)}}async signOut(){try{this.isLoading.set(!0),await u(this.auth),this.currentUser.set(null),this.isAuthenticated.set(!1)}finally{this.isLoading.set(!1)}}getCurrentUser(){return this.auth.currentUser}getCurrentUserUid(){return this.auth.currentUser?.uid??null}getCurrentUserEmail(){return this.auth.currentUser?.email??null}isUserAuthenticated(){return this.isAuthenticated()}getUserDisplayName(){let t=this.getCurrentUser();return t?.displayName||t?.email||"Usuario"}async waitForAuthInit(){return this.authInitialized}static \u0275fac=function(r){return new(r||i)};static \u0275prov=s({token:i,factory:i.\u0275fac,providedIn:"root"})};export{l as a};
