import{a as V}from"./chunk-47G4JF4V.js";import{a as ye,b as he,c as Pe,d as we,e as Se,f as Oe}from"./chunk-U4RXTWQI.js";import{a as me,b as ge}from"./chunk-CTPZG76Y.js";import{b as de,c as ue}from"./chunk-FYGEUYEJ.js";import{a as be}from"./chunk-XXMBZZ37.js";import{a as X}from"./chunk-NHWKIFHZ.js";import{e as fe,f as _e,g as Ce,h as ve,i as xe,j as Me}from"./chunk-GCQ2WIT6.js";import"./chunk-PPZFH2ZV.js";import{a as B,b as L}from"./chunk-2MAXEO6Q.js";import{b as te,c as ne,d as ie,e as oe,h as se,i as ce}from"./chunk-6BTVTWSQ.js";import{c as Y,f as Z,i as $,q as ee,v as re,w as ae}from"./chunk-Z4BNMZT3.js";import"./chunk-JUILAC2W.js";import{a as le,b as pe}from"./chunk-SPDGIFFF.js";import"./chunk-JNP63KUK.js";import{Ia as j,Ma as F,gb as N,hb as z,i as R,j as K,x as Q}from"./chunk-WQRABBEY.js";import{$b as J,Ab as p,Ac as D,Cc as A,Dc as M,Hb as T,Mb as m,Ob as u,Pa as s,U as S,Z as y,_ as h,bb as P,bc as a,cc as b,dc as f,gc as E,hb as O,hc as k,ic as I,ja as g,jc as G,kc as w,rb as C,sb as v,sc as _,tc as U,uc as x,xb as d,yb as t,zb as i}from"./chunk-XTNRL3Y3.js";var Ae=()=>[10,20,50];function Re(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Estado"),i(),t(3,"th",11),a(4," Producto "),p(5,"p-sortIcon",12),i(),t(6,"th",13),a(7," Vence "),p(8,"p-sortIcon",14),i(),t(9,"th"),a(10,"Pr\xF3xima Facturaci\xF3n"),i(),t(11,"th"),a(12,"Auto-Renew"),i(),t(13,"th"),a(14,"Status"),i(),t(15,"th"),a(16,"Acciones"),i()())}function Fe(o,n){if(o&1&&(t(0,"span",21),a(1),_(2,"date"),i()),o&2){let e=u().$implicit;s(),f(" ",x(2,1,e.nextBillingAt.toDate(),"dd/MM/yyyy")," ")}}function Ne(o,n){o&1&&(t(0,"span",22),a(1,"N/A"),i())}function ze(o,n){if(o&1){let e=T();t(0,"tr",15),m("click",function(){let l=y(e).$implicit,c=u();return h(c.onRowClick(l))}),t(1,"td",16),p(2,"app-expiration-semaphore",17),i(),t(3,"td",18)(4,"strong"),a(5),i(),t(6,"div",19),a(7),i()(),t(8,"td")(9,"span",20),a(10),_(11,"date"),i()(),t(12,"td"),C(13,Fe,3,4,"span",21)(14,Ne,2,0,"span",22),i(),t(15,"td",23)(16,"p-toggleButton",24),I("ngModelChange",function(l){let c=y(e).$implicit;return k(c.autoRenew,l)||(c.autoRenew=l),h(l)}),i()(),t(17,"td"),p(18,"p-tag",25),i(),t(19,"td",26)(20,"p-button",27),m("onClick",function(l){let c=y(e).$implicit;return u().onRowClick(c),h(l.stopPropagation())}),i()()()}if(o&2){let e=n.$implicit,r=u();s(2),d("expiresAt",e.expiresAt),s(3),b(e.productName),s(2),b(e.subscriptionId),s(3),f(" ",x(11,11,e.expiresAt.toDate(),"dd/MM/yyyy HH:mm")," "),s(3),v(e.nextBillingAt?13:14),s(3),E("ngModel",e.autoRenew),d("disabled",!0),s(2),d("value",e.status)("severity",r.getStatusSeverity(e.status)),s(2),d("rounded",!0)("text",!0)}}function Be(o,n){o&1&&a(0," Intenta cambiar los filtros de b\xFAsqueda ")}function Le(o,n){o&1&&a(0," No hay suscripciones sincronizadas para este workspace ")}function Ve(o,n){if(o&1&&(t(0,"tr")(1,"td",28)(2,"div",29),p(3,"i",30),t(4,"p",31),a(5,"No se encontraron suscripciones"),i(),t(6,"p",32),C(7,Be,1,0)(8,Le,1,0),i()()()()),o&2){let e=u();s(7),v(e.searchText()||e.selectedAutoRenewFilter()!==null?7:8)}}var H=class o{subscriptions=M.required();isLoading=M(!1);totalRecords=M(0);subscriptionClicked=A();searchText=g("");selectedAutoRenewFilter=g(null);rowsPerPage=g(10);autoRenewFilterOptions=[{label:"Todas",value:null},{label:"Solo Auto-Renew",value:!0},{label:"Sin Auto-Renew",value:!1}];filteredSubscriptions=D(()=>{let n=[...this.subscriptions()],e=this.searchText().toLowerCase();e&&(n=n.filter(l=>l.productName?.toLowerCase().includes(e)));let r=this.selectedAutoRenewFilter();return r!==null&&(n=n.filter(l=>l.autoRenew===r)),n});onRowClick(n){this.subscriptionClicked.emit(n)}onAutoRenewFilterChange(n){this.selectedAutoRenewFilter.set(n)}getStatusSeverity(n){let e=n.toLowerCase();return e.includes("active")||e.includes("activ")?"success":e.includes("pending")||e.includes("pendiente")?"warn":e.includes("suspended")||e.includes("suspendid")?"danger":e.includes("cancelled")||e.includes("cancelad")?"secondary":"info"}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-subscriptions-table"]],inputs:{subscriptions:[1,"subscriptions"],isLoading:[1,"isLoading"],totalRecords:[1,"totalRecords"]},outputs:{subscriptionClicked:"subscriptionClicked"},decls:11,vars:11,consts:[[1,"subscriptions-table-container"],[1,"table-header"],[1,"search-container"],["iconPosition","left"],[1,"pi","pi-search"],["type","text","pInputText","","placeholder","Buscar por producto...",1,"search-input",3,"ngModelChange","ngModel"],["optionLabel","label","optionValue","value","placeholder","Filtrar por renovaci\xF3n",1,"autorenew-filter",3,"ngModelChange","options","ngModel"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} suscripciones","responsiveLayout","scroll",1,"subscriptions-table",3,"value","loading","paginator","rows","rowsPerPageOptions","totalRecords","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","productName"],["field","productName"],["pSortableColumn","expiresAt"],["field","expiresAt"],[1,"subscription-row",3,"click"],[1,"semaphore-cell"],[3,"expiresAt"],[1,"product-name"],[1,"subscription-id"],[1,"expiration-date"],[1,"billing-date"],[1,"no-billing"],[1,"autorenew-cell"],["onLabel","S\xED","offLabel","No","onIcon","pi pi-check","offIcon","pi pi-times",1,"autorenew-toggle",3,"ngModelChange","ngModel","disabled"],[3,"value","severity"],[1,"actions-cell"],["icon","pi pi-eye","severity","info","size","small","pTooltip","Ver detalles","tooltipPosition","left",3,"onClick","rounded","text"],["colspan","7",1,"empty-message"],[1,"empty-state"],[1,"pi","pi-inbox","empty-icon"],[1,"empty-text"],[1,"empty-hint"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-iconfield",3),p(4,"p-inputicon",4),t(5,"input",5),I("ngModelChange",function(c){return k(r.searchText,c)||(r.searchText=c),c}),i()()(),t(6,"p-select",6),I("ngModelChange",function(c){return k(r.selectedAutoRenewFilter,c)||(r.selectedAutoRenewFilter=c),c}),m("ngModelChange",function(c){return r.onAutoRenewFilterChange(c)}),i()(),t(7,"p-table",7),O(8,Re,17,0,"ng-template",8)(9,ze,21,14,"ng-template",9)(10,Ve,9,1,"ng-template",10),i()()),e&2&&(s(5),E("ngModel",r.searchText),s(),d("options",r.autoRenewFilterOptions),E("ngModel",r.selectedAutoRenewFilter),s(),d("value",r.filteredSubscriptions())("loading",r.isLoading())("paginator",!0)("rows",r.rowsPerPage())("rowsPerPageOptions",w(10,Ae))("totalRecords",r.filteredSubscriptions().length)("showCurrentPageReport",!0))},dependencies:[ee,Y,Z,$,Me,Ce,F,ve,xe,ae,re,z,N,ce,se,L,B,ne,te,oe,ie,_e,fe,V,R],styles:[".subscriptions-table-container[_ngcontent-%COMP%]{width:100%}.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap}.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{flex:1;min-width:250px}.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%}.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .autorenew-filter[_ngcontent-%COMP%]{min-width:220px}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .subscription-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s ease}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .subscription-row[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover)}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .semaphore-cell[_ngcontent-%COMP%]{text-align:center;width:80px}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:var(--text-color);font-size:.95rem}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]   .subscription-id[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-color-secondary);margin-top:.25rem}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .expiration-date[_ngcontent-%COMP%], .subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .billing-date[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-color)}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .no-billing[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-color-secondary);font-style:italic}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .autorenew-cell[_ngcontent-%COMP%]     .autorenew-toggle{pointer-events:none;opacity:.8}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .autorenew-cell[_ngcontent-%COMP%]     .autorenew-toggle.p-highlight{background-color:var(--gray-600)!important;border-color:var(--gray-600)!important}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{text-align:center;width:100px}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-color-secondary);opacity:.5}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;color:var(--text-color);margin:0}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-color-secondary);margin:0}@media(max-width:768px){.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%], .subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .autorenew-filter[_ngcontent-%COMP%]{width:100%;min-width:auto}}"],changeDetection:0})};var He=()=>({width:"90vw",maxWidth:"800px"}),We=()=>({"960px":"95vw","640px":"100vw"}),je=()=>["0"];function qe(o,n){if(o&1&&(t(0,"div",16)(1,"div",17)(2,"div",18),p(3,"app-expiration-semaphore",19),t(4,"h2"),a(5),i()()()()),o&2){let e=u(2);s(3),d("expiresAt",e.subscription().expiresAt),s(2),b(e.subscription().productName)}}function Je(o,n){if(o&1&&(t(0,"div",4)(1,"label",5),a(2,"Pr\xF3xima Facturaci\xF3n"),i(),t(3,"div",6),a(4),_(5,"date"),i()()),o&2){let e=u(2);s(4),f(" ",x(5,1,e.subscription().nextBillingAt.toDate(),"dd/MM/yyyy HH:mm")," ")}}function Ge(o,n){if(o&1&&(t(0,"div",4)(1,"label",5),a(2,"\xDAltima Sincronizaci\xF3n"),i(),t(3,"div",20),p(4,"i",21),a(5),_(6,"date"),i()()),o&2){let e=u(2);s(5),f(" ",x(6,1,e.subscription().syncedAt.toDate(),"dd/MM/yyyy HH:mm")," ")}}function Ue(o,n){if(o&1){let e=T();t(0,"p-button",22),m("onClick",function(){y(e);let l=u(2);return h(l.onClose())}),i()}}function Ke(o,n){if(o&1&&(O(0,qe,6,2,"ng-template",1),t(1,"div",2)(2,"div",3)(3,"div",4)(4,"label",5),a(5,"ID de Suscripci\xF3n"),i(),t(6,"div",6)(7,"code"),a(8),i()()(),t(9,"div",4)(10,"label",5),a(11,"Fecha de Vencimiento"),i(),t(12,"div",6)(13,"strong"),a(14),_(15,"date"),i()()(),C(16,Je,6,4,"div",4),t(17,"div",4)(18,"label",5),a(19,"Estado"),i(),t(20,"div",6),p(21,"p-tag",7),i()(),t(22,"div",4)(23,"label",5),a(24,"Renovaci\xF3n Autom\xE1tica"),i(),t(25,"div",6),p(26,"p-tag",8),i()(),C(27,Ge,7,4,"div",4),i(),p(28,"p-divider"),t(29,"div",9)(30,"p-accordion",10)(31,"p-accordionpanel",11)(32,"p-accordionheader")(33,"div",12),p(34,"i",13),t(35,"span"),a(36,"Datos Raw (JSON)"),i()()(),t(37,"p-accordioncontent")(38,"pre",14),a(39),_(40,"json"),i()()()()()(),O(41,Ue,1,0,"ng-template",15)),o&2){let e=u();s(8),b(e.subscription().subscriptionId),s(6),b(x(15,11,e.subscription().expiresAt.toDate(),"dd/MM/yyyy HH:mm")),s(2),v(e.subscription().nextBillingAt?16:-1),s(5),d("value",e.subscription().status)("severity",e.getStatusSeverity(e.subscription().status)),s(5),d("value",e.subscription().autoRenew?"Activada":"Desactivada")("severity",e.getTagSeverity(e.subscription().autoRenew))("icon",e.subscription().autoRenew?"pi pi-check":"pi pi-times"),s(),v(e.subscription().syncedAt?27:-1),s(3),d("value",w(16,je)),s(9),b(U(40,14,e.subscription()))}}var W=class o{subscription=M.required();visible=M.required();visibleChange=A();onClose(){this.visibleChange.emit(!1)}getStatusSeverity(n){let e=n.toLowerCase();return e.includes("active")||e.includes("activ")?"success":e.includes("pending")||e.includes("pendiente")?"warn":e.includes("suspended")||e.includes("suspendid")?"danger":e.includes("cancelled")||e.includes("cancelad")?"secondary":"info"}getTagSeverity(n){return n?"success":"danger"}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-subscription-details-dialog"]],inputs:{subscription:[1,"subscription"],visible:[1,"visible"]},outputs:{visibleChange:"visibleChange"},decls:2,vars:10,consts:[[3,"onHide","visible","modal","draggable","resizable","breakpoints"],["pTemplate","header"],[1,"subscription-details"],[1,"details-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[3,"value","severity"],[3,"value","severity","icon"],[1,"raw-data-section"],[3,"value"],["value","0"],[1,"accordion-header"],[1,"pi","pi-code"],[1,"raw-data-content"],["pTemplate","footer"],[1,"dialog-header"],[1,"subscription-header"],[1,"subscription-title"],[3,"expiresAt"],[1,"detail-value","synced-at"],[1,"pi","pi-sync"],["label","Cerrar","icon","pi pi-times","severity","secondary",3,"onClick"]],template:function(e,r){e&1&&(t(0,"p-dialog",0),m("onHide",function(){return r.onClose()}),C(1,Ke,42,17),i()),e&2&&(J(w(8,He)),d("visible",r.visible())("modal",!0)("draggable",!1)("resizable",!1)("breakpoints",w(9,We)),s(),v(r.subscription()?1:-1))},dependencies:[ge,me,F,z,N,L,B,he,ye,Oe,Pe,we,Se,V,R,K],styles:[".p-dialog .dialog-header{width:100%}  .p-dialog .dialog-header .subscription-header{width:100%}  .p-dialog .dialog-header .subscription-header .subscription-title{display:flex;align-items:center;gap:1rem}  .p-dialog .dialog-header .subscription-header .subscription-title h2{margin:0;font-size:1.5rem;color:var(--text-color)}.subscription-details[_ngcontent-%COMP%]{padding:.5rem 0}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-bottom:1.5rem}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase;letter-spacing:.5px}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-color)}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:var(--surface-100);padding:.25rem .5rem;border-radius:4px;font-size:.9rem;color:var(--primary-color)}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value.synced-at[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.9rem;color:var(--text-color-secondary)}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value.synced-at[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]{margin-top:1rem}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-weight:600}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e1e1e,#2d2d2d);color:#e0e0e0;padding:1.5rem;border-radius:8px;overflow-x:auto;font-size:.85rem;line-height:1.6;max-height:400px;margin:0;border:1px solid var(--surface-border);box-shadow:inset 0 2px 8px #0000004d}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}@media(max-width:640px){.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}  .p-dialog .dialog-header .subscription-header .subscription-title{flex-direction:column;align-items:flex-start;gap:.75rem}  .p-dialog .dialog-header .subscription-header .subscription-title h2{font-size:1.25rem}}"],changeDetection:0})};var q=class o{subscriptionService=S(be);workspaceContext=S(X);route=S(Q);messageService=S(j);subscriptions=g([]);isLoading=this.subscriptionService.isLoading;error=this.subscriptionService.error;selectedSubscription=g(null);showDetailsDialog=g(!1);workspaceName=D(()=>this.workspaceContext.getCurrentWorkspace()?.name||"Workspace");totalSubscriptions=D(()=>this.subscriptions().length);ngOnInit(){this.loadSubscriptions()}async loadSubscriptions(){try{let n=this.route.snapshot.paramMap.get("workspaceId");if(!n)throw new Error("No se encontr\xF3 el ID del workspace");let e=await this.subscriptionService.getAllSubscriptions(n);this.subscriptions.set(e),e.length===0&&this.messageService.add({severity:"info",summary:"Sin suscripciones",detail:"No se encontraron suscripciones para este workspace. Aseg\xFArate de haber ejecutado la sincronizaci\xF3n.",life:5e3})}catch(n){console.error("[SubscriptionsPage] Error loading subscriptions:",n);let e=n instanceof Error?n.message:"Error al cargar suscripciones";n instanceof Error&&n.message.includes("index")&&(e="El \xEDndice de Firestore est\xE1 construy\xE9ndose. Espera unos minutos y recarga la p\xE1gina."),this.messageService.add({severity:"error",summary:"Error",detail:e})}}onSubscriptionClicked(n){this.selectedSubscription.set(n),this.showDetailsDialog.set(!0)}onDialogVisibilityChange(n){this.showDetailsDialog.set(n),n||this.selectedSubscription.set(null)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=P({type:o,selectors:[["app-subscriptions"]],features:[G([j])],decls:12,vars:6,consts:[[1,"fade-in"],[1,"mb-4"],[1,"header-content"],[1,"app-page-title","mb-2"],[1,"pi","pi-shopping-cart","text-primary","mr-2"],[1,"text-secondary","m-0"],[3,"subscriptionClicked","subscriptions","isLoading","totalRecords"],[3,"visibleChange","subscription","visible"]],template:function(e,r){e&1&&(t(0,"div",0),p(1,"p-toast"),t(2,"div",1)(3,"div",2)(4,"h1",3),p(5,"i",4),a(6),i(),t(7,"p",5),a(8," Gestiona y monitorea las suscripciones y servicios de este workspace "),i()()(),t(9,"p-card")(10,"app-subscriptions-table",6),m("subscriptionClicked",function(c){return r.onSubscriptionClicked(c)}),i()(),t(11,"app-subscription-details-dialog",7),m("visibleChange",function(c){return r.onDialogVisibilityChange(c)}),i()()),e&2&&(s(6),f(" Suscripciones - ",r.workspaceName()," "),s(4),d("subscriptions",r.subscriptions())("isLoading",r.isLoading())("totalRecords",r.totalSubscriptions()),s(),d("subscription",r.selectedSubscription())("visible",r.showDetailsDialog()))},dependencies:[pe,le,ue,de,H,W],styles:['[_ngcontent-%COMP%]:root{--color-brand-900: #111827;--color-brand-800: #1f2937;--color-brand-700: #374151;--color-brand-600: #4b5563;--color-brand-500: #6b7280;--color-brand-400: #9ca3af;--color-brand-300: #d1d5db;--color-brand-200: #e5e7eb;--color-brand-100: #f3f4f6;--color-brand-50: #f9fafb;--color-white: #ffffff;--gray-900: var(--color-brand-900);--gray-800: var(--color-brand-800);--gray-700: var(--color-brand-700);--gray-600: var(--color-brand-600);--gray-500: var(--color-brand-500);--gray-400: var(--color-brand-400);--gray-300: var(--color-brand-300);--gray-200: var(--color-brand-200);--gray-100: var(--color-brand-100);--gray-50: var(--color-brand-50);--primary-color: var(--color-brand-800);--primary-color-text: var(--color-white);--primary-hover: var(--color-brand-700);--primary-500: var(--color-brand-800);--primary-rgb: 31, 41, 55;--primary-500-rgb: 31, 41, 55;--text-main: var(--primary-color);--text-secondary: var(--color-brand-700);--text-color: var(--text-main);--text-color-secondary: var(--text-secondary);--border-color: var(--color-brand-300);--surface-ground: var(--color-brand-50);--surface-card: var(--color-white);--surface-overlay: var(--color-white);--surface-0: #ffffff;--surface-50: var(--color-brand-50);--surface-100: var(--color-brand-100);--surface-200: var(--color-brand-200);--surface-300: var(--color-brand-300);--surface-400: var(--color-brand-400);--surface-500: var(--color-brand-500);--surface-600: var(--color-brand-600);--surface-700: var(--color-brand-700);--surface-800: var(--color-brand-800);--surface-900: var(--color-brand-900);--glass-bg: rgba(255, 255, 255, .6);--glass-border: rgba(255, 255, 255, .6);--glass-blur: 16px;--color-success-bg: #ecfdf5;--color-success-text: #065f46;--color-success-Main: #10b981;--green-50: #ecfdf5;--green-100: #d1fae5;--green-200: #a7f3d0;--green-300: #6ee7b7;--green-400: #34d399;--green-500: #10b981;--green-600: #059669;--green-700: #047857;--green-800: #065f46;--green-900: #064e3b;--color-warning-bg: #fffbeb;--color-warning-text: #92400e;--color-warning-main: #f59e0b;--orange-50: #fff7ed;--orange-100: #ffedd5;--orange-200: #fed7aa;--orange-300: #fdba74;--orange-400: #fb923c;--orange-500: #f97316;--orange-600: #ea580c;--orange-700: #c2410c;--yellow-500: #eab308;--color-danger-bg: #fef2f2;--color-danger-text: #991b1b;--color-danger-main: #ef4444;--red-50: #fef2f2;--red-100: #fee2e2;--red-200: #fecaca;--red-300: #fca5a5;--red-400: #f87171;--red-500: #ef4444;--red-600: #dc2626;--red-700: #b91c1c;--red-800: #991b1b;--red-900: #7f1d1d;--color-info-bg: #eff6ff;--color-info-text: #1e40af;--color-info-main: #3b82f6;--blue-50: #eff6ff;--blue-100: #dbeafe;--blue-200: #bfdbfe;--blue-300: #93c5fd;--blue-400: #60a5fa;--blue-500: #3b82f6;--blue-600: #2563eb;--blue-700: #1d4ed8;--blue-800: #1e40af;--blue-900: #1e3a8a;--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;--font-size-base: 16px;--font-weight-regular: 400;--font-weight-medium: 500;--font-weight-bold: 700;--border-radius-sm: 6px;--border-radius-md: 8px;--border-radius-lg: 12px;--border-radius-xl: 20px;--border-radius-xxl: 24px;--border-radius-round: 999px;--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06);--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);--shadow-card: 0 4px 20px rgba(0, 0, 0, .03);--shadow-card-hover: 0 12px 30px rgba(0, 0, 0, .06);--shadow-floating: 0 8px 32px rgba(0, 0, 0, .03), 0 2px 8px rgba(0, 0, 0, .02)}@media screen and (max-width:767px){.subscriptions-page[_ngcontent-%COMP%]{padding:0 1rem 1rem}}@media screen and (max-width:767px){.page-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-size:.9rem}}'],changeDetection:0})};export{q as default};
