import{a as J,b as Je,c as qe,d as Xe,e as Ye,f as Ke,g as Ze}from"./chunk-TSDP37RS.js";import{a as $,b as G}from"./chunk-EXPJVITU.js";import{b as Ve,c as Be}from"./chunk-DUNBGOMI.js";import{b as W}from"./chunk-NAN6DTRC.js";import"./chunk-BNR7GPDI.js";import{a as Ce}from"./chunk-F2WO2M6U.js";import{a as He,b as je,e as Ue,f as $e,g as Ge,h as We}from"./chunk-PX2VNWV3.js";import"./chunk-OOKHGSBK.js";import{a as j,b as U}from"./chunk-T2TEUMJK.js";import{a as Re,b as Le}from"./chunk-LOKH2QTJ.js";import"./chunk-5WKTPFE2.js";import"./chunk-OL6EOTCO.js";import"./chunk-HD6MQK7W.js";import{d as ve,e as be,f as Se,g as Te,h as ke,i as Ne,l as Ie,m as Fe}from"./chunk-SQZEKQLI.js";import{a as Ae,b as ze}from"./chunk-ICJIXMS7.js";import"./chunk-DTZPPQAO.js";import{Aa as S,Ab as V,Bb as De,Db as ye,Eb as Me,Fb as Pe,Gb as xe,Hb as we,Ib as Oe,Jb as Ee,Qb as B,Rb as H,f as A,g as ge,i as ue,k as fe,pb as T,qb as k,u as _e,wa as K,xb as he,yb as z}from"./chunk-B5FRUK7K.js";import{$b as v,Fb as E,Kb as p,Lb as g,Oa as r,T as h,Y as D,Yb as R,Z as y,_b as l,ab as M,ac as x,bc as ae,cc as re,dc as le,ec as de,fc as L,gb as O,gc as w,hc as me,ia as u,la as te,oc as P,pb as _,pc as se,qb as C,qc as N,rc as ce,sb as ne,tb as ie,ub as oe,uc as pe,vb as s,wb as n,wc as I,xb as i,yb as c,yc as b,zc as f}from"./chunk-PY5EWUYY.js";var at=()=>[10,20,50];function rt(o,e){o&1&&(n(0,"tr")(1,"th",11),l(2,"Estado"),i(),n(3,"th",12),l(4," Dominio "),c(5,"p-sortIcon",13),i(),n(6,"th",14),l(7," Vence "),c(8,"p-sortIcon",15),i(),n(9,"th",16),l(10,"Nameservers"),i(),n(11,"th",17),l(12,"Lock"),i(),n(13,"th",17),l(14,"Privacy"),i(),n(15,"th",18),l(16,"Acciones"),i()())}function lt(o,e){if(o&1){let t=E();n(0,"tr",19)(1,"td",20),c(2,"app-expiration-semaphore",21),i(),n(3,"td",22)(4,"strong"),l(5),i()(),n(6,"td")(7,"span",23),l(8),P(9,"date"),i()(),n(10,"td",24)(11,"span",25),l(12),i()(),n(13,"td",26),c(14,"p-tag",27),i(),n(15,"td",26),c(16,"p-tag",27),i(),n(17,"td",28)(18,"p-button",29),p("onClick",function(d){let m=D(t).$implicit,F=g();return y(F.onEditDomain(m,d))}),i(),n(19,"p-button",30),p("onClick",function(){let d=D(t).$implicit,m=g();return y(m.onDomainClick(d))}),i()()()}if(o&2){let t=e.$implicit,a=g();r(2),s("expiresAt",t.expiresAt),r(3),v(t.domainName),r(3),x(" ",N(9,13,t.expiresAt.toDate(),"dd/MM/yyyy HH:mm")," "),r(3),s("title",a.formatNameservers(t.nameservers)),r(),x(" ",a.formatNameservers(t.nameservers)," "),r(2),s("value",t.domainLock?"S\xED":"No")("severity",a.getPrivacyLockSeverity(t.domainLock||!1)),r(2),s("value",t.privacyProtection?"S\xED":"No")("severity",a.getPrivacyLockSeverity(t.privacyProtection||!1)),r(2),s("text",!0)("pTooltip","Editar"),r(),s("text",!0)("pTooltip","Ver detalles")}}function dt(o,e){o&1&&(n(0,"div",32),c(1,"i",34),n(2,"p"),l(3,"Cargando dominios..."),i()())}function mt(o,e){o&1&&(n(0,"p",36),l(1,"Intenta cambiar los filtros de b\xFAsqueda"),i())}function st(o,e){if(o&1&&(n(0,"div",33),c(1,"i",35),n(2,"p"),l(3,"No se encontraron dominios"),i(),_(4,mt,2,0,"p",36),i()),o&2){let t=g(2);r(4),C(t.searchText()||t.selectedDaysFilter()!==null?4:-1)}}function ct(o,e){if(o&1&&(n(0,"tr")(1,"td",31),_(2,dt,4,0,"div",32)(3,st,5,1,"div",33),i()()),o&2){let t=g();r(2),C(t.isLoading()?2:3)}}var q=class o{domains=f.required();isLoading=f(!1);totalRecords=f(0);domainClicked=b();domainEditClicked=b();pageChanged=b();searchText=u("");selectedDaysFilter=u(null);daysFilterOptions=[{label:"Todos",value:null},{label:"< 7 d\xEDas",value:7},{label:"< 15 d\xEDas",value:15},{label:"< 30 d\xEDas",value:30},{label:"< 60 d\xEDas",value:60},{label:"< 90 d\xEDas",value:90}];filteredDomains=I(()=>{let e=this.domains(),t=this.searchText().toLowerCase();t&&(e=e.filter(d=>d.domainName?.toLowerCase().includes(t)));let a=this.selectedDaysFilter();if(a!==null){let d=new Date;d.setDate(d.getDate()+a),e=e.filter(m=>{let F=this.toDate(m.expiresAt);return F&&F<=d})}return e});onSearch(e){let t=e.target.value;this.searchText.set(t)}onDaysFilterChange(e){this.selectedDaysFilter.set(e)}onDomainClick(e){this.domainClicked.emit(e)}getPrivacyLockSeverity(e){return e?"success":"secondary"}formatNameservers(e){return!e||e.length===0?"N/A":e.join(", ")}onEditDomain(e,t){t.stopPropagation(),this.domainEditClicked.emit(e)}toDate(e){return e?e instanceof Date?e:typeof e=="string"?new Date(e):typeof e=="object"&&"toDate"in e?e.toDate():typeof e=="object"&&"seconds"in e?new Date(e.seconds*1e3):null:null}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["app-domains-table"]],inputs:{domains:[1,"domains"],isLoading:[1,"isLoading"],totalRecords:[1,"totalRecords"]},outputs:{domainClicked:"domainClicked",domainEditClicked:"domainEditClicked",pageChanged:"pageChanged"},decls:13,vars:12,consts:[[1,"domains-table-container"],[1,"table-toolbar"],["iconPosition","left","styleClass","search-field"],["styleClass","pi pi-search"],["pInputText","","type","text","placeholder","Buscar dominio...",3,"input","value"],["optionLabel","label","optionValue","value","placeholder","Filtrar por d\xEDas","styleClass","days-filter",3,"ngModelChange","options","ngModel"],[1,"results-count"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} dominios","responsiveLayout","scroll","styleClass","domains-table",3,"value","loading","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","80px"],["pSortableColumn","domain"],["field","domain"],["pSortableColumn","expiresAt",2,"width","180px"],["field","expiresAt"],[2,"width","250px"],[1,"text-center",2,"width","100px"],[1,"text-center",2,"width","120px"],[1,"domain-row"],[1,"semaphore-cell"],[3,"expiresAt"],[1,"domain-name"],[1,"expiration-date"],[1,"nameservers-cell"],[1,"nameservers-text",3,"title"],[1,"text-center"],[3,"value","severity"],[1,"text-center","action-buttons"],["icon","pi pi-pencil","size","small","severity","secondary","tooltipPosition","top",3,"onClick","text","pTooltip"],["icon","pi pi-eye","size","small","tooltipPosition","top",3,"onClick","text","pTooltip"],["colspan","7",1,"empty-state"],[1,"loading-state"],[1,"no-data"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2rem"],[1,"pi","pi-inbox",2,"font-size","3rem","color","var(--text-color-secondary)"],[1,"hint"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1)(2,"p-iconfield",2),c(3,"p-inputicon",3),n(4,"input",4),p("input",function(m){return a.onSearch(m)}),i()(),n(5,"p-select",5),de("ngModelChange",function(m){return le(a.selectedDaysFilter,m)||(a.selectedDaysFilter=m),m}),p("ngModelChange",function(m){return a.onDaysFilterChange(m)}),i(),n(6,"div",6)(7,"span"),l(8),i()()(),n(9,"p-table",7),O(10,rt,17,0,"ng-template",8)(11,lt,20,16,"ng-template",9)(12,ct,4,1,"ng-template",10),i()()),t&2&&(r(4),s("value",a.searchText()),r(),s("options",a.daysFilterOptions),re("ngModel",a.selectedDaysFilter),r(3),ae("",a.filteredDomains().length," de ",a.totalRecords()," dominios"),r(),s("value",a.filteredDomains())("loading",a.isLoading())("paginator",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",w(11,at)))},dependencies:[Oe,V,ye,We,Ue,S,$e,Ge,H,B,k,T,Fe,Ie,U,j,Te,Se,Ne,ke,be,ve,J,A],styles:[".domains-table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.table-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;padding:1rem;background:#fff;border-radius:8px;box-shadow:0 1px 3px #00000014}.table-toolbar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:1;min-width:250px}.table-toolbar[_ngcontent-%COMP%]   .days-filter[_ngcontent-%COMP%]{min-width:180px}.table-toolbar[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]{margin-left:auto;font-size:.9rem;color:var(--text-color-secondary);font-weight:500}@media(max-width:768px){.table-toolbar[_ngcontent-%COMP%]   .results-count[_ngcontent-%COMP%]{margin-left:0;width:100%;text-align:center}}.domains-table[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 1px 3px #00000014}.domains-table[_ngcontent-%COMP%]     .p-datatable-header{background:#f9fafb;border-bottom:2px solid #e5e7eb}.domains-table[_ngcontent-%COMP%]     .p-datatable-thead>tr>th{background:#f9fafb;color:#374151;font-weight:600;border-bottom:2px solid #e5e7eb}.domains-table[_ngcontent-%COMP%]     .p-datatable-tbody>tr{transition:background-color .2s ease}.domains-table[_ngcontent-%COMP%]     .p-datatable-tbody>tr:hover{background-color:#f9fafb}.domains-table[_ngcontent-%COMP%]     .p-paginator .p-select{z-index:100}.domains-table[_ngcontent-%COMP%]     .p-paginator .p-select-overlay{z-index:100!important}.domain-row[_ngcontent-%COMP%]   .semaphore-cell[_ngcontent-%COMP%]{text-align:center}.domain-row[_ngcontent-%COMP%]   .domain-name[_ngcontent-%COMP%]{font-weight:600;color:var(--primary-color)}.domain-row[_ngcontent-%COMP%]   .expiration-date[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-color-secondary)}.domain-row[_ngcontent-%COMP%]   .nameservers-cell[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-color-secondary)}.domain-row[_ngcontent-%COMP%]   .nameservers-text[_ngcontent-%COMP%]{display:inline-block;max-width:240px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.loading-state[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-color-secondary)}.loading-state[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%], .no-data[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:.9rem;font-style:italic}@media(max-width:768px){.table-toolbar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%], .table-toolbar[_ngcontent-%COMP%]   .days-filter[_ngcontent-%COMP%]{width:100%;min-width:auto}}"],changeDetection:0})};var gt=()=>({width:"700px",maxWidth:"95vw"}),ut=()=>["0"];function ft(o,e){if(o&1&&(n(0,"div",6)(1,"label",7),l(2,"Fecha de Creaci\xF3n"),i(),n(3,"div",8),l(4),P(5,"date"),i()()),o&2){let t=g(2);r(4),x(" ",N(5,1,t.domain().createdAt.toDate(),"dd/MM/yyyy HH:mm")," ")}}function _t(o,e){if(o&1&&(n(0,"li",22),c(1,"i",23),n(2,"code"),l(3),i()()),o&2){let t=e.$implicit;r(3),v(t)}}function Ct(o,e){if(o&1&&(n(0,"ul",13),ie(1,_t,4,1,"li",22,ne),i()),o&2){let t=g(2);r(),oe(t.domain().nameservers)}}function vt(o,e){o&1&&(n(0,"p",14),l(1,"No hay nameservers configurados"),i())}function bt(o,e){if(o&1){let t=E();n(0,"p-button",24),p("onClick",function(){D(t);let d=g(2);return y(d.onClose())}),i()}}function ht(o,e){if(o&1&&(n(0,"div",1)(1,"div",2)(2,"div",3),c(3,"app-expiration-semaphore",4),n(4,"h2"),l(5),i()()(),c(6,"p-divider"),n(7,"div",5)(8,"div",6)(9,"label",7),l(10,"Fecha de Vencimiento"),i(),n(11,"div",8)(12,"strong"),l(13),P(14,"date"),i()()(),_(15,ft,6,4,"div",6),n(16,"div",6)(17,"label",7),l(18,"Domain Lock"),i(),n(19,"div",8),c(20,"p-tag",9),i()(),n(21,"div",6)(22,"label",7),l(23,"Privacidad WHOIS"),i(),n(24,"div",8),c(25,"p-tag",9),i()()(),c(26,"p-divider"),n(27,"div",10)(28,"h3",11),c(29,"i",12),l(30," Nameservers "),i(),_(31,Ct,3,0,"ul",13)(32,vt,2,0,"p",14),i(),c(33,"p-divider"),n(34,"div",15)(35,"p-accordion",16)(36,"p-accordionpanel",17)(37,"p-accordionheader")(38,"div",18),c(39,"i",19),n(40,"span"),l(41,"Datos Raw (JSON)"),i()()(),n(42,"p-accordioncontent")(43,"pre",20),l(44),P(45,"json"),i()()()()()(),O(46,bt,1,0,"ng-template",21)),o&2){let t=g();r(3),s("expiresAt",t.domain().expiresAt),r(2),v(t.domain().domainName),r(8),v(N(14,11,t.domain().expiresAt.toDate(),"dd/MM/yyyy HH:mm")),r(2),C(t.domain().createdAt?15:-1),r(5),s("value",t.domain().domainLock?"Activado":"Desactivado")("severity",t.getTagSeverity(t.domain().domainLock||!1)),r(5),s("value",t.domain().privacyProtection?"Activada":"Desactivada")("severity",t.getTagSeverity(t.domain().privacyProtection||!1)),r(6),C(t.domain().nameservers&&t.domain().nameservers.length>0?31:32),r(4),s("value",w(16,ut)),r(9),v(se(45,14,t.domain()))}}var X=class o{domain=f.required();visible=f.required();visibleChange=b();showRawData=u(!1);onClose(){this.visibleChange.emit(!1)}toggleRawData(){this.showRawData.update(e=>!e)}getTagSeverity(e){return e?"success":"secondary"}formatNameservers(e){return!e||e.length===0?"N/A":e.join(`
`)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["app-domain-details-dialog"]],inputs:{domain:[1,"domain"],visible:[1,"visible"]},outputs:{visibleChange:"visibleChange"},decls:2,vars:8,consts:[["styleClass","domain-details-dialog",3,"visibleChange","header","visible","modal","dismissableMask"],[1,"dialog-content"],[1,"domain-header"],[1,"domain-title"],[3,"expiresAt"],[1,"details-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[3,"value","severity"],[1,"nameservers-section"],[1,"section-title"],[1,"pi","pi-server"],[1,"nameservers-list"],[1,"no-data"],[1,"raw-data-section"],[3,"value"],["value","0"],[1,"accordion-header"],[1,"pi","pi-code"],[1,"raw-data-content"],["pTemplate","footer"],[1,"nameserver-item"],[1,"pi","pi-angle-right"],["label","Cerrar","icon","pi pi-times","severity","secondary",3,"onClick"]],template:function(t,a){t&1&&(n(0,"p-dialog",0),p("visibleChange",function(){return a.onClose()}),_(1,ht,47,17),i()),t&2&&(R(w(7,gt)),s("header","Detalles del Dominio")("visible",a.visible())("modal",!0)("dismissableMask",!0),r(),C(a.domain()?1:-1))},dependencies:[G,$,S,k,T,U,j,qe,Je,Ze,Xe,Ye,Ke,J,A,ge],styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.domain-header[_ngcontent-%COMP%]   .domain-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.domain-header[_ngcontent-%COMP%]   .domain-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--primary-color);font-weight:700}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}@media(max-width:576px){.details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase;letter-spacing:.5px}.detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-color)}.nameservers-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0 0 1rem;font-size:1.1rem;font-weight:600;color:var(--text-color)}.nameservers-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.nameservers-section[_ngcontent-%COMP%]   .nameservers-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.5rem}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:#f9fafb;border-radius:6px;border:1px solid #e5e7eb}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);font-size:.85rem}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem;color:#374151}.nameservers-section[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-style:italic;margin:0}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-header .accordion-header{display:flex;align-items:center;gap:.5rem;font-weight:600}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-header .accordion-header i{color:var(--primary-color)}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-content{padding:0}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0;padding:1.5rem;margin:0;border-radius:6px;font-family:Courier New,monospace;font-size:.85rem;line-height:1.6;overflow-x:auto;max-height:400px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0f172a;border-radius:4px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#475569;border-radius:4px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64748b}  .domain-details-dialog .p-dialog-header{background:linear-gradient(135deg,#475569,#334155);color:#fff;border-top-left-radius:8px;border-top-right-radius:8px}  .domain-details-dialog .p-dialog-header .p-dialog-title{font-weight:700}  .domain-details-dialog .p-dialog-header .p-dialog-header-icon{color:#fff}  .domain-details-dialog .p-dialog-header .p-dialog-header-icon:hover{background-color:#ffffff1a}  .domain-details-dialog .p-divider{margin:1rem 0}"],changeDetection:0})};function Dt(o){let e=o,t=Math.floor(Math.abs(o)),a=o.toString().replace(/^[^.]*\.?/,"").length,d=parseInt(o.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1?1:d===0&&t!==0&&t%1e6===0&&a===0||!(d>=0&&d<=5)?4:5}var tt=["es",[["a.\u202Fm.","p.\u202Fm."],void 0,["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[void 0,"EGP"],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",Dt];var yt=()=>({width:"600px"}),Mt=o=>[o,"COP","symbol","1.0-0","es"];function Pt(o,e){o&1&&(n(0,"small",5),l(1,"Ingresa un email v\xE1lido"),i())}function xt(o,e){if(o&1){let t=E();n(0,"p-button",13),p("onClick",function(){D(t);let d=g();return y(d.onClose())}),i(),n(1,"p-button",14),p("onClick",function(){D(t);let d=g();return y(d.onSave())}),i()}if(o&2){let t=g();s("disabled",t.isSaving()),r(),s("loading",t.isSaving())("disabled",t.editForm.invalid)}}fe(tt);var Y=class o{fb=h(we);domainService=h(W);domain=f.required();visible=f.required();visibleChange=b();domainUpdated=b();isSaving=u(!1);totalPrice=u(0);editForm=this.fb.group({contactEmail:["",[z.email]],hostingRenewalPrice:[0,[z.min(0)]],domainRenewalPrice:[0,[z.min(0)]]});constructor(){te(()=>{let e=this.domain();e&&(this.editForm.patchValue({contactEmail:e.contactEmail||"",hostingRenewalPrice:e.hostingRenewalPrice||0,domainRenewalPrice:e.domainRenewalPrice||0}),this.updateTotalPrice())}),this.editForm.valueChanges.subscribe(()=>{this.updateTotalPrice()})}updateTotalPrice(){let e=this.editForm.value.hostingRenewalPrice||0,t=this.editForm.value.domainRenewalPrice||0;this.totalPrice.set(e+t)}async onSave(){let e=this.domain();if(!(!e||this.editForm.invalid)){this.isSaving.set(!0);try{let t={contactEmail:this.editForm.value.contactEmail||void 0,hostingRenewalPrice:this.editForm.value.hostingRenewalPrice||void 0,domainRenewalPrice:this.editForm.value.domainRenewalPrice||void 0};await this.domainService.updateDomain(e.id,t),this.domainUpdated.emit(),this.onClose()}catch(t){console.error("Error updating domain:",t)}finally{this.isSaving.set(!1)}}}onClose(){this.editForm.reset(),this.visibleChange.emit(!1)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["app-domain-edit-dialog"]],inputs:{domain:[1,"domain"],visible:[1,"visible"]},outputs:{visibleChange:"visibleChange",domainUpdated:"domainUpdated"},features:[L([{provide:pe,useValue:"es"}])],decls:22,vars:21,consts:[[3,"visibleChange","header","visible","modal","draggable","resizable"],[3,"ngSubmit","formGroup"],[1,"field"],["for","contactEmail"],["pInputText","","id","contactEmail","formControlName","contactEmail","type","email","placeholder","cliente@ejemplo.com",1,"w-full"],[1,"p-error"],["for","hostingPrice"],["inputId","hostingPrice","formControlName","hostingRenewalPrice","mode","currency","currency","COP","locale","es",1,"w-full",3,"min"],["for","domainPrice"],["inputId","domainPrice","formControlName","domainRenewalPrice","mode","currency","currency","COP","locale","es",1,"w-full",3,"min"],[1,"total-price"],[1,"price"],["pTemplate","footer"],["label","Cancelar","icon","pi pi-times","severity","secondary",3,"onClick","disabled"],["label","Guardar","icon","pi pi-check",3,"onClick","loading","disabled"]],template:function(t,a){if(t&1&&(n(0,"p-dialog",0),p("visibleChange",function(m){return a.visibleChange.emit(m)}),n(1,"form",1),p("ngSubmit",function(){return a.onSave()}),n(2,"div",2)(3,"label",3),l(4,"Email de Contacto"),i(),c(5,"input",4),_(6,Pt,2,0,"small",5),i(),n(7,"div",2)(8,"label",6),l(9,"Precio Renovaci\xF3n Hosting (COP)"),i(),c(10,"p-inputNumber",7),i(),n(11,"div",2)(12,"label",8),l(13,"Precio Renovaci\xF3n Dominio (COP)"),i(),c(14,"p-inputNumber",9),i(),n(15,"div",10)(16,"strong"),l(17,"Total Renovaci\xF3n:"),i(),n(18,"span",11),l(19),P(20,"currency"),i()()(),O(21,xt,2,3,"ng-template",12),i()),t&2){let d,m;R(w(18,yt)),s("header","Editar Dominio - "+(((d=a.domain())==null?null:d.domainName)||""))("visible",a.visible())("modal",!0)("draggable",!1)("resizable",!1),r(),s("formGroup",a.editForm),r(5),C((m=a.editForm.get("contactEmail"))!=null&&m.invalid&&((m=a.editForm.get("contactEmail"))!=null&&m.touched)?6:-1),r(4),s("min",0),r(4),s("min",0),r(5),v(ce(20,12,me(19,Mt,a.totalPrice())))}},dependencies:[Ee,Me,he,V,De,xe,Pe,G,$,S,k,T,H,B,je,He,ue],styles:[".field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:var(--text-color)}.field[_ngcontent-%COMP%]   small.p-error[_ngcontent-%COMP%]{display:block;margin-top:.25rem;color:var(--red-500)}.total-price[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--surface-100);border-radius:var(--border-radius);margin-top:1rem}.total-price[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-color)}.total-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:var(--primary-color)}"],changeDetection:0})};var ee=class o{domainService=h(W);workspaceContext=h(Ce);route=h(_e);messageService=h(K);domains=u([]);isLoading=this.domainService.isLoading;error=this.domainService.error;selectedDomain=u(null);showDetailsDialog=u(!1);showEditDialog=u(!1);workspaceName=I(()=>this.workspaceContext.getCurrentWorkspace()?.name||"Workspace");totalDomains=I(()=>this.domains().length);ngOnInit(){this.loadDomains()}async loadDomains(){try{let e=this.route.snapshot.paramMap.get("workspaceId");if(console.log("[DomainsPage] Loading domains for workspaceId:",e),!e)throw new Error("No se encontr\xF3 el ID del workspace");let t=await this.domainService.getAllDomains(e);console.log("[DomainsPage] Loaded",t.length,"domains"),this.domains.set(t),t.length===0&&this.messageService.add({severity:"info",summary:"Sin dominios",detail:"No se encontraron dominios para este workspace. Aseg\xFArate de haber ejecutado la sincronizaci\xF3n.",life:5e3})}catch(e){console.error("[DomainsPage] Error loading domains:",e);let t=e instanceof Error?e.message:"Error al cargar dominios";e instanceof Error&&e.message.includes("index")&&(t="El \xEDndice de Firestore est\xE1 construy\xE9ndose. Espera unos minutos y recarga la p\xE1gina."),this.messageService.add({severity:"error",summary:"Error",detail:t})}}onDomainClicked(e){this.selectedDomain.set(e),this.showDetailsDialog.set(!0)}onDialogVisibilityChange(e){this.showDetailsDialog.set(e),e||this.selectedDomain.set(null)}onEditDomain(e){this.selectedDomain.set(e),this.showEditDialog.set(!0)}onEditDialogVisibilityChange(e){this.showEditDialog.set(e),e||this.selectedDomain.set(null)}onDomainUpdated(){this.messageService.add({severity:"success",summary:"Dominio actualizado",detail:"Los cambios se guardaron correctamente"}),this.loadDomains()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["app-domains"]],features:[L([K])],decls:13,vars:9,consts:[["role","main","aria-labelledby","domains-heading",1,"domains-page"],["role","banner",1,"page-header"],[1,"header-content"],["id","domains-heading",1,"page-title"],["aria-hidden","true",1,"pi","pi-globe"],[1,"page-subtitle"],[3,"domainClicked","domainEditClicked","domains","isLoading","totalRecords"],[3,"visibleChange","domain","visible"],[3,"visibleChange","domainUpdated","domain","visible"]],template:function(t,a){t&1&&(n(0,"div",0),c(1,"p-toast"),n(2,"div",1)(3,"div",2)(4,"h1",3),c(5,"i",4),l(6),i(),n(7,"p",5),l(8,"Gestiona y monitorea los dominios de este workspace"),i()()(),n(9,"p-card")(10,"app-domains-table",6),p("domainClicked",function(m){return a.onDomainClicked(m)})("domainEditClicked",function(m){return a.onEditDomain(m)}),i()(),n(11,"app-domain-details-dialog",7),p("visibleChange",function(m){return a.onDialogVisibilityChange(m)}),i(),n(12,"app-domain-edit-dialog",8),p("visibleChange",function(m){return a.onEditDialogVisibilityChange(m)})("domainUpdated",function(){return a.onDomainUpdated()}),i()()),t&2&&(s("@fadeIn",void 0),r(6),x(" Dominios - ",a.workspaceName()," "),r(4),s("domains",a.domains())("isLoading",a.isLoading())("totalRecords",a.totalDomains()),r(),s("domain",a.selectedDomain())("visible",a.showDetailsDialog()),r(),s("domain",a.selectedDomain())("visible",a.showEditDialog()))},dependencies:[ze,Ae,Be,Ve,q,X,Y],styles:[".domains-page[_ngcontent-%COMP%]{min-height:100vh;background-color:#f9fafb;padding:2rem}.domains-page.ng-animating[_ngcontent-%COMP%]{overflow:hidden}@media(max-width:768px){.domains-page[_ngcontent-%COMP%]{padding:1rem}}.page-header[_ngcontent-%COMP%]{margin-bottom:2rem;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;margin:0 0 .5rem;font-size:1.75rem;font-weight:700;color:#1f2937}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#64748b}@media(max-width:768px){.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{margin:0;color:#6b7280;font-size:1rem}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}"],data:{animation:[Re,Le]},changeDetection:0})};export{ee as default};
