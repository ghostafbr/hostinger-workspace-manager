import{h}from"./chunk-QBMNRZZL.js";import{$a as d,Ma as T,p as m,r as y}from"./chunk-OPKLNVVY.js";import{A as f,P as s,U as g,n as u,r as p,s as c,v as l}from"./chunk-GUMEVBBA.js";var w=class t{http=g(y);BASE_URL=d.api.hostinger.baseUrl;REQUEST_TIMEOUT=d.api.hostinger.timeout;async getDnsRecords(e,r,a){try{let o=new m({Authorization:`Bearer ${e}`,Accept:"application/json"});return((await p(this.http.get(`${this.BASE_URL}/api/dns/v1/zones/${r}`,{headers:o}).pipe(c(this.REQUEST_TIMEOUT)))).data||[]).map(R=>{let n=R;return new h({id:n.id||crypto.randomUUID(),workspaceId:a,domainName:r,recordType:this.mapRecordType(n.type),name:n.name||"@",value:n.content||n.value||"",ttl:n.ttl||3600,priority:n.priority,syncedAt:T.now()})})}catch(o){throw console.error("Error fetching DNS records from Hostinger:",o),o}}mapRecordType(e){switch(e.toUpperCase()){case"A":return"A";case"AAAA":return"AAAA";case"CNAME":return"CNAME";case"MX":return"MX";case"TXT":return"TXT";case"NS":return"NS";case"SOA":return"SOA";case"SRV":return"SRV";case"PTR":return"PTR";default:return console.warn(`Unknown DNS record type: ${e}, defaulting to TXT`),"TXT"}}async getDnsZones(e){try{let r=new m({Authorization:`Bearer ${e}`,Accept:"application/json"});return((await p(this.http.get(`${this.BASE_URL}/domains/v1/portfolio`,{headers:r}).pipe(c(this.REQUEST_TIMEOUT)))).data||[]).map(o=>{let i=o;return i.domain||i.name||""})}catch(r){throw console.error("Error fetching DNS zones from Hostinger:",r),r}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var A=class t{preload(e,r){if(e.data&&e.data.preload){let a=e.data.preloadDelay||2e3;return f(a).pipe(l(()=>r()))}return u(null)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};export{A as a};
