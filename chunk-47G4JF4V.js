import{m as g}from"./chunk-WQRABBEY.js";import{Ac as o,Bb as s,Cb as c,Dc as f,Ib as d,Pa as r,ac as p,bb as a,bc as l,cc as u}from"./chunk-XTNRL3Y3.js";var x=class i{expiresAt=f.required();daysUntilExpiration=o(()=>{let e=this.toDate(this.expiresAt());if(!e)return null;let n=new Date,t=e.getTime()-n.getTime();return Math.ceil(t/(1e3*60*60*24))});statusClass=o(()=>{let e=this.daysUntilExpiration();return e===null?"ok":e<0?"expired":e<=7?"critical":e<=30?"warning":"ok"});daysText=o(()=>{let e=this.daysUntilExpiration();return e===null?"?":e<0?"\u26A0":e===0?"HOY":e===1?"1d":e<100?`${e}d`:"99+"});tooltip=o(()=>{let e=this.daysUntilExpiration();return e===null?"Fecha desconocida":e<0?`Venci\xF3 hace ${Math.abs(e)} d\xEDa(s)`:e===0?"\xA1Vence hoy!":e===1?"Vence ma\xF1ana":`Vence en ${e} d\xEDa(s)`});toDate(e){return e?e instanceof Date?e:typeof e=="string"?new Date(e):typeof e=="object"&&"toDate"in e?e.toDate():typeof e=="object"&&"seconds"in e?new Date(e.seconds*1e3):null:null}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=a({type:i,selectors:[["app-expiration-semaphore"]],inputs:{expiresAt:[1,"expiresAt"]},decls:4,vars:4,consts:[[1,"semaphore"],[1,"semaphore-circle",3,"title"],[1,"semaphore-text"]],template:function(n,t){n&1&&(s(0,"div",0)(1,"div",1)(2,"span",2),l(3),c()()()),n&2&&(p(t.statusClass()),r(),d("title",t.tooltip()),r(2),u(t.daysText()))},dependencies:[g],styles:[".semaphore[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center}.semaphore-circle[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.75rem;cursor:help;transition:transform .2s ease}.semaphore-circle[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.semaphore-text[_ngcontent-%COMP%]{color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.3)}.critical[_ngcontent-%COMP%]   .semaphore-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ef4444,#dc2626);box-shadow:0 2px 8px #ef444466}.warning[_ngcontent-%COMP%]   .semaphore-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);box-shadow:0 2px 8px #f59e0b66}.ok[_ngcontent-%COMP%]   .semaphore-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);box-shadow:0 2px 8px #10b98166}.expired[_ngcontent-%COMP%]   .semaphore-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,#7f1d1d,#991b1b);box-shadow:0 2px 8px #7f1d1d66;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}"],changeDetection:0})};export{x as a};
