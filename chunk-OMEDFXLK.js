import{a as Y,b as G}from"./chunk-RNTOZODI.js";import{a as ye,b as he}from"./chunk-IS5U3YIX.js";import{a as ge,b as X,d as ve}from"./chunk-RIETH7EJ.js";import{b as _e,c as ue}from"./chunk-JQWVNV7D.js";import{b as xe,c as L}from"./chunk-T6T3ASA2.js";import"./chunk-LCEE4D2X.js";import{a as ae}from"./chunk-AKA2VXM2.js";import{e as U,h as q}from"./chunk-ZFBUO4GJ.js";import{a as fe,b as Ce}from"./chunk-737A43SZ.js";import"./chunk-WLWLX2GD.js";import{a as $,b as H}from"./chunk-XWSIFUJI.js";import{a as me,b as pe}from"./chunk-Q5HFPYVW.js";import"./chunk-UJWIP2JM.js";import"./chunk-OL6EOTCO.js";import"./chunk-ZFSK5ZPD.js";import{d as W,e as j,l as se}from"./chunk-OUNNJ5C5.js";import{a as V,b as R}from"./chunk-R4WKOZHB.js";import"./chunk-H2GJOQLZ.js";import{Ba as T,Bb as k,Eb as z,Ib as le,Jb as ce,Kb as de,Mb as I,qb as E,rb as N,u as re,xa as Z}from"./chunk-IQOQF2BO.js";import{$b as a,Bc as B,Gb as S,Lb as x,Mb as s,Pa as r,U as y,Yb as te,Z as C,_ as v,ac as _,bb as P,bc as M,cc as ne,dc as oe,ec as O,fc as w,gc as D,hb as h,hc as ie,ic as K,ja as b,qb as p,rb as g,tb as ee,ub as A,vb as F,wb as m,xb as n,yb as o,yc as f,zb as c}from"./chunk-GUMEVBBA.js";var ze=()=>[1,2,3,4,5],Ie=()=>["name","value","recordType"],Ve=(t,i)=>i.value;function Re(t,i){if(t&1&&c(0,"p-tag",17),t&2){let e=s().$implicit,l=s(3);m("value",e.label+": "+l.recordCounts().get(e.value))("severity",l.getTypeSeverity(e.value))("icon",l.getTypeIcon(e.value))}}function Le(t,i){if(t&1&&p(0,Re,1,3,"p-tag",17),t&2){let e=i.$implicit,l=s(3);g(l.recordCounts().get(e.value)?0:-1)}}function Ae(t,i){if(t&1&&(n(0,"div",10)(1,"div",14),c(2,"i",15),a(3," Resumen de registros: "),o(),n(4,"div",16),A(5,Le,1,1,null,null,Ve),o()()),t&2){let e=s(2);r(5),F(e.availableTypes)}}function Fe(t,i){t&1&&(n(0,"div",18),c(1,"p-skeleton",19)(2,"p-skeleton",20)(3,"p-skeleton",21)(4,"p-skeleton",19)(5,"p-skeleton",19),o())}function Be(t,i){t&1&&(n(0,"div",11),A(1,Fe,6,0,"div",18,ee),o()),t&2&&(r(),F(K(0,ze)))}function We(t,i){if(t&1&&(n(0,"div",12),c(1,"i",22),a(2),o()),t&2){let e=s(2);r(2),M(" ",e.error()," ")}}function je(t,i){t&1&&(n(0,"tr")(1,"th",26),a(2,"Type"),o(),n(3,"th",27),a(4,"Name"),o(),n(5,"th",28),a(6,"Value"),o(),n(7,"th",26),a(8,"TTL"),o(),n(9,"th",26),a(10,"Priority"),o(),n(11,"th",29),a(12,"Actions"),o()())}function $e(t,i){if(t&1&&(n(0,"span",34),a(1),o()),t&2){let e=s().$implicit;r(),_(e.priority)}}function He(t,i){t&1&&(n(0,"span",35),a(1,"\u2014"),o())}function Xe(t,i){if(t&1&&(n(0,"tr")(1,"td"),c(2,"p-tag",30),o(),n(3,"td")(4,"span",31),a(5),o()(),n(6,"td")(7,"code",32),a(8),o()(),n(9,"td")(10,"span",33),a(11),o()(),n(12,"td"),p(13,$e,2,1,"span",34)(14,He,2,0,"span",35),o(),n(15,"td"),c(16,"p-button",36),o()()),t&2){let e=i.$implicit,l=s(3);r(2),m("value",e.recordType)("severity",l.getTypeSeverity(e.recordType))("icon",l.getTypeIcon(e.recordType)),r(2),m("pTooltip",e.getFQDN()),r(),M(" ",e.name," "),r(3),_(e.value),r(2),te("text-orange-500",e.hasLowTTL()),m("pTooltip",e.hasLowTTL()?"Low TTL warning":""),r(),M(" ",e.getFormattedTTL()," "),r(2),g(e.priority!==void 0?13:14),r(3),m("text",!0)("rounded",!0)}}function Ue(t,i){t&1&&(n(0,"p",40),a(1," Try clearing filters or selecting different types "),o())}function qe(t,i){if(t&1&&(n(0,"tr")(1,"td",37),c(2,"i",38),n(3,"p",39),a(4,"No DNS records found"),o(),p(5,Ue,2,0,"p",40),o()()),t&2){let e=s(3);r(5),g(e.selectedTypes().length>0?5:-1)}}function Ye(t,i){if(t&1&&(n(0,"p-table",13),h(1,je,13,0,"ng-template",23)(2,Xe,17,13,"ng-template",24)(3,qe,6,1,"ng-template",25),o()),t&2){let e=s(2);m("value",e.records())("rowHover",!0)("rows",10)("paginator",e.records().length>10)("showCurrentPageReport",!0)("globalFilterFields",K(6,Ie))}}function Ge(t,i){if(t&1){let e=S();n(0,"div",2)(1,"div",3)(2,"label",4),c(3,"i",5),a(4," Filtros: "),o(),n(5,"p-multiSelect",6),D("ngModelChange",function(d){C(e);let u=s();return w(u.selectedTypes,d)||(u.selectedTypes=d),v(d)}),x("onChange",function(d){C(e);let u=s();return v(u.onFilterChange(d.value))}),o()(),n(6,"div",7)(7,"p-button",8),x("onClick",function(){C(e);let d=s();return v(d.clearFilters())}),o(),n(8,"p-button",9),x("onClick",function(){C(e);let d=s();return v(d.refresh())}),o()(),p(9,Ae,7,0,"div",10),o(),c(10,"p-divider"),p(11,Be,3,1,"div",11),p(12,We,3,1,"div",12),p(13,Ye,4,7,"p-table",13)}if(t&2){let e=s();r(5),m("options",e.availableTypes),O("ngModel",e.selectedTypes),r(2),m("outlined",!0)("disabled",e.selectedTypes().length===0),r(),m("loading",e.isLoading()),r(),g(e.recordCounts().size>0?9:-1),r(2),g(e.isLoading()?11:-1),r(),g(e.error()?12:-1),r(),g(!e.isLoading()&&!e.error()?13:-1)}}function Qe(t,i){t&1&&(n(0,"span",43),a(1,"(filtered)"),o())}function Je(t,i){if(t&1&&(n(0,"div",41),c(1,"i",42),a(2),p(3,Qe,2,0,"span",43),o()),t&2){let e=s();r(2),M(" Total: ",e.records().length," record(s) "),r(),g(e.selectedTypes().length>0?3:-1)}}var Q=class t{dnsService=y(L);domainName=B.required();selectedTypes=b([]);records=f(()=>this.dnsService.filteredRecords());isLoading=f(()=>this.dnsService.isLoading());error=f(()=>this.dnsService.error());recordCounts=f(()=>this.dnsService.getRecordCountByType());availableTypes=[{label:"A (IPv4)",value:"A"},{label:"AAAA (IPv6)",value:"AAAA"},{label:"CNAME (Alias)",value:"CNAME"},{label:"MX (Mail)",value:"MX"},{label:"TXT (Text)",value:"TXT"},{label:"NS (Name Server)",value:"NS"},{label:"SOA (Authority)",value:"SOA"},{label:"SRV (Service)",value:"SRV"},{label:"PTR (Pointer)",value:"PTR"}];async ngOnInit(){await this.loadDnsRecords()}async loadDnsRecords(){try{await this.dnsService.getDnsRecordsByDomain(this.domainName())}catch(i){console.error("Error loading DNS records:",i)}}onFilterChange(i){this.selectedTypes.set(i),this.dnsService.filterByRecordTypes(i)}clearFilters(){this.selectedTypes.set([]),this.dnsService.clearFilters()}async refresh(){await this.loadDnsRecords()}getTypeSeverity(i){switch(i){case"A":case"AAAA":return"success";case"MX":return"warn";case"TXT":return"info";case"CNAME":return"secondary";default:return"secondary"}}getTypeIcon(i){switch(i){case"A":case"AAAA":return"pi pi-globe";case"MX":return"pi pi-envelope";case"TXT":return"pi pi-file";case"CNAME":return"pi pi-link";case"NS":return"pi pi-server";default:return"pi pi-tag"}}trackByRecordId(i,e){return e.id}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-dns-viewer"]],inputs:{domainName:[1,"domainName"]},decls:3,vars:0,consts:[["pTemplate","content"],["pTemplate","footer"],[1,"filter-actions-bar","mb-4"],[1,"filter-control"],["for","type-filter",1,"filter-label"],[1,"pi","pi-filter"],["inputId","type-filter","placeholder","Tipos de registro...","optionLabel","label","optionValue","value","display","chip",1,"filter-select",3,"ngModelChange","onChange","options","ngModel"],[1,"action-buttons"],["icon","pi pi-filter-slash","severity","secondary","size","small","pTooltip","Limpiar filtros aplicados","tooltipPosition","bottom",3,"onClick","outlined","disabled"],["icon","pi pi-refresh","severity","primary","size","small","pTooltip","Actualizar registros","tooltipPosition","bottom",3,"onClick","loading"],[1,"record-counts"],[1,"mt-4"],[1,"p-4","bg-red-50","border-round","text-red-900"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} records","responsiveLayout","scroll",1,"p-datatable-sm",3,"value","rowHover","rows","paginator","showCurrentPageReport","globalFilterFields"],[1,"counts-label"],[1,"pi","pi-chart-bar"],[1,"counts-grid"],[1,"record-count-tag",3,"value","severity","icon"],[1,"flex","gap-3","mb-3"],["width","10%","height","2rem"],["width","20%","height","2rem"],["width","40%","height","2rem"],[1,"pi","pi-exclamation-triangle","mr-2"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","10%"],[2,"width","25%"],[2,"width","40%"],[2,"width","5%"],[3,"value","severity","icon"],["tooltipPosition","top",1,"font-medium",3,"pTooltip"],[1,"text-sm"],[3,"pTooltip"],[1,"font-semibold"],[1,"text-gray-400"],["icon","pi pi-info-circle","severity","info","size","small","pTooltip","Record details",3,"text","rounded"],["colspan","6",1,"text-center","p-4"],[1,"pi","pi-inbox","text-4xl","text-gray-400","mb-3"],[1,"text-gray-600"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-600"],[1,"pi","pi-info-circle","mr-2"],[1,"ml-2"]],template:function(e,l){e&1&&(n(0,"p-card"),h(1,Ge,14,9,"ng-template",0)(2,Je,4,2,"ng-template",1),o())},dependencies:[I,k,z,q,U,T,N,E,R,V,he,ye,H,$,j,W,X,ge,G,Y],styles:["[_nghost-%COMP%]{display:block}.p-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a}.filter-actions-bar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;background:var(--surface-50);padding:1rem 1.25rem;border-radius:var(--border-radius);border:1px solid var(--surface-border)}.filter-actions-bar[_ngcontent-%COMP%]   .filter-control[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:0 0 auto}.filter-actions-bar[_ngcontent-%COMP%]   .filter-control[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;color:var(--text-color);white-space:nowrap;font-size:.9375rem}.filter-actions-bar[_ngcontent-%COMP%]   .filter-control[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.filter-actions-bar[_ngcontent-%COMP%]   .filter-control[_ngcontent-%COMP%]     .filter-select{min-width:280px}.filter-actions-bar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex:0 0 auto}.filter-actions-bar[_ngcontent-%COMP%]   .record-counts[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1 1 auto;margin-left:auto}.filter-actions-bar[_ngcontent-%COMP%]   .record-counts[_ngcontent-%COMP%]   .counts-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;color:var(--text-color-secondary);white-space:nowrap;font-size:.875rem}.filter-actions-bar[_ngcontent-%COMP%]   .record-counts[_ngcontent-%COMP%]   .counts-label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.filter-actions-bar[_ngcontent-%COMP%]   .record-counts[_ngcontent-%COMP%]   .counts-grid[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}code[_ngcontent-%COMP%]{background-color:var(--surface-100);padding:.25rem .5rem;border-radius:4px;font-family:Courier New,monospace}.text-orange-500[_ngcontent-%COMP%]{color:#ff6b35;font-weight:600}  .p-datatable .p-datatable-thead>tr>th{background-color:var(--surface-50);font-weight:600}  .p-datatable .p-datatable-tbody>tr:hover{background-color:var(--surface-hover)}  .p-tag.record-count-tag{font-size:.8125rem;padding:.35rem .6rem;font-weight:400;border:none;border-radius:.375rem;cursor:default;pointer-events:none;opacity:.85}  .p-tag.record-count-tag.p-tag-success{background:#22c55e14;color:var(--green-700)}  .p-tag.record-count-tag.p-tag-success .p-tag-icon{color:var(--green-600);opacity:.7}  .p-tag.record-count-tag.p-tag-warning{background:#fb923c14;color:var(--orange-700)}  .p-tag.record-count-tag.p-tag-warning .p-tag-icon{color:var(--orange-600);opacity:.7}  .p-tag.record-count-tag.p-tag-danger{background:#ef444414;color:var(--red-700)}  .p-tag.record-count-tag.p-tag-danger .p-tag-icon{color:var(--red-600);opacity:.7}  .p-tag.record-count-tag.p-tag-info{background:#3b82f614;color:var(--blue-700)}  .p-tag.record-count-tag.p-tag-info .p-tag-icon{color:var(--blue-600);opacity:.7}  .p-tag.record-count-tag.p-tag-secondary{background:var(--surface-50);color:var(--text-color-secondary)}  .p-tag.record-count-tag.p-tag-secondary .p-tag-icon{color:var(--text-color-secondary);opacity:.6}@media(max-width:1200px){.filter-actions-bar[_ngcontent-%COMP%]   .record-counts[_ngcontent-%COMP%]{flex-basis:100%;margin-left:0;margin-top:.75rem;padding-top:.75rem;border-top:1px solid var(--surface-border)}}@media(max-width:768px){.filter-actions-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem}.filter-actions-bar[_ngcontent-%COMP%]   .filter-control[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.filter-actions-bar[_ngcontent-%COMP%]   .filter-control[_ngcontent-%COMP%]   .filter-label[_ngcontent-%COMP%]{margin-bottom:.5rem}.filter-actions-bar[_ngcontent-%COMP%]   .filter-control[_ngcontent-%COMP%]     .filter-select{width:100%}.filter-actions-bar[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{justify-content:center}.filter-actions-bar[_ngcontent-%COMP%]   .record-counts[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;margin-left:0;margin-top:0;padding-top:0;border-top:none}.filter-actions-bar[_ngcontent-%COMP%]   .record-counts[_ngcontent-%COMP%]   .counts-label[_ngcontent-%COMP%]{margin-bottom:.5rem}.filter-actions-bar[_ngcontent-%COMP%]   .record-counts[_ngcontent-%COMP%]   .counts-grid[_ngcontent-%COMP%]{gap:.5rem}}"],changeDetection:0})};var Ke=(t,i)=>i.id;function Ze(t,i){if(t&1){let e=S();n(0,"div",2)(1,"div",3),c(2,"i",4),n(3,"span"),a(4,"DNS Configuration Comparison"),o()(),n(5,"p-button",5),x("onClick",function(){C(e);let d=s();return v(d.createSnapshot())}),o()()}if(t&2){let e=s();r(5),m("loading",e.isLoading())}}function et(t,i){if(t&1&&(n(0,"option",9),a(1),o()),t&2){let e=i.$implicit;m("value",e.id),r(),ne(" ",e.createdAt.toDate().toLocaleString()," - ",e.note||"Snapshot manual"," ")}}function tt(t,i){t&1&&(n(0,"div",10),c(1,"i",12),n(2,"span"),a(3,"No hay snapshots disponibles. Crea uno para comenzar a comparar."),o()())}function nt(t,i){t&1&&(n(0,"div",22),c(1,"i",24),n(2,"p",25),a(3,"No changes detected"),o(),n(4,"p",26),a(5,"DNS configuration matches the selected snapshot"),o()())}function ot(t,i){t&1&&(n(0,"tr")(1,"th"),a(2,"Type"),o(),n(3,"th"),a(4,"Name"),o(),n(5,"th"),a(6,"Value"),o(),n(7,"th"),a(8,"TTL"),o()())}function it(t,i){if(t&1&&(n(0,"tr",31)(1,"td"),c(2,"p-tag",32),o(),n(3,"td"),a(4),o(),n(5,"td")(6,"code"),a(7),o()(),n(8,"td"),a(9),o()()),t&2){let e=i.$implicit;r(2),m("value",e.recordType),r(2),_(e.name),r(3),_(e.value),r(2),_(e.getFormattedTTL())}}function rt(t,i){if(t&1&&(n(0,"div",23)(1,"h4",27),c(2,"i",28),a(3),o(),n(4,"p-table",29),h(5,ot,9,0,"ng-template",0)(6,it,10,4,"ng-template",30),o()()),t&2){let e=s(3);r(3),M(" Added Records (",e.comparison().added.length,") "),r(),m("value",e.comparison().added)("rowHover",!0)}}function at(t,i){t&1&&(n(0,"tr")(1,"th"),a(2,"Type"),o(),n(3,"th"),a(4,"Name"),o(),n(5,"th"),a(6,"Value"),o(),n(7,"th"),a(8,"TTL"),o()())}function lt(t,i){if(t&1&&(n(0,"tr",35)(1,"td"),c(2,"p-tag",36),o(),n(3,"td"),a(4),o(),n(5,"td")(6,"code"),a(7),o()(),n(8,"td"),a(9),o()()),t&2){let e=i.$implicit;r(2),m("value",e.recordType),r(2),_(e.name),r(3),_(e.value),r(2),_(e.getFormattedTTL())}}function ct(t,i){if(t&1&&(n(0,"div",23)(1,"h4",33),c(2,"i",34),a(3),o(),n(4,"p-table",29),h(5,at,9,0,"ng-template",0)(6,lt,10,4,"ng-template",30),o()()),t&2){let e=s(3);r(3),M(" Removed Records (",e.comparison().removed.length,") "),r(),m("value",e.comparison().removed)("rowHover",!0)}}function dt(t,i){t&1&&(n(0,"tr")(1,"th"),a(2,"Type"),o(),n(3,"th"),a(4,"Name"),o(),n(5,"th"),a(6,"Value"),o(),n(7,"th"),a(8,"TTL"),o()())}function st(t,i){if(t&1&&(n(0,"tr",39)(1,"td"),c(2,"p-tag",40),o(),n(3,"td"),a(4),o(),n(5,"td")(6,"code"),a(7),o()(),n(8,"td"),a(9),o()()),t&2){let e=i.$implicit;r(2),m("value",e.recordType),r(2),_(e.name),r(3),_(e.value),r(2),_(e.getFormattedTTL())}}function mt(t,i){if(t&1&&(n(0,"div",23)(1,"h4",37),c(2,"i",38),a(3),o(),n(4,"p-table",29),h(5,dt,9,0,"ng-template",0)(6,st,10,4,"ng-template",30),o()()),t&2){let e=s(3);r(3),M(" Modified Records (",e.comparison().modified.length,") "),r(),m("value",e.comparison().modified)("rowHover",!0)}}function pt(t,i){if(t&1&&(n(0,"div",13)(1,"div",14),c(2,"i",15),n(3,"span",16),a(4),o(),n(5,"span",17),a(6,"Agregados"),o()(),n(7,"div",18),c(8,"i",19),n(9,"span",16),a(10),o(),n(11,"span",17),a(12,"Eliminados"),o()(),n(13,"div",20),c(14,"i",21),n(15,"span",16),a(16),o(),n(17,"span",17),a(18,"Modificados"),o()()(),p(19,nt,6,0,"div",22),p(20,rt,7,3,"div",23),p(21,ct,7,3,"div",23),p(22,mt,7,3,"div",23)),t&2){let e=s(2);r(4),_(e.comparison().added.length),r(6),_(e.comparison().removed.length),r(6),_(e.comparison().modified.length),r(3),g(e.getTotalChanges()===0?19:-1),r(),g(e.comparison().added.length>0?20:-1),r(),g(e.comparison().removed.length>0?21:-1),r(),g(e.comparison().modified.length>0?22:-1)}}function gt(t,i){t&1&&(n(0,"div",11),c(1,"i",41),n(2,"p",42),a(3,"Select a snapshot to compare with current DNS configuration"),o()())}function _t(t,i){if(t&1){let e=S();n(0,"div",6)(1,"label",7),a(2,"Comparar con Snapshot:"),o(),n(3,"select",8),D("ngModelChange",function(d){C(e);let u=s();return w(u.selectedSnapshotId,d)||(u.selectedSnapshotId=d),v(d)}),x("change",function(){C(e);let d=s();return v(d.selectedSnapshotId()&&d.onSnapshotSelect(d.selectedSnapshotId()))}),n(4,"option",9),a(5,"Selecciona un snapshot para comparar"),o(),A(6,et,2,3,"option",9,Ke),o(),p(8,tt,4,0,"div",10),o(),c(9,"p-divider"),p(10,pt,23,7),p(11,gt,4,0,"div",11)}if(t&2){let e=s();r(3),O("ngModel",e.selectedSnapshotId),r(),m("value",null),r(2),F(e.snapshots()),r(2),g(e.snapshots().length===0?8:-1),r(2),g(e.comparison()?10:-1),r(),g(!e.comparison()&&!e.isLoading()?11:-1)}}var J=class t{dnsService=y(L);domainName=B.required();selectedSnapshotId=b(null);comparison=b(null);snapshots=f(()=>this.dnsService.snapshots());isLoading=f(()=>this.dnsService.isLoading());snapshotOptions=f(()=>this.snapshots().map(i=>({label:`${i.createdAt.toDate().toLocaleString()} - ${i.note||"Manual snapshot"}`,value:i.id})));async ngOnInit(){await this.loadSnapshots()}async loadSnapshots(){try{await this.dnsService.getSnapshotsByDomain(this.domainName())}catch(i){console.error("Error loading snapshots:",i)}}onSnapshotSelect(i){this.selectedSnapshotId.set(i),this.compareWithSnapshot(i)}compareWithSnapshot(i){let e=this.dnsService.compareWithSnapshot(i);this.comparison.set(e)}async createSnapshot(){try{let i=`Manual snapshot - ${new Date().toLocaleString()}`;await this.dnsService.createSnapshot(this.domainName(),i)}catch(i){console.error("Error creating snapshot:",i)}}getTotalChanges(){let i=this.comparison();return i?i.added.length+i.removed.length+i.modified.length:0}trackById(i,e){return e.id}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-dns-comparator"]],inputs:{domainName:[1,"domainName"]},decls:3,vars:0,consts:[["pTemplate","header"],["pTemplate","content"],[1,"dns-compare-header"],[1,"dns-compare-title"],[1,"pi","pi-history"],["icon","pi pi-camera","label","Create Snapshot","severity","success","size","small",1,"create-snapshot-btn",3,"onClick","loading"],[1,"compare-select-block"],[1,"compare-label"],[1,"compare-select","p-inputtext","p-component",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"compare-empty-msg"],[1,"text-center","p-5"],[1,"pi","pi-info-circle"],[1,"dns-compare-summary"],[1,"summary-card","added"],[1,"pi","pi-plus-circle"],[1,"summary-count"],[1,"summary-label"],[1,"summary-card","removed"],[1,"pi","pi-minus-circle"],[1,"summary-card","modified"],[1,"pi","pi-pencil"],[1,"p-4","bg-green-50","border-round","text-center"],[1,"mb-4"],[1,"pi","pi-check-circle","text-4xl","text-green-600","mb-2"],[1,"text-green-900","font-semibold"],[1,"text-sm","text-green-700"],[1,"text-green-600","mb-3"],[1,"pi","pi-plus-circle","mr-2"],[1,"p-datatable-sm",3,"value","rowHover"],["pTemplate","body"],[1,"bg-green-50"],["severity","success",3,"value"],[1,"text-red-600","mb-3"],[1,"pi","pi-minus-circle","mr-2"],[1,"bg-red-50"],["severity","danger",3,"value"],[1,"text-orange-600","mb-3"],[1,"pi","pi-pencil","mr-2"],[1,"bg-orange-50"],["severity","warn",3,"value"],[1,"pi","pi-info-circle","text-5xl","text-gray-400","mb-3"],[1,"text-gray-600"]],template:function(e,l){e&1&&(n(0,"p-card"),h(1,Ze,6,1,"ng-template",0)(2,_t,12,5,"ng-template",1),o())},dependencies:[I,ce,de,le,k,z,R,V,T,N,E,q,U,H,$,G,Y,X],styles:[".dns-compare-summary[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:stretch;gap:2.5rem;margin:2.5rem 0 2rem}.summary-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:120px;background:var(--surface-100);border-radius:1rem;box-shadow:0 2px 8px #0000000a;padding:1.5rem 1.25rem 1.25rem;border:2px solid transparent;transition:box-shadow .2s,border .2s}.summary-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.2rem;margin-bottom:.5rem}.summary-card[_ngcontent-%COMP%]   .summary-count[_ngcontent-%COMP%]{font-size:2.1rem;font-weight:700;margin-bottom:.25rem}.summary-card[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:1.05rem;color:var(--text-color-secondary);font-weight:500}.summary-card.added[_ngcontent-%COMP%]{border-color:var(--green-200)}.summary-card.added[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--green-500)}.summary-card.added[_ngcontent-%COMP%]   .summary-count[_ngcontent-%COMP%]{color:var(--green-700)}.summary-card.removed[_ngcontent-%COMP%]{border-color:var(--red-200)}.summary-card.removed[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--red-500)}.summary-card.removed[_ngcontent-%COMP%]   .summary-count[_ngcontent-%COMP%]{color:var(--red-700)}.summary-card.modified[_ngcontent-%COMP%]{border-color:var(--orange-200)}.summary-card.modified[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--orange-500)}.summary-card.modified[_ngcontent-%COMP%]   .summary-count[_ngcontent-%COMP%]{color:var(--orange-700)}.dns-compare-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background:var(--surface-50);border-bottom:1px solid var(--surface-border);padding:1.25rem 1.5rem 1rem;border-radius:.75rem .75rem 0 0}.dns-compare-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1.15rem;font-weight:600;color:var(--text-color)}.dns-compare-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--primary-color)}.create-snapshot-btn[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;padding:.5rem 1.25rem;border-radius:.5rem}.compare-select-block[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.25rem 1.5rem .5rem}.compare-label[_ngcontent-%COMP%]{display:block;font-weight:600;margin-bottom:.5rem;color:var(--text-color);font-size:1rem}.compare-select[_ngcontent-%COMP%]{width:100%;padding:.7rem 1rem;border-radius:.5rem;border:1px solid var(--surface-border);background:var(--surface-100);font-size:1rem;margin-bottom:.5rem}.compare-empty-msg[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--text-color-secondary);font-size:.98rem;margin-top:.5rem;background:var(--surface-50);border-radius:.5rem;padding:.75rem 1rem}.compare-empty-msg[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.2rem}[_nghost-%COMP%]{display:block}.p-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a}code[_ngcontent-%COMP%]{background-color:var(--surface-100);padding:.25rem .5rem;border-radius:4px;font-family:Courier New,monospace;font-size:.875rem}.bg-green-50[_ngcontent-%COMP%]{background-color:#f0fdf4}.bg-red-50[_ngcontent-%COMP%]{background-color:#fef2f2}.bg-orange-50[_ngcontent-%COMP%]{background-color:#fff7ed}  .p-datatable .p-datatable-thead>tr>th{background-color:var(--surface-50);font-weight:600}"],changeDetection:0})};function ut(t,i){t&1&&(n(0,"div",15),c(1,"i",16),n(2,"span"),a(3,"No hay dominios disponibles"),o(),n(4,"small"),a(5,"Sincroniza tus dominios primero"),o()())}function ft(t,i){if(t&1&&(n(0,"div",17),c(1,"app-dns-viewer",18),o(),n(2,"div",17),c(3,"app-dns-comparator",18),o()),t&2){let e=s();m("@slideUp",void 0),r(),m("domainName",e.domainName()),r(),m("@slideUp",void 0),r(),m("domainName",e.domainName())}}function Ct(t,i){if(t&1){let e=S();n(0,"p-button",23),x("onClick",function(){C(e);let d=s(2);return v(d.syncDnsRecords())}),o()}if(t&2){let e=s(2);m("outlined",!0)("loading",e.isSyncingDns())}}function vt(t,i){if(t&1&&(n(0,"div",14)(1,"p-card")(2,"div",19)(3,"div",20),c(4,"i",21),o(),n(5,"h3"),a(6,"Selecciona un Dominio"),o(),n(7,"p"),a(8," Elige un dominio del selector para visualizar sus registros DNS y comparar snapshots "),o(),p(9,Ct,1,2,"p-button",22),o()()()),t&2){let e=s();m("@fadeIn",void 0),r(9),g(e.domains().length===0?9:-1)}}var De=class t{route=y(re);domainService=y(xe);workspaceContext=y(ae);dnsService=y(L);messageService=y(Z);domainName=b("");selectedDomain="";domains=b([]);isLoadingDomains=b(!1);isSyncingDns=f(()=>this.dnsService.isSyncing());domainOptions=f(()=>this.domains().map(i=>({label:i.domainName,value:i.domainName})));async ngOnInit(){await this.loadDomains(),this.route.queryParams.subscribe(i=>{let e=i.domain||"";e&&(this.domainName.set(e),this.selectedDomain=e)})}async loadDomains(){let i=this.workspaceContext.getCurrentWorkspace();if(!i){console.warn("[DnsPage] No workspace selected");return}try{this.isLoadingDomains.set(!0);let e=await this.domainService.getAllDomains(i.id);this.domains.set(e),this.domainName.set(""),this.selectedDomain=""}catch(e){console.error("[DnsPage] Error loading domains:",e)}finally{this.isLoadingDomains.set(!1)}}onDomainChange(i){this.domainName.set(i||""),this.selectedDomain=i||""}async syncDnsRecords(){let i=this.workspaceContext.getCurrentWorkspace();if(!i){this.messageService.add({severity:"warn",summary:"No Workspace",detail:"Please select a workspace first"});return}try{this.messageService.add({severity:"info",summary:"Syncing DNS",detail:"Fetching DNS records from Hostinger API..."});let e=await this.dnsService.syncDnsRecords(i.id);e.success?(this.messageService.add({severity:"success",summary:"DNS Sync Complete",detail:`Synced ${e.totalRecords} DNS records from ${e.domainsProcessed} domains`,life:5e3}),await this.loadDomains()):this.messageService.add({severity:"error",summary:"DNS Sync Failed",detail:`Errors: ${e.errors.join(", ")}`,life:1e4})}catch(e){console.error("[DnsPage] Error syncing DNS records:",e);let l="Unknown error occurred";if(e&&typeof e=="object"&&"error"in e){let d=e;d.error?.error?l=d.error.error:d.error?.message?l=d.error.message:d.message&&(l=d.message)}else e instanceof Error&&(l=e.message);this.messageService.add({severity:"error",summary:"Sync Error",detail:l,life:15e3})}}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=P({type:t,selectors:[["app-dns-page"]],features:[ie([Z])],decls:20,vars:13,consts:[["role","main","aria-labelledby","dns-heading",1,"dns-page"],["role","toolbar","aria-label","Barra de herramientas DNS",1,"dns-toolbar"],[1,"p-toolbar-group-start"],["id","dns-heading",1,"page-title"],["aria-hidden","true",1,"pi","pi-sitemap"],[1,"p-toolbar-group-end","domain-toolbar-group"],[1,"domain-toolbar-label"],["aria-hidden","true",1,"pi","pi-globe","card-icon"],["inputId","domain-select","placeholder","Selecciona un dominio...","filterPlaceholder","Buscar dominio","optionLabel","label","optionValue","value",1,"w-auto","domain-toolbar-select",3,"ngModelChange","options","ngModel","filter","showClear","loading","disabled"],["pTemplate","empty"],[1,"domain-toolbar-count"],["aria-hidden","true",1,"pi","pi-info-circle"],["icon","pi pi-refresh","severity","secondary","pTooltip","Sincronizar registros DNS","tooltipPosition","bottom","aria-label","Sincronizar registros DNS desde Hostinger API",3,"onClick","outlined","loading","text"],[1,"dns-content"],[1,"empty-state-container"],[1,"empty-state-dropdown"],["aria-hidden","true",1,"pi","pi-inbox"],[1,"dns-section"],[3,"domainName"],[1,"empty-state-content"],[1,"empty-icon"],["aria-hidden","true",1,"pi","pi-search"],["label","Sincronizar Dominios","icon","pi pi-refresh","severity","primary",3,"outlined","loading"],["label","Sincronizar Dominios","icon","pi pi-refresh","severity","primary",3,"onClick","outlined","loading"]],template:function(e,l){e&1&&(n(0,"div",0),c(1,"p-toast"),n(2,"p-toolbar",1)(3,"div",2)(4,"h1",3),c(5,"i",4),a(6," Gesti\xF3n DNS "),o()(),n(7,"div",5)(8,"span",6),c(9,"i",7),a(10," Seleccionar Dominio "),o(),n(11,"p-select",8),D("ngModelChange",function(u){return w(l.selectedDomain,u)||(l.selectedDomain=u),u}),x("ngModelChange",function(u){return l.onDomainChange(u)}),h(12,ut,6,0,"ng-template",9),o(),n(13,"span",10),c(14,"i",11),a(15),o(),n(16,"p-button",12),x("onClick",function(){return l.syncDnsRecords()}),o()()(),n(17,"div",13),p(18,ft,4,4)(19,vt,10,2,"div",14),o()()),e&2&&(r(11),m("options",l.domainOptions()),O("ngModel",l.selectedDomain),m("filter",!0)("showClear",!0)("loading",l.isLoadingDomains())("disabled",l.isLoadingDomains()),r(4),oe(" ",l.domains().length," dominio",l.domains().length!==1?"s":""," disponible",l.domains().length!==1?"s":""," "),r(),m("outlined",!0)("loading",l.isSyncingDns())("text",!0),r(2),g(l.domainName()?18:19))},dependencies:[Q,J,I,k,z,se,R,V,T,N,E,ue,_e,Ce,fe,ve,j,W],styles:[".domain-toolbar-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;border-radius:.5rem;padding:.25rem 1.25rem .25rem .75rem;margin-right:.5rem}.domain-toolbar-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1rem;font-weight:600;color:var(--text-color);background:transparent;padding-right:.5rem;border-right:1px solid var(--surface-border)}.domain-toolbar-label[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--primary-color)}.domain-toolbar-select[_ngcontent-%COMP%]{min-width:220px;max-width:320px;font-size:1rem;margin:0 .5rem}.domain-toolbar-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.4rem;font-size:.95rem;color:var(--text-color-secondary);background:var(--surface-100);border-radius:.4rem;padding:.25rem .75rem;margin-right:.5rem;border-left:3px solid var(--primary-color)}.domain-toolbar-count[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1rem}.domain-toolbar-group[_ngcontent-%COMP%]   .p-button[_ngcontent-%COMP%]{margin-left:.5rem}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.dns-page[_ngcontent-%COMP%]{min-height:100vh;background-color:var(--surface-50)}  .dns-toolbar{border-bottom:2px solid var(--surface-border);padding:1rem 2rem;margin-bottom:0}  .dns-toolbar .page-title{display:flex;align-items:center;gap:.5rem;margin:0;font-size:1.5rem;font-weight:600;color:var(--text-color)}  .dns-toolbar .page-title i{font-size:1.25rem;color:var(--primary-color)}  .dns-toolbar .p-toolbar-group-end{display:flex;gap:.5rem}.dns-content[_ngcontent-%COMP%]{padding:2rem 0;display:flex;flex-direction:column;gap:2rem}  .domain-selector-card .card-header-custom{display:flex;align-items:center;gap:.75rem;padding:1rem 1.25rem;background:var(--surface-100);border-bottom:1px solid var(--surface-border)}  .domain-selector-card .card-header-custom .card-icon{font-size:1.5rem;color:var(--primary-color)}  .domain-selector-card .card-header-custom .header-text{flex:1}  .domain-selector-card .card-header-custom .header-text h2{margin:0;font-size:1.125rem;font-weight:600;color:var(--text-color)}  .domain-selector-card .card-header-custom .header-text .subtitle{margin:.25rem 0 0;font-size:.8125rem;color:var(--text-color-secondary);line-height:1.3}  .domain-selector-card .p-card-body{padding:1.25rem}.selector-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.selector-wrapper[_ngcontent-%COMP%]   .domain-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.875rem;color:var(--text-color-secondary);padding:.5rem .75rem;background:var(--surface-100);border-radius:var(--border-radius);border-left:3px solid var(--primary-color)}.selector-wrapper[_ngcontent-%COMP%]   .domain-count[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.empty-state-dropdown[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:2rem 1rem;text-align:center;color:var(--text-color-secondary)}.empty-state-dropdown[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:var(--surface-400);margin-bottom:.5rem}.empty-state-dropdown[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color)}.empty-state-dropdown[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-color-secondary)}.dns-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideDown .4s ease-out}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.25rem;padding:1rem 0}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0;font-size:1.25rem;font-weight:600;color:var(--text-color)}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.125rem;color:var(--primary-color)}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .section-subtitle[_ngcontent-%COMP%]{margin:0;font-size:.875rem;color:var(--text-color-secondary);font-style:italic}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]     .domain-chip{background:var(--primary-50);color:var(--primary-700);font-weight:500;font-size:.875rem;border:1px solid var(--primary-200)}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]     .domain-chip .p-chip-icon{color:var(--primary-600);font-size:.875rem}.empty-state-container[_ngcontent-%COMP%]{margin-top:3rem}.empty-state-container[_ngcontent-%COMP%]     .p-card{background:linear-gradient(135deg,var(--surface-card) 0%,var(--surface-50) 100%);border:2px dashed var(--surface-border);box-shadow:none}.empty-state-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1.5rem;padding:3rem 2rem;text-align:center}.empty-state-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:120px;height:120px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--primary-50) 0%,var(--primary-100) 100%);border-radius:50%;margin-bottom:.5rem}.empty-state-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:4rem;color:var(--primary-color)}.empty-state-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;font-weight:700;color:var(--text-color)}.empty-state-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:var(--text-color-secondary);max-width:500px;line-height:1.6}@media screen and (max-width:767px){.dns-content[_ngcontent-%COMP%]{padding:1rem}  .dns-toolbar{padding:1rem;flex-direction:column;gap:1rem}  .dns-toolbar .page-title{font-size:1.5rem}  .dns-toolbar .p-toolbar-group-end{width:100%;justify-content:stretch}  .dns-toolbar .p-toolbar-group-end p-button{flex:1}  .domain-selector-card .card-header-custom{flex-direction:column;padding:1.25rem}  .domain-selector-card .card-header-custom .card-icon{font-size:2rem}  .domain-selector-card .card-header-custom .header-text h2{font-size:1.25rem}  .domain-selector-card .p-card-body{padding:1.25rem}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.5rem;width:100%}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.125rem}.empty-state-content[_ngcontent-%COMP%]{padding:2rem 1rem}.empty-state-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{width:100px;height:100px}.empty-state-content[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem}.empty-state-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem}.empty-state-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}@media screen and (max-width:991px){  .dns-toolbar{padding:1.25rem 1.5rem}  .dns-toolbar .page-title{font-size:1.6rem}}@media screen and (min-width:1400px){.dns-content[_ngcontent-%COMP%]{max-width:1800px;margin:0 auto}}@media screen and (min-width:2560px){  .dns-toolbar{padding:2rem 3rem}  .dns-toolbar .page-title{font-size:2rem}.dns-content[_ngcontent-%COMP%]{padding:4rem;gap:3rem}.dns-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem}}"],data:{animation:[me,pe]},changeDetection:0})};export{De as DnsPage};
