<aside class="sidebar" [class.collapsed]="collapsed()">
  <!-- Logo & Toggle -->
  <div class="sidebar-header">
    @if (!collapsed()) {
      <div class="logo">
        <i class="pi pi-server text-primary"></i>
        <span class="logo-text">Hostinger WM</span>
      </div>
    }
    @if (collapsed()) {
      <div class="logo-icon">
        <i class="pi pi-server text-primary"></i>
      </div>
    }
    <button
      pButton
      [icon]="collapsed() ? 'pi pi-angle-right' : 'pi pi-angle-left'"
      class="p-button-text p-button-rounded toggle-btn"
      (click)="onToggle()"
      [pTooltip]="collapsed() ? 'Expandir' : 'Colapsar'"
      tooltipPosition="right"
    ></button>
  </div>

  <!-- Navigation Menu -->
  <nav class="sidebar-nav">
    <!-- GLOBAL SECTION -->
    <div class="menu-section">
      @if (!collapsed()) {
        <div class="section-header">
          <span class="section-title">Global</span>
        </div>
      }
      <ul class="menu-list">
        @for (item of globalMenuItems; track item.route) {
          <li
            class="menu-item"
            [class.active]="isActiveRoute(item.route)"
          >
            <a
              class="menu-link"
              [routerLink]="item.route"
              [pTooltip]="collapsed() ? item.label : ''"
              tooltipPosition="right"
            >
              <i [class]="item.icon"></i>
              @if (!collapsed()) {
                <span class="menu-label">{{ item.label }}</span>
              }
              @if (item.badge && !collapsed()) {
                <span class="badge">{{ item.badge }}</span>
              }
            </a>
          </li>
        }
      </ul>
    </div>

    <!-- WORKSPACE SECTION -->
    <div class="menu-section workspace-section">
      @if (!collapsed()) {
        <div class="section-header">
          <span class="section-title">Workspace</span>
        </div>
      }

      <!-- Empty state when no workspace selected -->
      @if (!hasWorkspaceSelected() && !collapsed()) {
        <div class="empty-workspace">
          <i class="pi pi-info-circle"></i>
          <p class="empty-message">Selecciona un workspace para acceder a sus recursos</p>
        </div>
      }

      <!-- Workspace menu when workspace is selected -->
      @if (hasWorkspaceSelected()) {
        <ul class="menu-list">
          @for (item of workspaceMenuItems; track item.route) {
            <li
              class="menu-item"
              [class.active]="isActiveRoute(item.route)"
              [class.disabled]="item.disabled"
            >
              <a
                class="menu-link"
                [routerLink]="item.disabled ? null : getWorkspaceRoute(item.route)"
                [pTooltip]="collapsed() ? item.label : ''"
                tooltipPosition="right"
              >
                <i [class]="item.icon"></i>
                @if (!collapsed()) {
                  <span class="menu-label">{{ item.label }}</span>
                }
                @if (item.badge && !collapsed()) {
                  <span class="badge">{{ item.badge }}</span>
                }
              </a>
            </li>
          }
        </ul>
      }
    </div>
  </nav>

  <!-- Logout -->
  <div class="sidebar-footer">
    <button
      pButton
      [icon]="'pi pi-sign-out'"
      [label]="collapsed() ? '' : 'Cerrar Sesión'"
      class="p-button-text p-button-danger logout-btn"
      (click)="logout()"
      [pTooltip]="collapsed() ? 'Cerrar Sesión' : ''"
      tooltipPosition="right"
    ></button>
  </div>
</aside>
