import{a as be}from"./chunk-AWUFOH6D.js";import{a as V,b as he,c as ye,d as xe,e as Oe,f as Se,g as we}from"./chunk-WRZYYKDV.js";import{a as X}from"./chunk-G2OQGXDI.js";import{a as me,b as ge}from"./chunk-FT4KV7O4.js";import{a as _e,b as Ce,c as fe,d as Me,e as Pe,f as ve}from"./chunk-WA2SB7KZ.js";import"./chunk-IQCNXFAT.js";import{a as z,b as B}from"./chunk-FG4PGYPZ.js";import{b as de,c as ue}from"./chunk-SEX3EHUL.js";import{f as te,g as ne,h as ie,i as oe,l as se,m as ce}from"./chunk-22ZNFGKD.js";import{a as le,b as pe}from"./chunk-4I35WPSU.js";import{Db as ee,Lb as re,Mb as ae,f as R,g as Q,mb as N,nb as L,r as U,ta as j,tb as Y,wb as Z,xa as F,yb as $}from"./chunk-MQX4I6TC.js";import{$b as _,Fb as T,Jb as m,Kb as u,Oa as s,T as S,Xb as J,Y as h,Z as y,Zb as a,_b as b,ab as x,bc as E,cc as k,dc as I,ec as G,fc as O,gb as w,ia as g,nc as C,oc as K,pb as f,pc as P,qb as M,tc as D,vb as d,vc as A,wb as t,wc as v,xb as i,yb as p}from"./chunk-ZVXIGZDY.js";var Ae=()=>[10,20,50];function Re(o,n){o&1&&(t(0,"tr")(1,"th"),a(2,"Estado"),i(),t(3,"th",11),a(4," Producto "),p(5,"p-sortIcon",12),i(),t(6,"th",13),a(7," Vence "),p(8,"p-sortIcon",14),i(),t(9,"th"),a(10,"Pr\xF3xima Facturaci\xF3n"),i(),t(11,"th"),a(12,"Auto-Renew"),i(),t(13,"th"),a(14,"Status"),i(),t(15,"th"),a(16,"Acciones"),i()())}function Fe(o,n){if(o&1&&(t(0,"span",21),a(1),C(2,"date"),i()),o&2){let e=u().$implicit;s(),_(" ",P(2,1,e.nextBillingAt.toDate(),"dd/MM/yyyy")," ")}}function Ne(o,n){o&1&&(t(0,"span",22),a(1,"N/A"),i())}function Le(o,n){if(o&1){let e=T();t(0,"tr",15),m("click",function(){let l=h(e).$implicit,c=u();return y(c.onRowClick(l))}),t(1,"td",16),p(2,"app-expiration-semaphore",17),i(),t(3,"td",18)(4,"strong"),a(5),i(),t(6,"div",19),a(7),i()(),t(8,"td")(9,"span",20),a(10),C(11,"date"),i()(),t(12,"td"),f(13,Fe,3,4,"span",21)(14,Ne,2,0,"span",22),i(),t(15,"td",23)(16,"p-toggleButton",24),I("ngModelChange",function(l){let c=h(e).$implicit;return k(c.autoRenew,l)||(c.autoRenew=l),y(l)}),i()(),t(17,"td"),p(18,"p-tag",25),i(),t(19,"td",26)(20,"p-button",27),m("onClick",function(l){let c=h(e).$implicit;return u().onRowClick(c),y(l.stopPropagation())}),i()()()}if(o&2){let e=n.$implicit,r=u();s(2),d("expiresAt",e.expiresAt),s(3),b(e.productName),s(2),b(e.subscriptionId),s(3),_(" ",P(11,11,e.expiresAt.toDate(),"dd/MM/yyyy HH:mm")," "),s(3),M(e.nextBillingAt?13:14),s(3),E("ngModel",e.autoRenew),d("disabled",!0),s(2),d("value",e.status)("severity",r.getStatusSeverity(e.status)),s(2),d("rounded",!0)("text",!0)}}function ze(o,n){o&1&&a(0," Intenta cambiar los filtros de b\xFAsqueda ")}function Be(o,n){o&1&&a(0," No hay suscripciones sincronizadas para este workspace ")}function Ve(o,n){if(o&1&&(t(0,"tr")(1,"td",28)(2,"div",29),p(3,"i",30),t(4,"p",31),a(5,"No se encontraron suscripciones"),i(),t(6,"p",32),f(7,ze,1,0)(8,Be,1,0),i()()()()),o&2){let e=u();s(7),M(e.searchText()||e.selectedAutoRenewFilter()!==null?7:8)}}var W=class o{subscriptions=v.required();isLoading=v(!1);totalRecords=v(0);subscriptionClicked=A();searchText=g("");selectedAutoRenewFilter=g(null);rowsPerPage=g(10);autoRenewFilterOptions=[{label:"Todas",value:null},{label:"Solo Auto-Renew",value:!0},{label:"Sin Auto-Renew",value:!1}];filteredSubscriptions=D(()=>{let n=[...this.subscriptions()],e=this.searchText().toLowerCase();e&&(n=n.filter(l=>l.productName?.toLowerCase().includes(e)));let r=this.selectedAutoRenewFilter();return r!==null&&(n=n.filter(l=>l.autoRenew===r)),n});onRowClick(n){this.subscriptionClicked.emit(n)}onAutoRenewFilterChange(n){this.selectedAutoRenewFilter.set(n)}getStatusSeverity(n){let e=n.toLowerCase();return e.includes("active")||e.includes("activ")?"success":e.includes("pending")||e.includes("pendiente")?"warn":e.includes("suspended")||e.includes("suspendid")?"danger":e.includes("cancelled")||e.includes("cancelad")?"secondary":"info"}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=x({type:o,selectors:[["app-subscriptions-table"]],inputs:{subscriptions:[1,"subscriptions"],isLoading:[1,"isLoading"],totalRecords:[1,"totalRecords"]},outputs:{subscriptionClicked:"subscriptionClicked"},decls:11,vars:11,consts:[[1,"subscriptions-table-container"],[1,"table-header"],[1,"search-container"],["iconPosition","left"],["styleClass","pi pi-search"],["type","text","pInputText","","placeholder","Buscar por producto...",1,"search-input",3,"ngModelChange","ngModel"],["optionLabel","label","optionValue","value","placeholder","Filtrar por renovaci\xF3n","styleClass","autorenew-filter",3,"ngModelChange","options","ngModel"],["currentPageReportTemplate","Mostrando {first} a {last} de {totalRecords} suscripciones","styleClass","subscriptions-table","responsiveLayout","scroll",3,"value","loading","paginator","rows","rowsPerPageOptions","totalRecords","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","productName"],["field","productName"],["pSortableColumn","expiresAt"],["field","expiresAt"],[1,"subscription-row",3,"click"],[1,"semaphore-cell"],[3,"expiresAt"],[1,"product-name"],[1,"subscription-id"],[1,"expiration-date"],[1,"billing-date"],[1,"no-billing"],[1,"autorenew-cell"],["onLabel","S\xED","offLabel","No","onIcon","pi pi-check","offIcon","pi pi-times","styleClass","autorenew-toggle",3,"ngModelChange","ngModel","disabled"],[3,"value","severity"],[1,"actions-cell"],["icon","pi pi-eye","severity","info","size","small","pTooltip","Ver detalles","tooltipPosition","left",3,"onClick","rounded","text"],["colspan","7",1,"empty-message"],[1,"empty-state"],[1,"pi","pi-inbox","empty-icon"],[1,"empty-text"],[1,"empty-hint"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-iconfield",3),p(4,"p-inputicon",4),t(5,"input",5),I("ngModelChange",function(c){return k(r.searchText,c)||(r.searchText=c),c}),i()()(),t(6,"p-select",6),I("ngModelChange",function(c){return k(r.selectedAutoRenewFilter,c)||(r.selectedAutoRenewFilter=c),c}),m("ngModelChange",function(c){return r.onAutoRenewFilterChange(c)}),i()(),t(7,"p-table",7),w(8,Re,17,0,"ng-template",8)(9,Le,21,14,"ng-template",9)(10,Ve,9,1,"ng-template",10),i()()),e&2&&(s(5),E("ngModel",r.searchText),s(),d("options",r.autoRenewFilterOptions),E("ngModel",r.selectedAutoRenewFilter),s(),d("value",r.filteredSubscriptions())("loading",r.isLoading())("paginator",!0)("rows",r.rowsPerPage())("rowsPerPageOptions",O(10,Ae))("totalRecords",r.filteredSubscriptions().length)("showCurrentPageReport",!0))},dependencies:[ee,Y,Z,$,ve,fe,F,Me,Pe,ae,re,L,N,ce,se,B,z,ne,te,oe,ie,Ce,_e,V,R],styles:[".subscriptions-table-container[_ngcontent-%COMP%]{width:100%}.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem;margin-bottom:1.5rem;flex-wrap:wrap}.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{flex:1;min-width:250px}.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%}.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .autorenew-filter[_ngcontent-%COMP%]{min-width:220px}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .subscription-row[_ngcontent-%COMP%]{cursor:pointer;transition:background-color .2s ease}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .subscription-row[_ngcontent-%COMP%]:hover{background-color:var(--surface-hover)}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .semaphore-cell[_ngcontent-%COMP%]{text-align:center;width:80px}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;color:var(--text-color);font-size:.95rem}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]   .subscription-id[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-color-secondary);margin-top:.25rem}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .expiration-date[_ngcontent-%COMP%], .subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .billing-date[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-color)}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .no-billing[_ngcontent-%COMP%]{font-size:.85rem;color:var(--text-color-secondary);font-style:italic}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .autorenew-cell[_ngcontent-%COMP%]     .autorenew-toggle{pointer-events:none;opacity:.8}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .autorenew-cell[_ngcontent-%COMP%]     .autorenew-toggle.p-highlight{background-color:var(--gray-600)!important;border-color:var(--gray-600)!important}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .actions-cell[_ngcontent-%COMP%]{text-align:center;width:100px}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{text-align:center;padding:3rem 1rem}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.75rem}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-color-secondary);opacity:.5}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-text[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;color:var(--text-color);margin:0}.subscriptions-table-container[_ngcontent-%COMP%]   .subscriptions-table[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-hint[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-color-secondary);margin:0}@media(max-width:768px){.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%], .subscriptions-table-container[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .autorenew-filter[_ngcontent-%COMP%]{width:100%;min-width:auto}}"],changeDetection:0})};var We=()=>({width:"90vw",maxWidth:"800px"}),He=()=>({"960px":"95vw","640px":"100vw"}),je=()=>["0"];function qe(o,n){if(o&1&&(t(0,"div",16)(1,"div",17)(2,"div",18),p(3,"app-expiration-semaphore",19),t(4,"h2"),a(5),i()()()()),o&2){let e=u(2);s(3),d("expiresAt",e.subscription().expiresAt),s(2),b(e.subscription().productName)}}function Je(o,n){if(o&1&&(t(0,"div",4)(1,"label",5),a(2,"Pr\xF3xima Facturaci\xF3n"),i(),t(3,"div",6),a(4),C(5,"date"),i()()),o&2){let e=u(2);s(4),_(" ",P(5,1,e.subscription().nextBillingAt.toDate(),"dd/MM/yyyy HH:mm")," ")}}function Ge(o,n){if(o&1&&(t(0,"div",4)(1,"label",5),a(2,"\xDAltima Sincronizaci\xF3n"),i(),t(3,"div",20),p(4,"i",21),a(5),C(6,"date"),i()()),o&2){let e=u(2);s(5),_(" ",P(6,1,e.subscription().syncedAt.toDate(),"dd/MM/yyyy HH:mm")," ")}}function Ke(o,n){if(o&1){let e=T();t(0,"p-button",22),m("onClick",function(){h(e);let l=u(2);return y(l.onClose())}),i()}}function Qe(o,n){if(o&1&&(w(0,qe,6,2,"ng-template",1),t(1,"div",2)(2,"div",3)(3,"div",4)(4,"label",5),a(5,"ID de Suscripci\xF3n"),i(),t(6,"div",6)(7,"code"),a(8),i()()(),t(9,"div",4)(10,"label",5),a(11,"Fecha de Vencimiento"),i(),t(12,"div",6)(13,"strong"),a(14),C(15,"date"),i()()(),f(16,Je,6,4,"div",4),t(17,"div",4)(18,"label",5),a(19,"Estado"),i(),t(20,"div",6),p(21,"p-tag",7),i()(),t(22,"div",4)(23,"label",5),a(24,"Renovaci\xF3n Autom\xE1tica"),i(),t(25,"div",6),p(26,"p-tag",8),i()(),f(27,Ge,7,4,"div",4),i(),p(28,"p-divider"),t(29,"div",9)(30,"p-accordion",10)(31,"p-accordionpanel",11)(32,"p-accordionheader")(33,"div",12),p(34,"i",13),t(35,"span"),a(36,"Datos Raw (JSON)"),i()()(),t(37,"p-accordioncontent")(38,"pre",14),a(39),C(40,"json"),i()()()()()(),w(41,Ke,1,0,"ng-template",15)),o&2){let e=u();s(8),b(e.subscription().subscriptionId),s(6),b(P(15,11,e.subscription().expiresAt.toDate(),"dd/MM/yyyy HH:mm")),s(2),M(e.subscription().nextBillingAt?16:-1),s(5),d("value",e.subscription().status)("severity",e.getStatusSeverity(e.subscription().status)),s(5),d("value",e.subscription().autoRenew?"Activada":"Desactivada")("severity",e.getTagSeverity(e.subscription().autoRenew))("icon",e.subscription().autoRenew?"pi pi-check":"pi pi-times"),s(),M(e.subscription().syncedAt?27:-1),s(3),d("value",O(16,je)),s(9),b(K(40,14,e.subscription()))}}var H=class o{subscription=v.required();visible=v.required();visibleChange=A();onClose(){this.visibleChange.emit(!1)}getStatusSeverity(n){let e=n.toLowerCase();return e.includes("active")||e.includes("activ")?"success":e.includes("pending")||e.includes("pendiente")?"warn":e.includes("suspended")||e.includes("suspendid")?"danger":e.includes("cancelled")||e.includes("cancelad")?"secondary":"info"}getTagSeverity(n){return n?"success":"danger"}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=x({type:o,selectors:[["app-subscription-details-dialog"]],inputs:{subscription:[1,"subscription"],visible:[1,"visible"]},outputs:{visibleChange:"visibleChange"},decls:2,vars:10,consts:[[3,"onHide","visible","modal","draggable","resizable","breakpoints"],["pTemplate","header"],[1,"subscription-details"],[1,"details-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[3,"value","severity"],[3,"value","severity","icon"],[1,"raw-data-section"],[3,"value"],["value","0"],[1,"accordion-header"],[1,"pi","pi-code"],[1,"raw-data-content"],["pTemplate","footer"],[1,"dialog-header"],[1,"subscription-header"],[1,"subscription-title"],[3,"expiresAt"],[1,"detail-value","synced-at"],[1,"pi","pi-sync"],["label","Cerrar","icon","pi pi-times","severity","secondary",3,"onClick"]],template:function(e,r){e&1&&(t(0,"p-dialog",0),m("onHide",function(){return r.onClose()}),f(1,Qe,42,17),i()),e&2&&(J(O(8,We)),d("visible",r.visible())("modal",!0)("draggable",!1)("resizable",!1)("breakpoints",O(9,He)),s(),M(r.subscription()?1:-1))},dependencies:[ge,me,F,L,N,B,z,ye,he,we,xe,Oe,Se,V,R,Q],styles:[".p-dialog .dialog-header{width:100%}  .p-dialog .dialog-header .subscription-header{width:100%}  .p-dialog .dialog-header .subscription-header .subscription-title{display:flex;align-items:center;gap:1rem}  .p-dialog .dialog-header .subscription-header .subscription-title h2{margin:0;font-size:1.5rem;color:var(--text-color)}.subscription-details[_ngcontent-%COMP%]{padding:.5rem 0}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem;margin-bottom:1.5rem}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase;letter-spacing:.5px}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-color)}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:var(--surface-100);padding:.25rem .5rem;border-radius:4px;font-size:.9rem;color:var(--primary-color)}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value.synced-at[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.9rem;color:var(--text-color-secondary)}.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   .detail-value.synced-at[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]{margin-top:1rem}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-weight:600}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .accordion-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e1e1e,#2d2d2d);color:#e0e0e0;padding:1.5rem;border-radius:8px;overflow-x:auto;font-size:.85rem;line-height:1.6;max-height:400px;margin:0;border:1px solid var(--surface-border);box-shadow:inset 0 2px 8px #0000004d}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px}.subscription-details[_ngcontent-%COMP%]   .raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}@media(max-width:640px){.subscription-details[_ngcontent-%COMP%]   .details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}  .p-dialog .dialog-header .subscription-header .subscription-title{flex-direction:column;align-items:flex-start;gap:.75rem}  .p-dialog .dialog-header .subscription-header .subscription-title h2{font-size:1.25rem}}"],changeDetection:0})};var q=class o{subscriptionService=S(be);workspaceContext=S(X);route=S(U);messageService=S(j);subscriptions=g([]);isLoading=this.subscriptionService.isLoading;error=this.subscriptionService.error;selectedSubscription=g(null);showDetailsDialog=g(!1);workspaceName=D(()=>this.workspaceContext.getCurrentWorkspace()?.name||"Workspace");totalSubscriptions=D(()=>this.subscriptions().length);ngOnInit(){this.loadSubscriptions()}async loadSubscriptions(){try{let n=this.route.snapshot.paramMap.get("workspaceId");if(console.log("[SubscriptionsPage] Loading subscriptions for workspaceId:",n),!n)throw new Error("No se encontr\xF3 el ID del workspace");let e=await this.subscriptionService.getAllSubscriptions(n);console.log("[SubscriptionsPage] Loaded",e.length,"subscriptions"),this.subscriptions.set(e),e.length===0&&this.messageService.add({severity:"info",summary:"Sin suscripciones",detail:"No se encontraron suscripciones para este workspace. Aseg\xFArate de haber ejecutado la sincronizaci\xF3n.",life:5e3})}catch(n){console.error("[SubscriptionsPage] Error loading subscriptions:",n);let e=n instanceof Error?n.message:"Error al cargar suscripciones";n instanceof Error&&n.message.includes("index")&&(e="El \xEDndice de Firestore est\xE1 construy\xE9ndose. Espera unos minutos y recarga la p\xE1gina."),this.messageService.add({severity:"error",summary:"Error",detail:e})}}onSubscriptionClicked(n){this.selectedSubscription.set(n),this.showDetailsDialog.set(!0)}onDialogVisibilityChange(n){this.showDetailsDialog.set(n),n||this.selectedSubscription.set(null)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=x({type:o,selectors:[["app-subscriptions"]],features:[G([j])],decls:12,vars:6,consts:[[1,"subscriptions-page"],[1,"page-header"],[1,"header-content"],[1,"page-title"],[1,"pi","pi-shopping-cart"],[1,"page-subtitle"],[3,"subscriptionClicked","subscriptions","isLoading","totalRecords"],[3,"visibleChange","subscription","visible"]],template:function(e,r){e&1&&(t(0,"div",0),p(1,"p-toast"),t(2,"div",1)(3,"div",2)(4,"h1",3),p(5,"i",4),a(6),i(),t(7,"p",5),a(8," Gestiona y monitorea las suscripciones y servicios de este workspace "),i()()(),t(9,"p-card")(10,"app-subscriptions-table",6),m("subscriptionClicked",function(c){return r.onSubscriptionClicked(c)}),i()(),t(11,"app-subscription-details-dialog",7),m("visibleChange",function(c){return r.onDialogVisibilityChange(c)}),i()()),e&2&&(s(6),_(" Suscripciones - ",r.workspaceName()," "),s(4),d("subscriptions",r.subscriptions())("isLoading",r.isLoading())("totalRecords",r.totalSubscriptions()),s(),d("subscription",r.selectedSubscription())("visible",r.showDetailsDialog()))},dependencies:[pe,le,ue,de,W,H],styles:[".subscriptions-page[_ngcontent-%COMP%]{width:100%;max-width:1400px;margin:0 auto;padding:2rem}.subscriptions-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:2rem}.subscriptions-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:2rem;font-weight:700;color:var(--text-color);margin:0 0 .5rem}.subscriptions-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.subscriptions-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-color-secondary);margin:0}@media(max-width:768px){.subscriptions-page[_ngcontent-%COMP%]{padding:1rem}.subscriptions-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.subscriptions-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:1.5rem}.subscriptions-page[_ngcontent-%COMP%]   .page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-size:.9rem}}"],changeDetection:0})};export{q as default};
