import{a as Ue,b as Be,c as He,d as je}from"./chunk-MBWVO76L.js";import{a as Le,b as $e}from"./chunk-3Z6ABU2J.js";import{a as Ee,b as ke}from"./chunk-CTPZG76Y.js";import{a as De,b as we}from"./chunk-LZAUEQAN.js";import{b as Oe,c as Se}from"./chunk-FYGEUYEJ.js";import{b as L,g as Ie}from"./chunk-KGM75SAH.js";import"./chunk-XXMBZZ37.js";import"./chunk-2H4PJY2W.js";import{a as se}from"./chunk-NHWKIFHZ.js";import{c as Ne,d as Fe,g as Ve,h as Ae,i as ze,j as Re}from"./chunk-6QSEMOCP.js";import{b as Te}from"./chunk-XNM27DCK.js";import"./chunk-PPZFH2ZV.js";import{a as z,b as R}from"./chunk-2MAXEO6Q.js";import{a as he,b as Pe}from"./chunk-Q5HFPYVW.js";import"./chunk-46UKYMVD.js";import"./chunk-OL6EOTCO.js";import"./chunk-6BTVTWSQ.js";import{c as pe,d as F,f as ge,g as ue,j as fe,k as be,l as ve,p as _e,q as Ce,r as xe,v as V,w as A}from"./chunk-Z4BNMZT3.js";import"./chunk-47X5BFEM.js";import{c as ce,d as me}from"./chunk-JUILAC2W.js";import{a as ye,b as Me}from"./chunk-SPDGIFFF.js";import"./chunk-TOC7PNXQ.js";import"./chunk-JNP63KUK.js";import{Ia as j,Ma as T,c as oe,gb as I,hb as N,i as re,l as k,n as le,x as de}from"./chunk-WQRABBEY.js";import{$b as Q,Ab as s,Ac as ae,Cc as O,Dc as w,Eb as Y,Fb as K,Hb as M,Mb as p,Ob as g,Pa as r,U as C,Yb as Z,Z as f,_ as b,bb as y,bc as l,cc as u,dc as h,hb as S,ja as x,jc as E,kc as D,lc as ee,ma as W,rb as v,sb as _,sc as P,tc as te,ub as q,uc as H,vb as J,vc as ne,wb as X,xb as c,yb as n,yc as ie,zb as i}from"./chunk-XTNRL3Y3.js";function Xe(o,t){if(o&1&&(n(0,"div",2)(1,"div",3),s(2,"app-expiration-semaphore",4),n(3,"h2"),l(4),i()()()),o&2){let e=g();r(2),c("expiresAt",e.domain().expiresAt),r(2),u(e.domain().domainName)}}function Ye(o,t){if(o&1&&(n(0,"app-detail-item",7),l(1),P(2,"date"),i()),o&2){let e=g(2);r(),h(" ",H(2,1,e.domain().createdAt.toDate(),"dd/MM/yyyy HH:mm")," ")}}function Ke(o,t){if(o&1&&(n(0,"li",17),s(1,"i",18),n(2,"code"),l(3),i()()),o&2){let e=t.$implicit;r(3),u(e)}}function Ze(o,t){if(o&1&&(n(0,"ul",14),J(1,Ke,4,1,"li",17,q),i()),o&2){let e=g(2);r(),X(e.domain().nameservers)}}function Qe(o,t){o&1&&(n(0,"p",15),l(1,"No hay nameservers configurados"),i())}function et(o,t){if(o&1&&(s(0,"p-divider"),n(1,"div",5)(2,"app-detail-item",6)(3,"strong"),l(4),P(5,"date"),i()(),v(6,Ye,3,4,"app-detail-item",7),n(7,"app-detail-item",8),s(8,"p-tag",9),i(),n(9,"app-detail-item",10),s(10,"p-tag",9),i()(),s(11,"p-divider"),n(12,"div",11)(13,"h3",12),s(14,"i",13),l(15," Nameservers "),i(),v(16,Ze,3,0,"ul",14)(17,Qe,2,0,"p",15),i(),s(18,"p-divider")(19,"app-raw-data-viewer",16)),o&2){let e=g();r(4),u(H(5,8,e.domain().expiresAt.toDate(),"dd/MM/yyyy HH:mm")),r(2),_(e.domain().createdAt?6:-1),r(2),c("value",e.domain().domainLock?"Activado":"Desactivado")("severity",e.getTagSeverity(e.domain().domainLock||!1)),r(2),c("value",e.domain().privacyProtection?"Activada":"Desactivada")("severity",e.getTagSeverity(e.domain().privacyProtection||!1)),r(6),_(e.domain().nameservers&&e.domain().nameservers.length>0?16:17),r(3),c("data",e.domain())}}var $=class o{domain=w.required();visible=w.required();visibleChange=O();onClose(){this.visibleChange.emit(!1)}getTagSeverity(t){return t?"success":"secondary"}formatNameservers(t){return!t||t.length===0?"N/A":t.join(`
`)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-domain-details-dialog"]],inputs:{domain:[1,"domain"],visible:[1,"visible"]},outputs:{visibleChange:"visibleChange"},decls:4,vars:3,consts:[["header","Detalles del Dominio","width","700px",3,"onClose","visible"],["slot","header"],[1,"domain-header","mb-3"],[1,"domain-title"],[3,"expiresAt"],[1,"details-grid","mt-3"],["label","Fecha de Vencimiento"],["label","Fecha de Creaci\xF3n"],["label","Domain Lock"],[3,"value","severity"],["label","Privacidad WHOIS"],[1,"nameservers-section"],[1,"section-title"],[1,"pi","pi-server"],[1,"nameservers-list"],[1,"no-data"],[3,"data"],[1,"nameserver-item"],[1,"pi","pi-angle-right"]],template:function(e,a){e&1&&(n(0,"app-modal-wrapper",0),p("onClose",function(){return a.onClose()}),Y(1,1),v(2,Xe,5,2,"div",2),K(),v(3,et,20,11),i()),e&2&&(c("visible",a.visible()),r(2),_(a.domain()?2:-1),r(),_(a.domain()?3:-1))},dependencies:[R,z,$e,Le,Ue,Be,He,je,re],styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.domain-header[_ngcontent-%COMP%]   .domain-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.domain-header[_ngcontent-%COMP%]   .domain-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--primary-color);font-weight:700}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}@media(max-width:576px){.details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase;letter-spacing:.5px}.detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-color)}.nameservers-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0 0 1rem;font-size:1.1rem;font-weight:600;color:var(--text-color)}.nameservers-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.nameservers-section[_ngcontent-%COMP%]   .nameservers-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.5rem}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:#f9fafb;border-radius:6px;border:1px solid #e5e7eb}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);font-size:.85rem}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem;color:#374151}.nameservers-section[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-style:italic;margin:0}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-header .accordion-header{display:flex;align-items:center;gap:.5rem;font-weight:600}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-header .accordion-header i{color:var(--primary-color)}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-content{padding:0}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0;padding:1.5rem;margin:0;border-radius:6px;font-family:Courier New,monospace;font-size:.85rem;line-height:1.6;overflow-x:auto;max-height:400px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0f172a;border-radius:4px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#475569;border-radius:4px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64748b}  .domain-details-dialog .p-dialog-header{background:linear-gradient(135deg,#475569,#334155);color:#fff;border-top-left-radius:8px;border-top-right-radius:8px}  .domain-details-dialog .p-dialog-header .p-dialog-title{font-weight:700}  .domain-details-dialog .p-dialog-header .p-dialog-header-icon{color:#fff}  .domain-details-dialog .p-dialog-header .p-dialog-header-icon:hover{background-color:#ffffff1a}  .domain-details-dialog .p-divider{margin:1rem 0}"],changeDetection:0})};function tt(o){let t=o,e=Math.floor(Math.abs(o)),a=o.toString().replace(/^[^.]*\.?/,"").length,d=parseInt(o.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===1?1:d===0&&e!==0&&e%1e6===0&&a===0||!(d>=0&&d<=5)?4:5}var qe=["es",[["a.\u202Fm.","p.\u202Fm."],void 0,["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[void 0,"EGP"],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",tt];var ot=()=>({width:"600px"}),rt=o=>[o,"COP","symbol","1.0-0","es"];function lt(o,t){o&1&&(n(0,"small",5),l(1,"Ingresa un email v\xE1lido"),i())}function dt(o,t){if(o&1){let e=M();n(0,"p-button",13),p("onClick",function(){f(e);let d=g();return b(d.onClose())}),i(),n(1,"p-button",14),p("onClick",function(){f(e);let d=g();return b(d.onSave())}),i()}if(o&2){let e=g();c("disabled",e.isSaving()),r(),c("loading",e.isSaving())("disabled",e.editForm.invalid)}}le(qe);var U=class o{fb=C(_e);domainService=C(L);domain=w.required();visible=w.required();visibleChange=O();domainUpdated=O();isSaving=x(!1);totalPrice=x(0);editForm=this.fb.group({contactEmail:["",[F.email]],hostingRenewalPrice:[0,[F.min(0)]],domainRenewalPrice:[0,[F.min(0)]]});constructor(){W(()=>{let t=this.domain();if(t){let e=t.hostingRenewalPrice||0,a=t.domainRenewalPrice||0;e===0&&a===0&&t.renewalPrice&&(a=t.renewalPrice),this.editForm.patchValue({contactEmail:t.contactEmail||"",hostingRenewalPrice:e,domainRenewalPrice:a}),this.updateTotalPrice()}}),this.editForm.valueChanges.subscribe(()=>{this.updateTotalPrice()})}updateTotalPrice(){let t=this.editForm.value.hostingRenewalPrice||0,e=this.editForm.value.domainRenewalPrice||0;this.totalPrice.set(t+e)}async onSave(){let t=this.domain();if(!(!t||this.editForm.invalid)){this.isSaving.set(!0);try{let e={contactEmail:this.editForm.value.contactEmail||void 0,hostingRenewalPrice:this.editForm.value.hostingRenewalPrice||0,domainRenewalPrice:this.editForm.value.domainRenewalPrice||0,renewalPrice:0};await this.domainService.updateDomain(t.id,e),this.domainUpdated.emit(),this.onClose()}catch(e){console.error("Error updating domain:",e)}finally{this.isSaving.set(!1)}}}onClose(){this.editForm.reset(),this.visibleChange.emit(!1)}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-domain-edit-dialog"]],inputs:{domain:[1,"domain"],visible:[1,"visible"]},outputs:{visibleChange:"visibleChange",domainUpdated:"domainUpdated"},features:[E([{provide:ie,useValue:"es"}])],decls:22,vars:21,consts:[[3,"visibleChange","header","visible","modal","draggable","resizable"],[3,"ngSubmit","formGroup"],[1,"field"],["for","contactEmail"],["pInputText","","id","contactEmail","formControlName","contactEmail","type","email","placeholder","cliente@ejemplo.com",1,"w-full"],[1,"p-error"],["for","hostingPrice"],["inputId","hostingPrice","formControlName","hostingRenewalPrice","mode","currency","currency","COP","locale","es",1,"w-full",3,"min"],["for","domainPrice"],["inputId","domainPrice","formControlName","domainRenewalPrice","mode","currency","currency","COP","locale","es",1,"w-full",3,"min"],[1,"total-price"],[1,"price"],["pTemplate","footer"],["label","Cancelar","icon","pi pi-times","severity","secondary",3,"onClick","disabled"],["label","Guardar","icon","pi pi-check",3,"onClick","loading","disabled"]],template:function(e,a){if(e&1&&(n(0,"p-dialog",0),p("visibleChange",function(m){return a.visibleChange.emit(m)}),n(1,"form",1),p("ngSubmit",function(){return a.onSave()}),n(2,"div",2)(3,"label",3),l(4,"Email de Contacto"),i(),s(5,"input",4),v(6,lt,2,0,"small",5),i(),n(7,"div",2)(8,"label",6),l(9,"Precio Renovaci\xF3n Hosting (COP)"),i(),s(10,"p-inputNumber",7),i(),n(11,"div",2)(12,"label",8),l(13,"Precio Renovaci\xF3n Dominio (COP)"),i(),s(14,"p-inputNumber",9),i(),n(15,"div",10)(16,"strong"),l(17,"Total Renovaci\xF3n:"),i(),n(18,"span",11),l(19),P(20,"currency"),i()()(),S(21,dt,2,3,"ng-template",12),i()),e&2){let d,m;Q(D(18,ot)),c("header","Editar Dominio - "+(((d=a.domain())==null?null:d.domainName)||""))("visible",a.visible())("modal",!0)("draggable",!1)("resizable",!1),r(),c("formGroup",a.editForm),r(5),_((m=a.editForm.get("contactEmail"))!=null&&m.invalid&&((m=a.editForm.get("contactEmail"))!=null&&m.touched)?6:-1),r(4),c("min",0),r(4),c("min",0),r(5),u(ne(20,12,ee(19,rt,a.totalPrice())))}},dependencies:[xe,fe,pe,ge,ue,ve,be,ke,Ee,T,N,I,A,V,Fe,Ne,k],styles:[".field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:var(--text-color)}.field[_ngcontent-%COMP%]   small.p-error[_ngcontent-%COMP%]{display:block;margin-top:.25rem;color:var(--red-500)}.total-price[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--surface-100);border-radius:var(--border-radius);margin-top:1rem}.total-price[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-color)}.total-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:var(--primary-color)}"],changeDetection:0})};var st=()=>[10,25,50],ct=()=>["domainName","registrar","provider"],mt=()=>({"min-width":"50rem"});function pt(o,t){o&1&&(n(0,"div",7),s(1,"p-skeleton",16),n(2,"div",17),s(3,"p-skeleton",18),i()())}function gt(o,t){if(o&1&&(n(0,"div",8)(1,"p-card")(2,"div",19)(3,"div",20),s(4,"i",21),i(),n(5,"div",22)(6,"div",23),l(7,"Total Dominios"),i(),n(8,"div",24),l(9),i(),n(10,"div",25),l(11,"Registrados"),i()()()(),n(12,"p-card")(13,"div",19)(14,"div",26),s(15,"i",27),i(),n(16,"div",22)(17,"div",23),l(18,"Saludables"),i(),n(19,"div",24),l(20),i(),n(21,"div",25),l(22,"Sin alertas"),i()()()(),n(23,"p-card")(24,"div",19)(25,"div",28),s(26,"i",29),i(),n(27,"div",22)(28,"div",23),l(29,"Atenci\xF3n Requerida"),i(),n(30,"div",24),l(31),i(),n(32,"div",30)(33,"span",31),l(34),i(),n(35,"span",32),l(36),i()()()()(),n(37,"p-card")(38,"div",19)(39,"div",33),s(40,"i",34),i(),n(41,"div",22)(42,"div",23),l(43,"Valor de Renovaci\xF3n"),i(),n(44,"div",24),l(45),P(46,"currency"),i(),n(47,"div",25),l(48,"Proyectado"),i()()()()()),o&2){let e=t;r(9),u(e.total),r(11),u(e.active),r(11),u(e.critical+e.warning+e.expired),r(3),h("",e.expired," vencidos"),r(2),h("",e.critical+e.warning," pr\xF3ximos"),r(9),u(te(46,6,e.totalValue))}}function ut(o,t){if(o&1){let e=M();n(0,"div",35)(1,"div",36),s(2,"i",37),n(3,"input",38),p("input",function(d){f(e),g();let m=Z(13);return b(m.filterGlobal(d.target.value,"contains"))}),i()()()}}function ft(o,t){o&1&&(n(0,"tr")(1,"th",39),l(2," Dominio "),s(3,"p-sortIcon",40),i(),n(4,"th",41),l(5," Vencimiento "),s(6,"p-sortIcon",42),i(),n(7,"th",43),l(8,"Estado"),i(),n(9,"th",44),l(10,"Auto-Renew"),i(),n(11,"th",44),l(12,"Privacy"),i(),n(13,"th",44),l(14,"Acciones"),i()())}function bt(o,t){if(o&1){let e=M();n(0,"tr")(1,"td")(2,"div",45),l(3),i(),n(4,"div",46),l(5),i()(),n(6,"td")(7,"div",47)(8,"span",48),l(9),i(),n(10,"small",49),l(11),i()()(),n(12,"td",50),s(13,"p-tag",51),i(),n(14,"td",50),s(15,"i",52),i(),n(16,"td",50),s(17,"i",52),i(),n(18,"td",50)(19,"div",53)(20,"p-button",54),p("onClick",function(){let d=f(e).$implicit,m=g();return b(m.onEditDomain(d))}),i(),n(21,"p-button",55),p("onClick",function(){let d=f(e).$implicit,m=g();return b(m.onDomainClicked(d))}),i()()()()}if(o&2){let e=t.$implicit,a=g();r(3),u(e.domainName),r(2),h(" ",e.registrar||"Desconocido"," "),r(4),u(a.formatDate(e.expiresAt)),r(2),u(a.getStatusLabel(e.expiresAt)),r(2),c("value",a.getStatusLabel(e.expiresAt).split("(")[0])("severity",a.getSeverity(e.expiresAt))("icon",a.getStatusIcon(e.expiresAt)),r(2),c("ngClass",e.autoRenew?"fa-check text-green-500":"fa-times text-red-400"),r(2),c("ngClass",e.privacyProtection?"fa-shield-alt text-green-500":"fa-lock-open text-orange-400"),r(3),c("rounded",!0)("text",!0),r(),c("rounded",!0)("text",!0)}}function vt(o,t){o&1&&(n(0,"tr")(1,"td",56)(2,"div",57),s(3,"i",58),n(4,"p"),l(5,"No se encontraron dominios"),i()()()())}var G=class o{domainService=C(L);workspaceContext=C(se);exportService=C(Ie);route=C(de);messageService=C(j);domains=x([]);isLoading=this.domainService.isLoading;error=this.domainService.error;stats=x(null);selectedDomain=x(null);showDetailsDialog=x(!1);showEditDialog=x(!1);workspaceName=ae(()=>this.workspaceContext.getCurrentWorkspace()?.name||"Workspace");ngOnInit(){this.route.paramMap.subscribe(()=>{this.loadData()})}async loadData(){try{let t=this.route.snapshot.paramMap.get("workspaceId");if(!t)throw new Error("No se encontr\xF3 el ID del workspace");let[e,a]=await Promise.all([this.domainService.getAllDomains(t),this.domainService.getDomainStatistics(t)]);this.domains.set(e),this.stats.set(a),e.length===0&&this.messageService.add({severity:"info",summary:"Sin dominios",detail:"No se encontraron dominios para este workspace.",life:5e3})}catch(t){console.error("[DomainsPage] Error loading data:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Error al cargar los datos de dominios"})}}getSeverity(t){switch(this.domainService.getExpirationStatus(t)){case"ok":return"success";case"warning":return"warn";case"critical":case"expired":return"danger";default:return"info"}}getStatusLabel(t){let e=this.domainService.getExpirationStatus(t),a=this.domainService.getDaysUntilExpiration(t);return e==="expired"?`Vencido (${Math.abs(a||0)}d)`:a!==null?`${a} d\xEDas`:"Desconocido"}getStatusIcon(t){switch(this.domainService.getExpirationStatus(t)){case"ok":return"fa fa-check-circle";case"warning":return"fa fa-exclamation-triangle";case"critical":return"fa fa-exclamation-circle";case"expired":return"fa fa-times-circle";default:return"fa fa-question-circle"}}onDomainClicked(t){this.selectedDomain.set(t),this.showDetailsDialog.set(!0)}onDialogVisibilityChange(t){this.showDetailsDialog.set(t),t||this.selectedDomain.set(null)}onEditDomain(t){this.selectedDomain.set(t),this.showEditDialog.set(!0)}onEditDialogVisibilityChange(t){this.showEditDialog.set(t),t||this.selectedDomain.set(null)}exportToCSV(){let t=this.domains();if(t.length===0)return;let e=t.map(d=>({Dominio:d.domainName,Workspace:this.workspaceName(),"Fecha de Vencimiento":this.formatDate(d.expiresAt),Estado:this.domainService.getExpirationStatus(d.expiresAt)})),a=`dominios-${this.workspaceName().replace(/\s+/g,"-").toLowerCase()}-${new Date().toISOString().split("T")[0]}.csv`;this.exportService.exportToCSV(e,a),this.messageService.add({severity:"success",summary:"Exportado",detail:`Datos exportados a ${a}`,life:3e3})}formatDate(t){return t?t instanceof Date?t.toLocaleDateString():typeof t=="object"&&"toDate"in t?t.toDate().toLocaleDateString():String(t):""}onDomainUpdated(){this.messageService.add({severity:"success",summary:"Dominio actualizado",detail:"Los cambios se guardaron correctamente"}),this.loadData()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-domains"]],features:[E([j])],decls:20,vars:23,consts:[["dt",""],[1,"flex","flex-wrap","justify-content-between","align-items-center","mb-4","gap-3"],[1,"app-page-title","m-0"],[1,"fa","fa-globe","text-primary","mr-2"],[1,"flex","gap-2"],["label","Actualizar","icon","fa fa-refresh","severity","secondary","size","small","pTooltip","Actualizar datos","tooltipPosition","bottom",3,"onClick","outlined","loading"],["label","Exportar","icon","fa fa-download","severity","secondary","size","small",3,"onClick","outlined","disabled"],[1,"loading-container"],[1,"summary-cards"],[1,"p-datatable-sm",3,"value","loading","paginator","rows","rowsPerPageOptions","globalFilterFields","tableStyle","rowHover"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visibleChange","domain","visible"],[3,"visibleChange","domainUpdated","domain","visible"],["height","150px","width","100%"],[1,"mt-4"],["height","400px","width","100%"],[1,"stat-card"],[1,"stat-icon","total"],[1,"fa","fa-hashtag"],[1,"stat-content"],[1,"stat-label"],[1,"stat-value"],[1,"stat-subtitle"],[1,"stat-icon","success"],[1,"fa","fa-check-circle"],[1,"stat-icon","warning"],[1,"fa","fa-exclamation-triangle"],[1,"stat-breakdown"],[1,"danger"],[1,"warning"],[1,"stat-icon","value"],[1,"fa","fa-dollar-sign"],[1,"filter-toolbar"],[1,"search-wrapper"],[1,"fa","fa-search","search-icon"],["pInputText","","type","text","placeholder","Buscar dominio...",1,"glass-input","with-icon",3,"input"],["pSortableColumn","domainName",2,"min-width","200px"],["field","domainName"],["pSortableColumn","expiresAt",2,"width","180px"],["field","expiresAt"],[2,"width","120px","text-align","center"],[2,"width","100px","text-align","center"],[1,"font-bold","text-lg","text-truncate"],[1,"text-sm","text-muted","text-truncate"],[1,"d-flex","flex-column"],[1,"font-medium"],[1,"text-muted","block","mt-1"],[2,"text-align","center"],[3,"value","severity","icon"],[1,"fa",3,"ngClass"],[1,"flex","justify-content-center","gap-2"],["icon","fa fa-edit","severity","secondary","pTooltip","Editar",3,"onClick","rounded","text"],["icon","fa fa-external-link","severity","info","pTooltip","Ver Detalles",3,"onClick","rounded","text"],["colspan","6",2,"text-align","center","padding","3rem"],[1,"empty-state"],[1,"fa","fa-globe"]],template:function(e,a){if(e&1){let d=M();n(0,"div"),s(1,"p-toast"),n(2,"div",1)(3,"h1",2),s(4,"i",3),l(5),i(),n(6,"div",4)(7,"p-button",5),p("onClick",function(){return f(d),b(a.loadData())}),i(),n(8,"p-button",6),p("onClick",function(){return f(d),b(a.exportToCSV())}),i()()(),v(9,pt,4,0,"div",7),v(10,gt,49,8,"div",8),n(11,"p-card")(12,"p-table",9,0),S(14,ut,4,0,"ng-template",10)(15,ft,15,0,"ng-template",11)(16,bt,22,13,"ng-template",12)(17,vt,6,0,"ng-template",13),i()(),n(18,"app-domain-details-dialog",14),p("visibleChange",function(B){return f(d),b(a.onDialogVisibilityChange(B))}),i(),n(19,"app-domain-edit-dialog",15),p("visibleChange",function(B){return f(d),b(a.onEditDialogVisibilityChange(B))})("domainUpdated",function(){return f(d),b(a.onDomainUpdated())}),i()()}if(e&2){let d;c("@fadeIn",void 0),r(5),h(" Dominios - ",a.workspaceName()," "),r(2),c("outlined",!0)("loading",a.isLoading()),r(),c("outlined",!0)("disabled",a.domains().length===0),r(),_(a.isLoading()&&!a.stats()?9:-1),r(),_((d=a.stats())?10:-1,d),r(2),c("value",a.domains())("loading",a.isLoading())("paginator",!0)("rows",10)("rowsPerPageOptions",D(20,st))("globalFilterFields",D(21,ct))("tableStyle",D(22,mt))("rowHover",!0),r(6),c("domain",a.selectedDomain())("visible",a.showDetailsDialog()),r(),c("domain",a.selectedDomain())("visible",a.showEditDialog())}},dependencies:[oe,Ce,Me,ye,T,Se,Oe,N,I,Te,Re,Ve,Ae,ze,R,z,A,V,we,De,me,ce,$,U,k],styles:['[_ngcontent-%COMP%]:root{--color-brand-900: #111827;--color-brand-800: #1f2937;--color-brand-700: #374151;--color-brand-600: #4b5563;--color-brand-500: #6b7280;--color-brand-400: #9ca3af;--color-brand-300: #d1d5db;--color-brand-200: #e5e7eb;--color-brand-100: #f3f4f6;--color-brand-50: #f9fafb;--color-white: #ffffff;--gray-900: var(--color-brand-900);--gray-800: var(--color-brand-800);--gray-700: var(--color-brand-700);--gray-600: var(--color-brand-600);--gray-500: var(--color-brand-500);--gray-400: var(--color-brand-400);--gray-300: var(--color-brand-300);--gray-200: var(--color-brand-200);--gray-100: var(--color-brand-100);--gray-50: var(--color-brand-50);--primary-color: var(--color-brand-800);--primary-color-text: var(--color-white);--primary-hover: var(--color-brand-700);--primary-500: var(--color-brand-800);--primary-rgb: 31, 41, 55;--primary-500-rgb: 31, 41, 55;--text-main: var(--primary-color);--text-secondary: var(--color-brand-700);--text-color: var(--text-main);--text-color-secondary: var(--text-secondary);--border-color: var(--color-brand-300);--surface-ground: var(--color-brand-50);--surface-card: var(--color-white);--surface-overlay: var(--color-white);--surface-0: #ffffff;--surface-50: var(--color-brand-50);--surface-100: var(--color-brand-100);--surface-200: var(--color-brand-200);--surface-300: var(--color-brand-300);--surface-400: var(--color-brand-400);--surface-500: var(--color-brand-500);--surface-600: var(--color-brand-600);--surface-700: var(--color-brand-700);--surface-800: var(--color-brand-800);--surface-900: var(--color-brand-900);--glass-bg: rgba(255, 255, 255, .6);--glass-border: rgba(255, 255, 255, .6);--glass-blur: 16px;--color-success-bg: #ecfdf5;--color-success-text: #065f46;--color-success-Main: #10b981;--green-50: #ecfdf5;--green-100: #d1fae5;--green-200: #a7f3d0;--green-300: #6ee7b7;--green-400: #34d399;--green-500: #10b981;--green-600: #059669;--green-700: #047857;--green-800: #065f46;--green-900: #064e3b;--color-warning-bg: #fffbeb;--color-warning-text: #92400e;--color-warning-main: #f59e0b;--orange-50: #fff7ed;--orange-100: #ffedd5;--orange-200: #fed7aa;--orange-300: #fdba74;--orange-400: #fb923c;--orange-500: #f97316;--orange-600: #ea580c;--orange-700: #c2410c;--yellow-500: #eab308;--color-danger-bg: #fef2f2;--color-danger-text: #991b1b;--color-danger-main: #ef4444;--red-50: #fef2f2;--red-100: #fee2e2;--red-200: #fecaca;--red-300: #fca5a5;--red-400: #f87171;--red-500: #ef4444;--red-600: #dc2626;--red-700: #b91c1c;--red-800: #991b1b;--red-900: #7f1d1d;--color-info-bg: #eff6ff;--color-info-text: #1e40af;--color-info-main: #3b82f6;--blue-50: #eff6ff;--blue-100: #dbeafe;--blue-200: #bfdbfe;--blue-300: #93c5fd;--blue-400: #60a5fa;--blue-500: #3b82f6;--blue-600: #2563eb;--blue-700: #1d4ed8;--blue-800: #1e40af;--blue-900: #1e3a8a;--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;--font-size-base: 16px;--font-weight-regular: 400;--font-weight-medium: 500;--font-weight-bold: 700;--border-radius-sm: 6px;--border-radius-md: 8px;--border-radius-lg: 12px;--border-radius-xl: 20px;--border-radius-xxl: 24px;--border-radius-round: 999px;--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .1), 0 2px 4px -1px rgba(0, 0, 0, .06);--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .1), 0 4px 6px -2px rgba(0, 0, 0, .05);--shadow-card: 0 4px 20px rgba(0, 0, 0, .03);--shadow-card-hover: 0 12px 30px rgba(0, 0, 0, .06);--shadow-floating: 0 8px 32px rgba(0, 0, 0, .03), 0 2px 8px rgba(0, 0, 0, .02)}.glass-card[_ngcontent-%COMP%]{background:var(--surface-card);border-radius:20px;box-shadow:var(--shadow-card);border:1px solid rgba(229,231,235,.6);padding:1.5rem;transition:transform .3s ease,box-shadow .3s ease;height:100%;display:flex;flex-direction:column}.glass-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-card-hover)}.summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1.5rem;margin-bottom:2rem}@media screen and (max-width:575px){.summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem}.stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:3.5rem;height:3.5rem;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0}.stat-card[_ngcontent-%COMP%]   .stat-icon.total[_ngcontent-%COMP%]{background:#eff6ff;color:#3b82f6}.stat-card[_ngcontent-%COMP%]   .stat-icon.success[_ngcontent-%COMP%]{background:#ecfdf5;color:#10b981}.stat-card[_ngcontent-%COMP%]   .stat-icon.warning[_ngcontent-%COMP%]{background:#fffbeb;color:#f59e0b}.stat-card[_ngcontent-%COMP%]   .stat-icon.danger[_ngcontent-%COMP%]{background:#fef2f2;color:#ef4444}.stat-card[_ngcontent-%COMP%]   .stat-icon.action[_ngcontent-%COMP%]{background:#f3e8ff;color:#a855f7}.stat-card[_ngcontent-%COMP%]   .stat-icon.system[_ngcontent-%COMP%]{background:#f1f5f9;color:#64748b}.stat-card[_ngcontent-%COMP%]   .stat-icon.health[_ngcontent-%COMP%]{background:#fef2f2;color:#ef4444}.stat-card[_ngcontent-%COMP%]   .stat-icon.workspaces[_ngcontent-%COMP%]{background:#eff6ff;color:#3b82f6}.stat-card[_ngcontent-%COMP%]   .stat-icon.sync[_ngcontent-%COMP%]{background:#f0fdf4;color:#22c55e}.stat-card[_ngcontent-%COMP%]   .stat-icon.errors[_ngcontent-%COMP%]{background:#fff7ed;color:#f97316}.stat-card[_ngcontent-%COMP%]   .stat-icon.value[_ngcontent-%COMP%]{background:#ecfdf5;color:#10b981}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{flex:1}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);margin-bottom:.25rem;font-weight:500}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--text-main);line-height:1.2}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-subtitle[_ngcontent-%COMP%], .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-breakdown[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);margin-top:.25rem;display:flex;gap:.5rem}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:var(--color-success-text)}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:var(--color-warning-text)}.stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .danger[_ngcontent-%COMP%]{color:#ef4444}.loading-container[_ngcontent-%COMP%]{margin:2rem 0}.summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr);gap:1rem}@media screen and (max-width:1199px){.summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width:767px){.summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{align-items:center;gap:.75rem}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;font-size:1.25rem;border-radius:10px}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.total[_ngcontent-%COMP%]{background:#3b82f626;color:#3b82f6;border:1px solid rgba(59,130,246,.2)}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.success[_ngcontent-%COMP%]{background:#10b98126;color:#10b981;border:1px solid rgba(16,185,129,.2)}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.warning[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b;border:1px solid rgba(245,158,11,.2)}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.value[_ngcontent-%COMP%]{background:#8b5cf626;color:#8b5cf6;border:1px solid rgba(139,92,246,.2)}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{min-width:0}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;margin-bottom:.15rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.25rem}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-subtitle[_ngcontent-%COMP%]{font-size:.75rem;margin-top:.15rem}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-breakdown[_ngcontent-%COMP%]{display:flex;gap:.5rem;font-size:.75rem}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-breakdown[_ngcontent-%COMP%]   .danger[_ngcontent-%COMP%]{color:var(--color-danger-main);font-weight:600}.summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-breakdown[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:var(--color-warning-main);font-weight:600}.filter-toolbar[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;margin-bottom:0}@media screen and (max-width:767px){.filter-toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.5rem}.filter-toolbar[_ngcontent-%COMP%]   .p-input-icon-left[_ngcontent-%COMP%]{width:100%}}'],data:{animation:[he,Pe]},changeDetection:0})};export{G as default};
