import{a as We}from"./chunk-47G4JF4V.js";import{a as $e,b as Be,c as je,d as Ue,e as He,f as Ge}from"./chunk-U4RXTWQI.js";import{a as B,b as j}from"./chunk-CTPZG76Y.js";import{a as we,b as Se}from"./chunk-LZAUEQAN.js";import{b as Ee,c as ke}from"./chunk-FYGEUYEJ.js";import{b as U,g as Ie}from"./chunk-5R2X6POM.js";import"./chunk-XXMBZZ37.js";import{a as ce}from"./chunk-NHWKIFHZ.js";import{c as Fe,d as Ve,g as Ae,h as Re,i as ze,j as Le}from"./chunk-GCQ2WIT6.js";import{a as Te,b as Ne}from"./chunk-XNM27DCK.js";import"./chunk-PPZFH2ZV.js";import{a as L,b as $}from"./chunk-2MAXEO6Q.js";import{a as Me,b as xe}from"./chunk-Q5HFPYVW.js";import"./chunk-46UKYMVD.js";import"./chunk-OL6EOTCO.js";import"./chunk-6BTVTWSQ.js";import{c as ue,d as A,f as _e,g as fe,j as ve,k as Ce,l as he,p as be,q as Pe,r as ye,v as R,w as z}from"./chunk-Z4BNMZT3.js";import"./chunk-47X5BFEM.js";import{c as pe,d as ge}from"./chunk-JUILAC2W.js";import{a as De,b as Oe}from"./chunk-SPDGIFFF.js";import"./chunk-TOC7PNXQ.js";import"./chunk-JNP63KUK.js";import{Ia as q,Ma as S,c as ae,gb as E,hb as k,i as re,j as le,l as V,m as se,n as me,x as de}from"./chunk-WQRABBEY.js";import{$b as N,Ab as m,Ac as oe,Cc as T,Dc as w,Hb as y,Mb as p,Ob as f,Pa as l,U as C,Yb as ee,Z as u,_,bb as D,bc as r,cc as g,dc as x,hb as O,ja as v,jc as I,kc as P,lc as te,ma as Y,rb as h,sb as b,sc as M,tc as F,ub as K,uc as J,vb as Z,vc as ne,wb as Q,xb as d,yb as n,yc as ie,zb as i}from"./chunk-XTNRL3Y3.js";var et=()=>({width:"700px",maxWidth:"95vw"}),tt=()=>["0"];function nt(a,t){if(a&1&&(n(0,"div",6)(1,"label",7),r(2,"Fecha de Creaci\xF3n"),i(),n(3,"div",8),r(4),M(5,"date"),i()()),a&2){let e=f(2);l(4),x(" ",J(5,1,e.domain().createdAt.toDate(),"dd/MM/yyyy HH:mm")," ")}}function it(a,t){if(a&1&&(n(0,"li",22),m(1,"i",23),n(2,"code"),r(3),i()()),a&2){let e=t.$implicit;l(3),g(e)}}function ot(a,t){if(a&1&&(n(0,"ul",13),Z(1,it,4,1,"li",22,K),i()),a&2){let e=f(2);l(),Q(e.domain().nameservers)}}function at(a,t){a&1&&(n(0,"p",14),r(1,"No hay nameservers configurados"),i())}function rt(a,t){if(a&1){let e=y();n(0,"p-button",24),p("onClick",function(){u(e);let s=f(2);return _(s.onClose())}),i()}}function lt(a,t){if(a&1&&(n(0,"div",1)(1,"div",2)(2,"div",3),m(3,"app-expiration-semaphore",4),n(4,"h2"),r(5),i()()(),m(6,"p-divider"),n(7,"div",5)(8,"div",6)(9,"label",7),r(10,"Fecha de Vencimiento"),i(),n(11,"div",8)(12,"strong"),r(13),M(14,"date"),i()()(),h(15,nt,6,4,"div",6),n(16,"div",6)(17,"label",7),r(18,"Domain Lock"),i(),n(19,"div",8),m(20,"p-tag",9),i()(),n(21,"div",6)(22,"label",7),r(23,"Privacidad WHOIS"),i(),n(24,"div",8),m(25,"p-tag",9),i()()(),m(26,"p-divider"),n(27,"div",10)(28,"h3",11),m(29,"i",12),r(30," Nameservers "),i(),h(31,ot,3,0,"ul",13)(32,at,2,0,"p",14),i(),m(33,"p-divider"),n(34,"div",15)(35,"p-accordion",16)(36,"p-accordionpanel",17)(37,"p-accordionheader")(38,"div",18),m(39,"i",19),n(40,"span"),r(41,"Datos Raw (JSON)"),i()()(),n(42,"p-accordioncontent")(43,"pre",20),r(44),M(45,"json"),i()()()()()(),O(46,rt,1,0,"ng-template",21)),a&2){let e=f();l(3),d("expiresAt",e.domain().expiresAt),l(2),g(e.domain().domainName),l(8),g(J(14,11,e.domain().expiresAt.toDate(),"dd/MM/yyyy HH:mm")),l(2),b(e.domain().createdAt?15:-1),l(5),d("value",e.domain().domainLock?"Activado":"Desactivado")("severity",e.getTagSeverity(e.domain().domainLock||!1)),l(5),d("value",e.domain().privacyProtection?"Activada":"Desactivada")("severity",e.getTagSeverity(e.domain().privacyProtection||!1)),l(6),b(e.domain().nameservers&&e.domain().nameservers.length>0?31:32),l(4),d("value",P(16,tt)),l(9),g(F(45,14,e.domain()))}}var H=class a{domain=w.required();visible=w.required();visibleChange=T();showRawData=v(!1);onClose(){this.visibleChange.emit(!1)}toggleRawData(){this.showRawData.update(t=>!t)}getTagSeverity(t){return t?"success":"secondary"}formatNameservers(t){return!t||t.length===0?"N/A":t.join(`
`)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=D({type:a,selectors:[["app-domain-details-dialog"]],inputs:{domain:[1,"domain"],visible:[1,"visible"]},outputs:{visibleChange:"visibleChange"},decls:2,vars:8,consts:[[1,"domain-details-dialog",3,"visibleChange","header","visible","modal","dismissableMask"],[1,"dialog-content"],[1,"domain-header"],[1,"domain-title"],[3,"expiresAt"],[1,"details-grid"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[3,"value","severity"],[1,"nameservers-section"],[1,"section-title"],[1,"pi","pi-server"],[1,"nameservers-list"],[1,"no-data"],[1,"raw-data-section"],[3,"value"],["value","0"],[1,"accordion-header"],[1,"pi","pi-code"],[1,"raw-data-content"],["pTemplate","footer"],[1,"nameserver-item"],[1,"pi","pi-angle-right"],["label","Cerrar","icon","pi pi-times","severity","secondary",3,"onClick"]],template:function(e,o){e&1&&(n(0,"p-dialog",0),p("visibleChange",function(){return o.onClose()}),h(1,lt,47,17),i()),e&2&&(N(P(7,et)),d("header","Detalles del Dominio")("visible",o.visible())("modal",!0)("dismissableMask",!0),l(),b(o.domain()?1:-1))},dependencies:[j,B,S,k,E,$,L,Be,$e,Ge,je,Ue,He,We,re,le],styles:[".dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.domain-header[_ngcontent-%COMP%]   .domain-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.domain-header[_ngcontent-%COMP%]   .domain-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;color:var(--primary-color);font-weight:700}.details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}@media(max-width:576px){.details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.detail-item[_ngcontent-%COMP%]   .detail-label[_ngcontent-%COMP%]{font-size:.85rem;font-weight:600;color:var(--text-color-secondary);text-transform:uppercase;letter-spacing:.5px}.detail-item[_ngcontent-%COMP%]   .detail-value[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-color)}.nameservers-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:0 0 1rem;font-size:1.1rem;font-weight:600;color:var(--text-color)}.nameservers-section[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.nameservers-section[_ngcontent-%COMP%]   .nameservers-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.5rem}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;background:#f9fafb;border-radius:6px;border:1px solid #e5e7eb}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color);font-size:.85rem}.nameservers-section[_ngcontent-%COMP%]   .nameserver-item[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem;color:#374151}.nameservers-section[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-style:italic;margin:0}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-header .accordion-header{display:flex;align-items:center;gap:.5rem;font-weight:600}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-header .accordion-header i{color:var(--primary-color)}.raw-data-section[_ngcontent-%COMP%]     .p-accordion .p-accordion-content{padding:0}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]{background:#1e293b;color:#e2e8f0;padding:1.5rem;margin:0;border-radius:6px;font-family:Courier New,monospace;font-size:.85rem;line-height:1.6;overflow-x:auto;max-height:400px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0f172a;border-radius:4px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#475569;border-radius:4px}.raw-data-section[_ngcontent-%COMP%]   .raw-data-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#64748b}  .domain-details-dialog .p-dialog-header{background:linear-gradient(135deg,#475569,#334155);color:#fff;border-top-left-radius:8px;border-top-right-radius:8px}  .domain-details-dialog .p-dialog-header .p-dialog-title{font-weight:700}  .domain-details-dialog .p-dialog-header .p-dialog-header-icon{color:#fff}  .domain-details-dialog .p-dialog-header .p-dialog-header-icon:hover{background-color:#ffffff1a}  .domain-details-dialog .p-divider{margin:1rem 0}"],changeDetection:0})};function st(a){let t=a,e=Math.floor(Math.abs(a)),o=a.toString().replace(/^[^.]*\.?/,"").length,s=parseInt(a.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return t===1?1:s===0&&e!==0&&e%1e6===0&&o===0||!(s>=0&&s<=5)?4:5}var Ke=["es",[["a.\u202Fm.","p.\u202Fm."],void 0,["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[void 0,"EGP"],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",st];var dt=()=>({width:"600px"}),ct=a=>[a,"COP","symbol","1.0-0","es"];function pt(a,t){a&1&&(n(0,"small",5),r(1,"Ingresa un email v\xE1lido"),i())}function gt(a,t){if(a&1){let e=y();n(0,"p-button",13),p("onClick",function(){u(e);let s=f();return _(s.onClose())}),i(),n(1,"p-button",14),p("onClick",function(){u(e);let s=f();return _(s.onSave())}),i()}if(a&2){let e=f();d("disabled",e.isSaving()),l(),d("loading",e.isSaving())("disabled",e.editForm.invalid)}}me(Ke);var G=class a{fb=C(be);domainService=C(U);domain=w.required();visible=w.required();visibleChange=T();domainUpdated=T();isSaving=v(!1);totalPrice=v(0);editForm=this.fb.group({contactEmail:["",[A.email]],hostingRenewalPrice:[0,[A.min(0)]],domainRenewalPrice:[0,[A.min(0)]]});constructor(){Y(()=>{let t=this.domain();if(t){let e=t.hostingRenewalPrice||0,o=t.domainRenewalPrice||0;e===0&&o===0&&t.renewalPrice&&(o=t.renewalPrice),this.editForm.patchValue({contactEmail:t.contactEmail||"",hostingRenewalPrice:e,domainRenewalPrice:o}),this.updateTotalPrice()}}),this.editForm.valueChanges.subscribe(()=>{this.updateTotalPrice()})}updateTotalPrice(){let t=this.editForm.value.hostingRenewalPrice||0,e=this.editForm.value.domainRenewalPrice||0;this.totalPrice.set(t+e)}async onSave(){let t=this.domain();if(!(!t||this.editForm.invalid)){this.isSaving.set(!0);try{let e={contactEmail:this.editForm.value.contactEmail||void 0,hostingRenewalPrice:this.editForm.value.hostingRenewalPrice||0,domainRenewalPrice:this.editForm.value.domainRenewalPrice||0,renewalPrice:0};await this.domainService.updateDomain(t.id,e),this.domainUpdated.emit(),this.onClose()}catch(e){console.error("Error updating domain:",e)}finally{this.isSaving.set(!1)}}}onClose(){this.editForm.reset(),this.visibleChange.emit(!1)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=D({type:a,selectors:[["app-domain-edit-dialog"]],inputs:{domain:[1,"domain"],visible:[1,"visible"]},outputs:{visibleChange:"visibleChange",domainUpdated:"domainUpdated"},features:[I([{provide:ie,useValue:"es"}])],decls:22,vars:21,consts:[[3,"visibleChange","header","visible","modal","draggable","resizable"],[3,"ngSubmit","formGroup"],[1,"field"],["for","contactEmail"],["pInputText","","id","contactEmail","formControlName","contactEmail","type","email","placeholder","cliente@ejemplo.com",1,"w-full"],[1,"p-error"],["for","hostingPrice"],["inputId","hostingPrice","formControlName","hostingRenewalPrice","mode","currency","currency","COP","locale","es",1,"w-full",3,"min"],["for","domainPrice"],["inputId","domainPrice","formControlName","domainRenewalPrice","mode","currency","currency","COP","locale","es",1,"w-full",3,"min"],[1,"total-price"],[1,"price"],["pTemplate","footer"],["label","Cancelar","icon","pi pi-times","severity","secondary",3,"onClick","disabled"],["label","Guardar","icon","pi pi-check",3,"onClick","loading","disabled"]],template:function(e,o){if(e&1&&(n(0,"p-dialog",0),p("visibleChange",function(c){return o.visibleChange.emit(c)}),n(1,"form",1),p("ngSubmit",function(){return o.onSave()}),n(2,"div",2)(3,"label",3),r(4,"Email de Contacto"),i(),m(5,"input",4),h(6,pt,2,0,"small",5),i(),n(7,"div",2)(8,"label",6),r(9,"Precio Renovaci\xF3n Hosting (COP)"),i(),m(10,"p-inputNumber",7),i(),n(11,"div",2)(12,"label",8),r(13,"Precio Renovaci\xF3n Dominio (COP)"),i(),m(14,"p-inputNumber",9),i(),n(15,"div",10)(16,"strong"),r(17,"Total Renovaci\xF3n:"),i(),n(18,"span",11),r(19),M(20,"currency"),i()()(),O(21,gt,2,3,"ng-template",12),i()),e&2){let s,c;N(P(18,dt)),d("header","Editar Dominio - "+(((s=o.domain())==null?null:s.domainName)||""))("visible",o.visible())("modal",!0)("draggable",!1)("resizable",!1),l(),d("formGroup",o.editForm),l(5),b((c=o.editForm.get("contactEmail"))!=null&&c.invalid&&((c=o.editForm.get("contactEmail"))!=null&&c.touched)?6:-1),l(4),d("min",0),l(4),d("min",0),l(5),g(ne(20,12,te(19,ct,o.totalPrice())))}},dependencies:[ye,ve,ue,_e,fe,he,Ce,j,B,S,k,E,z,R,Ve,Fe,V],styles:[".field[_ngcontent-%COMP%]{margin-bottom:1.5rem}.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600;color:var(--text-color)}.field[_ngcontent-%COMP%]   small.p-error[_ngcontent-%COMP%]{display:block;margin-top:.25rem;color:var(--red-500)}.total-price[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:var(--surface-100);border-radius:var(--border-radius);margin-top:1rem}.total-price[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text-color)}.total-price[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:var(--primary-color)}"],changeDetection:0})};var ut=()=>[10,25,50],_t=()=>["domainName","registrar","provider"],ft=()=>({"min-width":"50rem"});function vt(a,t){a&1&&(n(0,"div",8),m(1,"p-skeleton",17),n(2,"div",18),m(3,"p-skeleton",19),i()())}function Ct(a,t){if(a&1&&(n(0,"div",9)(1,"p-card")(2,"div",20)(3,"div",21),m(4,"i",22),i(),n(5,"div",23)(6,"div",24),r(7,"Total Dominios"),i(),n(8,"div",25),r(9),i(),n(10,"div",26),r(11,"Registrados"),i()()()(),n(12,"p-card")(13,"div",20)(14,"div",27),m(15,"i",28),i(),n(16,"div",23)(17,"div",24),r(18,"Saludables"),i(),n(19,"div",25),r(20),i(),n(21,"div",26),r(22,"Sin alertas"),i()()()(),n(23,"p-card")(24,"div",20)(25,"div",29),m(26,"i",30),i(),n(27,"div",23)(28,"div",24),r(29,"Atenci\xF3n Requerida"),i(),n(30,"div",25),r(31),i(),n(32,"div",31)(33,"span",32),r(34),i(),n(35,"span",33),r(36),i()()()()(),n(37,"p-card")(38,"div",20)(39,"div",34),m(40,"i",35),i(),n(41,"div",23)(42,"div",24),r(43,"Valor de Renovaci\xF3n"),i(),n(44,"div",25),r(45),M(46,"currency"),i(),n(47,"div",26),r(48,"Proyectado"),i()()()()()),a&2){let e=t;l(9),g(e.total),l(11),g(e.active),l(11),g(e.critical+e.warning+e.expired),l(3),x("",e.expired," vencidos"),l(2),x("",e.critical+e.warning," pr\xF3ximos"),l(9),g(F(46,6,e.totalValue))}}function ht(a,t){if(a&1){let e=y();n(0,"div",36)(1,"div",37),m(2,"i",38),n(3,"input",39),p("input",function(s){u(e),f();let c=ee(14);return _(c.filterGlobal(s.target.value,"contains"))}),i()()()}}function bt(a,t){a&1&&(n(0,"tr")(1,"th",40),r(2," Dominio "),m(3,"p-sortIcon",41),i(),n(4,"th",42),r(5," Vencimiento "),m(6,"p-sortIcon",43),i(),n(7,"th",44),r(8,"Estado"),i(),n(9,"th",45),r(10,"Auto-Renew"),i(),n(11,"th",45),r(12,"Privacy"),i(),n(13,"th",45),r(14,"Acciones"),i()())}function Pt(a,t){if(a&1){let e=y();n(0,"tr")(1,"td")(2,"div",46),r(3),i(),n(4,"div",47),r(5),i()(),n(6,"td")(7,"div",48)(8,"span",49),r(9),i(),n(10,"small",50),r(11),i()()(),n(12,"td",51),m(13,"p-tag",52),i(),n(14,"td",51),m(15,"i",53),i(),n(16,"td",51),m(17,"i",53),i(),n(18,"td",51)(19,"div",54)(20,"p-button",55),p("onClick",function(){let s=u(e).$implicit,c=f();return _(c.onEditDomain(s))}),i(),n(21,"p-button",56),p("onClick",function(){let s=u(e).$implicit,c=f();return _(c.onDomainClicked(s))}),i()()()()}if(a&2){let e=t.$implicit,o=f();l(3),g(e.domainName),l(2),x(" ",e.registrar||"Desconocido"," "),l(4),g(o.formatDate(e.expiresAt)),l(2),g(o.getStatusLabel(e.expiresAt)),l(2),d("value",o.getStatusLabel(e.expiresAt).split("(")[0])("severity",o.getSeverity(e.expiresAt))("icon",o.getStatusIcon(e.expiresAt)),l(2),d("ngClass",e.autoRenew?"fa-check text-green-500":"fa-times text-red-400"),l(2),d("ngClass",e.privacyProtection?"fa-shield-alt text-green-500":"fa-lock-open text-orange-400"),l(3),d("rounded",!0)("text",!0),l(),d("rounded",!0)("text",!0)}}function yt(a,t){a&1&&(n(0,"tr")(1,"td",57)(2,"div",58),m(3,"i",4),n(4,"p"),r(5,"No se encontraron dominios"),i()()()())}var X=class a{domainService=C(U);workspaceContext=C(ce);exportService=C(Ie);route=C(de);messageService=C(q);domains=v([]);isLoading=this.domainService.isLoading;error=this.domainService.error;stats=v(null);selectedDomain=v(null);showDetailsDialog=v(!1);showEditDialog=v(!1);workspaceName=oe(()=>this.workspaceContext.getCurrentWorkspace()?.name||"Workspace");ngOnInit(){this.route.paramMap.subscribe(()=>{this.loadData()})}async loadData(){try{let t=this.route.snapshot.paramMap.get("workspaceId");if(!t)throw new Error("No se encontr\xF3 el ID del workspace");let[e,o]=await Promise.all([this.domainService.getAllDomains(t),this.domainService.getDomainStatistics(t)]);this.domains.set(e),this.stats.set(o),e.length===0&&this.messageService.add({severity:"info",summary:"Sin dominios",detail:"No se encontraron dominios para este workspace.",life:5e3})}catch(t){console.error("[DomainsPage] Error loading data:",t),this.messageService.add({severity:"error",summary:"Error",detail:"Error al cargar los datos de dominios"})}}getSeverity(t){switch(this.domainService.getExpirationStatus(t)){case"ok":return"success";case"warning":return"warn";case"critical":case"expired":return"danger";default:return"info"}}getStatusLabel(t){let e=this.domainService.getExpirationStatus(t),o=this.domainService.getDaysUntilExpiration(t);return e==="expired"?`Vencido (${Math.abs(o||0)}d)`:o!==null?`${o} d\xEDas`:"Desconocido"}getStatusIcon(t){switch(this.domainService.getExpirationStatus(t)){case"ok":return"fa fa-check-circle";case"warning":return"fa fa-exclamation-triangle";case"critical":return"fa fa-exclamation-circle";case"expired":return"fa fa-times-circle";default:return"fa fa-question-circle"}}onDomainClicked(t){this.selectedDomain.set(t),this.showDetailsDialog.set(!0)}onDialogVisibilityChange(t){this.showDetailsDialog.set(t),t||this.selectedDomain.set(null)}onEditDomain(t){this.selectedDomain.set(t),this.showEditDialog.set(!0)}onEditDialogVisibilityChange(t){this.showEditDialog.set(t),t||this.selectedDomain.set(null)}exportToCSV(){let t=this.domains();if(t.length===0)return;let e=t.map(s=>({Dominio:s.domainName,Workspace:this.workspaceName(),"Fecha de Vencimiento":this.formatDate(s.expiresAt),Estado:this.domainService.getExpirationStatus(s.expiresAt)})),o=`dominios-${this.workspaceName().replace(/\s+/g,"-").toLowerCase()}-${new Date().toISOString().split("T")[0]}.csv`;this.exportService.exportToCSV(e,o),this.messageService.add({severity:"success",summary:"Exportado",detail:`Datos exportados a ${o}`,life:3e3})}formatDate(t){return t?t instanceof Date?t.toLocaleDateString():typeof t=="object"&&"toDate"in t?t.toDate().toLocaleDateString():String(t):""}onDomainUpdated(){this.messageService.add({severity:"success",summary:"Dominio actualizado",detail:"Los cambios se guardaron correctamente"}),this.loadData()}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=D({type:a,selectors:[["app-domains"]],features:[I([q])],decls:21,vars:23,consts:[["dt",""],[1,"system-health-container"],[1,"p-toolbar-group-start"],[1,"page-title"],[1,"fa","fa-globe"],[1,"p-toolbar-group-end"],["label","Actualizar","icon","fa fa-refresh","severity","secondary","size","small","pTooltip","Actualizar datos","tooltipPosition","bottom",3,"onClick","outlined","loading"],["label","Exportar","icon","fa fa-download","severity","secondary","size","small",1,"ml-2",3,"onClick","outlined","disabled"],[1,"loading-container"],[1,"summary-cards"],[1,"p-datatable-sm",3,"value","loading","paginator","rows","rowsPerPageOptions","globalFilterFields","tableStyle","rowHover"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visibleChange","domain","visible"],[3,"visibleChange","domainUpdated","domain","visible"],["height","150px","width","100%"],[1,"mt-4"],["height","400px","width","100%"],[1,"stat-card"],[1,"stat-icon","total"],[1,"fa","fa-hashtag"],[1,"stat-content"],[1,"stat-label"],[1,"stat-value"],[1,"stat-subtitle"],[1,"stat-icon","success"],[1,"fa","fa-check-circle"],[1,"stat-icon","warning"],[1,"fa","fa-exclamation-triangle"],[1,"stat-breakdown"],[1,"danger"],[1,"warning"],[1,"stat-icon","value"],[1,"fa","fa-dollar-sign"],[1,"filter-toolbar"],[1,"search-wrapper"],[1,"fa","fa-search","search-icon"],["pInputText","","type","text","placeholder","Buscar dominio...",1,"glass-input","with-icon",3,"input"],["pSortableColumn","domainName",2,"min-width","200px"],["field","domainName"],["pSortableColumn","expiresAt",2,"width","180px"],["field","expiresAt"],[2,"width","120px","text-align","center"],[2,"width","100px","text-align","center"],[1,"font-bold","text-lg","text-truncate"],[1,"text-sm","text-muted","text-truncate"],[1,"d-flex","flex-column"],[1,"font-medium"],[1,"text-muted","block","mt-1"],[2,"text-align","center"],[3,"value","severity","icon"],[1,"fa",3,"ngClass"],[1,"flex","justify-content-center","gap-2"],["icon","fa fa-edit","severity","secondary","pTooltip","Editar",3,"onClick","rounded","text"],["icon","fa fa-external-link","severity","info","pTooltip","Ver Detalles",3,"onClick","rounded","text"],["colspan","6",2,"text-align","center","padding","3rem"],[1,"empty-state"]],template:function(e,o){if(e&1){let s=y();n(0,"div",1),m(1,"p-toast"),n(2,"p-toolbar")(3,"div",2)(4,"h2",3),m(5,"i",4),r(6),i()(),n(7,"div",5)(8,"p-button",6),p("onClick",function(){return u(s),_(o.loadData())}),i(),n(9,"p-button",7),p("onClick",function(){return u(s),_(o.exportToCSV())}),i()()(),h(10,vt,4,0,"div",8),h(11,Ct,49,8,"div",9),n(12,"p-card")(13,"p-table",10,0),O(15,ht,4,0,"ng-template",11)(16,bt,15,0,"ng-template",12)(17,Pt,22,13,"ng-template",13)(18,yt,6,0,"ng-template",14),i()(),n(19,"app-domain-details-dialog",15),p("visibleChange",function(W){return u(s),_(o.onDialogVisibilityChange(W))}),i(),n(20,"app-domain-edit-dialog",16),p("visibleChange",function(W){return u(s),_(o.onEditDialogVisibilityChange(W))})("domainUpdated",function(){return u(s),_(o.onDomainUpdated())}),i()()}if(e&2){let s;d("@fadeIn",void 0),l(6),x(" Dominios - ",o.workspaceName()," "),l(2),d("outlined",!0)("loading",o.isLoading()),l(),d("outlined",!0)("disabled",o.domains().length===0),l(),b(o.isLoading()&&!o.stats()?10:-1),l(),b((s=o.stats())?11:-1,s),l(2),d("value",o.domains())("loading",o.isLoading())("paginator",!0)("rows",10)("rowsPerPageOptions",P(20,ut))("globalFilterFields",P(21,_t))("tableStyle",P(22,ft))("rowHover",!0),l(6),d("domain",o.selectedDomain())("visible",o.showDetailsDialog()),l(),d("domain",o.selectedDomain())("visible",o.showEditDialog())}},dependencies:[se,ae,Pe,Oe,De,S,ke,Ee,k,E,Ne,Te,Le,Ae,Re,ze,$,L,z,R,Se,we,ge,pe,H,G,V],styles:[".system-health-container[_ngcontent-%COMP%]{padding:1.5rem;max-width:1600px;margin:0 auto}.system-health-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1.5rem;font-weight:600;margin:0;color:var(--text-color)}.system-health-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary-color)}.system-health-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{margin:2rem 0}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;margin:1.5rem 0}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.25rem}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.total[_ngcontent-%COMP%]{background:#3b82f626;color:#3b82f6;border:1px solid rgba(59,130,246,.2)}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.success[_ngcontent-%COMP%]{background:#10b98126;color:#10b981;border:1px solid rgba(16,185,129,.2)}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.warning[_ngcontent-%COMP%]{background:#f59e0b26;color:#f59e0b;border:1px solid rgba(245,158,11,.2)}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon.value[_ngcontent-%COMP%]{background:#8b5cf626;color:#8b5cf6;border:1px solid rgba(139,92,246,.2)}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{flex:1;min-width:0}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-color-secondary);margin-bottom:.15rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:var(--text-color);line-height:1.2}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-subtitle[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-color-secondary);margin-top:.15rem}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-breakdown[_ngcontent-%COMP%]{display:flex;gap:.5rem;font-size:.75rem}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-breakdown[_ngcontent-%COMP%]   .danger[_ngcontent-%COMP%]{color:var(--red-600);font-weight:600}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   .stat-breakdown[_ngcontent-%COMP%]   .warning[_ngcontent-%COMP%]{color:var(--yellow-600);font-weight:600}@media(max-width:1200px){.system-health-container[_ngcontent-%COMP%]   .system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media(max-width:576px){.system-health-container[_ngcontent-%COMP%]   .system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}}.system-health-container[_ngcontent-%COMP%]   .filter-toolbar[_ngcontent-%COMP%]{padding:.5rem 0}.system-health-container[_ngcontent-%COMP%]   .filter-toolbar[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.system-health-container[_ngcontent-%COMP%]   .filter-toolbar[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;color:var(--primary-color);pointer-events:none;z-index:1}.system-health-container[_ngcontent-%COMP%]   .filter-toolbar[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .glass-input[_ngcontent-%COMP%]{padding-left:2.5rem;border-radius:12px;border:1px solid rgba(0,0,0,.08);background:#fff9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);transition:all .2s;min-width:300px}.system-health-container[_ngcontent-%COMP%]   .filter-toolbar[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .glass-input[_ngcontent-%COMP%]:focus{background:#fff;border-color:var(--primary-color);box-shadow:0 0 0 1px var(--primary-color-alpha, rgba(var(--primary-rgb), .2))}.system-health-container[_ngcontent-%COMP%]   .filter-toolbar[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%]   .glass-input.p-inputtext[_ngcontent-%COMP%]{padding-left:2.5rem}.system-health-container[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%]{color:var(--text-color-secondary)}.system-health-container[_ngcontent-%COMP%]   .text-green-500[_ngcontent-%COMP%]{color:var(--green-500)}.system-health-container[_ngcontent-%COMP%]   .text-red-400[_ngcontent-%COMP%]{color:var(--red-400)}.system-health-container[_ngcontent-%COMP%]   .text-orange-400[_ngcontent-%COMP%]{color:var(--orange-400)}.system-health-container[_ngcontent-%COMP%]   .text-lg[_ngcontent-%COMP%]{font-size:1.1rem}.system-health-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:3rem;text-align:center}.system-health-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:var(--text-color-secondary);margin-bottom:1rem;opacity:.5}.system-health-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-color-secondary);font-size:1rem}@media(max-width:768px){.system-health-container[_ngcontent-%COMP%]{padding:1rem}.system-health-container[_ngcontent-%COMP%]   .summary-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.system-health-container[_ngcontent-%COMP%]   .search-wrapper[_ngcontent-%COMP%], .system-health-container[_ngcontent-%COMP%]   .glass-input[_ngcontent-%COMP%]{width:100%;min-width:unset!important}.system-health-container[_ngcontent-%COMP%]     .p-toolbar{flex-direction:column!important;gap:1rem;padding:1.25rem!important}.system-health-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-start{width:100%;justify-content:center;text-align:center}.system-health-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-start .page-title{justify-content:center;text-align:center;flex-wrap:wrap}.system-health-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-end{width:100%;display:grid!important;grid-template-columns:1fr 1fr;gap:.75rem}.system-health-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-end p-button, .system-health-container[_ngcontent-%COMP%]     .p-toolbar .p-toolbar-group-end button{width:100%;margin:0!important}}"],data:{animation:[Me,xe]},changeDetection:0})};export{X as default};
